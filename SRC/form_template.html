<!DOCTYPE html>
<html lang="fr">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>XVLIVEMANAGER – Admin</title>
      <!-- Bootstrap + Bootstrap Icons -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
      <link href="static/admin/base.css" rel="stylesheet"/>
      <link href="static/admin/reg_sta.css" rel="stylesheet"/>
      <link href="static/admin/left.css" rel="stylesheet"/>
      <link href="static/admin/main.css" rel="stylesheet"/>
      <style>
      </style>
   </head>
   <body>
      <header class="header">
         <div class="header-title">
            <img id="pageLogo" src="" alt="Logo XVLIVEMANAGER" class="header-logo" style="max-height: 60px; height: auto; display: none;" />
            <div class="title-text-group">
               <div class="title-main">XVLIVEMANAGER</div>
               <div class="user-info">
                  <div class="user-name"><span id="welcomeUser" data-i18n="welcomeUser">Utilisateur</span></div>
                  <div class="user-message"><span id="welcomeTaglineText" data-i18n="welcomeTaglineText">Merci d'utiliser XVLIVEMANAGER</span></div>
               </div>
            </div>
         </div>
         <div class="header-right">
            <div class="obs-status">
               <strong data-i18n="liveManagement">Gestion du direct :</strong>
               <span id="obs-state-container" style="display: flex; gap: 0.75rem; margin-left: 0.75rem;"></span>
            </div>
<script>
   function updateOBSStates() {
     fetch("/obs/interface", { headers: { "X-Requested-With": "XMLHttpRequest" } })
       .then(res => res.json())
       .then(data => {
         const container = document.getElementById("obs-state-container");
         container.innerHTML = "";

         const lang = localStorage.getItem("lang") || "fr";

         const translations = {
           en: {
             "AVANT-MATCH": "PRE-MATCH",
             "RÉSUMÉ": "HIGHLIGHTS",
             "1RE MI-TEMPS": "1ST HALF",
             "RÉSUMÉ DU MATCH": "MATCH SUMMARY",
             "MATCH EN DIRECT": "LIVE MATCH",
             "RÉSUMÉ 1RE MI-TEMPS": "HIGHLIGHTS 1ST HALF",
             "RÉSUMÉ DU MATCH EN DIRECT": "LIVE MATCH SUMMARY"
           },
           es: {
             "AVANT-MATCH": "PREVIA",
             "RÉSUMÉ": "RESUMEN",
             "1RE MI-TEMPS": "1ª PARTE",
             "RÉSUMÉ DU MATCH": "RESUMEN DEL PARTIDO",
             "MATCH EN DIRECT": "PARTIDO EN DIRECTO",
             "RÉSUMÉ 1RE MI-TEMPS": "RESUMEN 1ª PARTE",
             "RÉSUMÉ DU MATCH EN DIRECT": "RESUMEN EN DIRECTO"
           }
         };

         data.states.forEach(item => {
           const wrapper = document.createElement("span");
           wrapper.className = "obs-state-item";
           wrapper.style.display = "inline-flex";
           wrapper.style.alignItems = "center";
           wrapper.style.gap = "0.35rem";
           wrapper.style.cursor = "pointer";

           const indicator = document.createElement("span");
           indicator.className = "status-indicator";
           indicator.style.width = "12px";
           indicator.style.height = "12px";
           indicator.style.display = "inline-block";
           indicator.style.borderRadius = "50%";
           indicator.style.backgroundColor = item.visible ? "#10b981" : "#ef4444";
           indicator.style.transition = "background 0.15s";

           const label = document.createElement("span");
           const original = item.label.trim().toUpperCase();
           let translated = item.label;

           if (lang === "en" && translations.en[original]) {
             translated = translations.en[original];
           } else if (lang === "es" && translations.es[original]) {
             translated = translations.es[original];
           }

           label.textContent = translated;
           label.style.fontSize = "0.8rem";
           label.style.color = item.visible ? "var(--text-white)" : "#6c6774";

           wrapper.appendChild(indicator);
           wrapper.appendChild(label);

           wrapper.onclick = () => {
             indicator.style.opacity = "0.5";
             setTimeout(() => indicator.style.opacity = "1", 150);
             toggleOBS(item.name);
           };

           container.appendChild(wrapper);
         });
       });
   }

   function toggleOBS(name) {
     fetch("/obs/toggle/" + encodeURIComponent(name), { method: "POST" })
       .then(() => setTimeout(updateOBSStates, 150));
   }

   document.addEventListener("DOMContentLoaded", () => {
     updateOBSStates();
     setInterval(updateOBSStates, 2000);
   });
</script>

            <div class="icon-block" title="Arrêter le serveur" data-i18n-title="shutdownTitle">
               <button id="shutdown-server-btn" class="stop-server-btn">
               <i class="bi bi-power"></i> <span data-i18n="stopServerBtn">Stop serveur</span>
               </button>
            </div>
            <script>
               document.getElementById('shutdown-server-btn').addEventListener('click', function(e) {
                 e.preventDefault();
                 const confirmMsg = translations[lang]?.shutdownConfirm || "Voulez-vous vraiment arrêter le serveur XVLIVEMANAGER ?";
                 if (!confirm(confirmMsg)) return;
               
                 fetch('/shutdown', { method: 'POST' })
                   .then(res => {
                     if (res.ok) {
                       alert(translations[lang]?.shutdownSuccess || "Le serveur va s'arrêter…");
                       setTimeout(() => { window.close(); }, 1000);
                     } else {
                       alert(translations[lang]?.shutdownFail || "Échec de l’arrêt du serveur !");
                     }
                   })
                   .catch(() => alert(translations[lang]?.shutdownError || "Serveur arrêté"));
               });
                           
            </script>
            <div class="obs-description" data-i18n="obsDescription">
               Visualisez en temps réel la scène active dans OBS.
            </div>
            <div class="icon-block">
               <div class="icon-label" data-i18n="stopLocalServer">Arrêter le serveur local</div>
            </div>
         </div>
      </header>
      <div class="sub-header">
         <div class="sub-header-left">
            <div data-i18n="mainInfo">Informations principales</div>
            <div data-i18n="teamCompositions">Compositions des équipes</div>
            <div data-i18n="addPartners">Ajout de partenaires</div>
            <div data-i18n="livePreparation">Préparation du direct</div>
            <div id="btnOpenLayouts" data-i18n="layouts">Interfaces</div>
            <script>
               document.addEventListener('DOMContentLoaded', function() {
                 var btn = document.getElementById('btnOpenLayouts');
                 if (btn) {
                   btn.style.cursor = 'pointer';
                   btn.addEventListener('click', function() {
                     toggleLayoutsPanel(true);
                   });
                 }
               });
            </script>
            <div class="danger-item" data-i18n="deleteData" onclick="toggleDeleteDataModal(true)">Suppression des données</div>
         </div>
         <div class="sub-header-right">
            <div id="open-archives" data-i18n="matchArchives">Archives des rencontres</div>
            <script>
               document.getElementById('open-archives').addEventListener('click', function() {
                 toggleArchivePanel(true);
                 loadArchives(); 
               });
            </script>
         </div>
      </div>
      <div class="page-body">
         <aside class="left-column">
            <div class="section-subtitle">
               <i class="bi bi-clock-fill"></i>
               <span data-i18n="timer">Chronomètre</span>
            </div>
            <div id="timer-card" class="dashboard-card">
               <div class="card-info">
                  <div id="timer-display" class="card-number">00:00</div>
                  <p class="card-label mb-3" data-i18n="manageEveryMoment">
                     Gérez chaque moment du match avec précision, fluidité et réactivité.
                  </p>
                  <form
                     id="timer-form"
                     class="settings-form"
                     method="POST"
                     action="/update_timer?anchor=timer"
                     autocomplete="off"
                     >
                     <div class="form-group">
                        <div class="timer-controls-row">
                           <button
                              type="submit"
                              name="action"
                              value="start"
                              class="btn btn-primary btn-sm has-tooltip"
                              data-tooltip="Démarrer"
                              onclick="document.getElementById('timer-action').value='start';"
                              >
                           <i class="bi bi-play-fill"></i>
                           </button>
                           <button
                              type="submit"
                              name="action"
                              value="pause"
                              class="btn btn-primary btn-sm has-tooltip"
                              data-tooltip="Pause"
                              onclick="document.getElementById('timer-action').value='pause';"
                              >
                           <i class="bi bi-pause-fill"></i>
                           </button>
                           <button
                              type="submit"
                              name="action"
                              value="reset"
                              class="btn btn-primary btn-sm has-tooltip"
                              data-tooltip="Reset"
                              onclick="document.getElementById('timer-action').value='reset';"
                              >
                           <i class="bi bi-arrow-counterclockwise"></i>
                           </button>
                           <button
                              type="submit"
                              name="action"
                              value="stop"
                              class="btn btn-primary btn-sm has-tooltip"
                              data-tooltip="Stop"
                              onclick="document.getElementById('timer-action').value='stop';"
                              >
                           <i class="bi bi-stop-fill"></i>
                           </button>
                           <div class="timer-input-wrapper">
                              <input
                                 id="timer-start-minute"
                                 name="start_minute"
                                 type="number"
                                 min="0"
                                 value="0"
                                 class="form-control no-spinner"
                                 autocomplete="on"
                                 style="width:6ch;"
                                 />
                           </div>
                           <input
                              type="hidden"
                              id="timer-action"
                              name="action"
                              value="start"
                              />
                        </div>
                     </div>
                  </form>
                  <div class="steam-bar">
                     <div id="timer-bar" class="steam-bar-fill"></div>
                  </div>
                  <div class="timer-bounds">
                     <span id="timer-lower-bound">00:00</span>
                     <span id="timer-upper-bound">80m</span>
                  </div>
               </div>
            </div>
            <script>
               document.addEventListener('DOMContentLoaded', () => {
                 const card      = document.getElementById('timer-card');
                 const form      = document.getElementById('timer-form');
                 const buttons   = form.querySelectorAll('button[name="action"]');
                 const display   = document.getElementById('timer-display');
                 const inputMin  = form.querySelector('input[name="start_minute"]');
                 const hiddenAct = form.querySelector('input[name="action"]');
                 const bar       = document.getElementById('timer-bar');
                 const lower     = document.getElementById('timer-lower-bound');
                 const MAX       = 80;
               
                 let hiddenSec = form.querySelector('#timer-action-second');
                 if (!hiddenSec) {
                   hiddenSec = document.createElement('input');
                   Object.assign(hiddenSec, {
                     type:  'hidden',
                     id:    'timer-action-second',
                     name:  'start_second',
                     value: '0'
                   });
                   form.appendChild(hiddenSec);
                 }
               
                 function sendAction(action) {
                   hiddenAct.value      = action;
                   inputMin.value       = inputMin.value;
                   hiddenSec.value      = (action === 'start') ? 0 : display.textContent.split(':')[1];
               
                   card.classList.add('updating');
                   fetch('/update_timer?anchor=timer', {    
                     method:      'POST',
                     credentials: 'same-origin',
                     body:        new FormData(form)
                   })
                   .then(r => {
                     if (!r.ok) throw new Error('Erreur serveur');
                     return r.json();
                   })
                   .then(json => {
                     const m    = +json.minute || 0;
                     const s    = +json.second || 0;
                     const mmss = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
                     display.textContent = mmss;
                     bar.style.width     = Math.min(100, (m / MAX)*100) + '%';
                     lower.textContent   = mmss;
                     hiddenSec.value     = s;
                   })
                   .catch(console.error)
                   .finally(() => card.classList.remove('updating'));
                 }
               
                 buttons.forEach(btn => {
                   btn.addEventListener('click', e => {
                     e.preventDefault();
                     sendAction(btn.value);
                   });
                 });
               
                 function refreshDisplay() {
                   card.classList.add('updating');
                   fetch('/timer_value', { credentials: 'same-origin' })    
                     .then(r => r.json())
                     .then(data => {
                       const m    = +data.minute || 0;
                       const s    = +data.second || 0;
                       const mmss = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
                       display.textContent = mmss;
                       bar.style.width     = Math.min(100, (m / MAX)*100) + '%';
                       lower.textContent   = mmss;
                     })
                     .catch(console.error)
                     .finally(() => card.classList.remove('updating'));
                 }
               
                 refreshDisplay();
                 setInterval(refreshDisplay, 1000);
               
                 inputMin.addEventListener('keydown', function(e) {
                   if (e.key === 'Enter') {
                     e.preventDefault();
                     hiddenAct.value = 'start';
                     form.submit();
                   }
                 });
               });
            </script>

            <div class="section-subtitle">
               <i class="bi bi-bar-chart-fill"></i>
               <span data-i18n="matchScore">Score du match</span>
            </div>
            <form id="score" action="/update_score?anchor=score" method="POST" autocomplete="off">
               <div id="score-card" class="dashboard-card">
                  <div class="card-info">
                     <div class="score-display">
                        <span class="score-label" data-i18n="home">Domicile</span>
                        <span id="score-home" class="card-number">{{ score.home if score.home is defined else 0 }}</span>
                        <span class="card-number">–</span>
                        <span id="score-away" class="card-number">{{ score.away if score.away is defined else 0 }}</span>
                        <span class="score-label" data-i18n="away">Extérieur</span>
                     </div>
                     <input type="hidden" id="score_home" name="score_home" value="{{ score.home if score.home is defined else 0 }}">
                     <input type="hidden" id="score_away" name="score_away" value="{{ score.away if score.away is defined else 0 }}">
                     <div class="score-controls-row">
                        <div class="score-controls-team">
                           <button type="button" onclick="updateScore('home', 5)" class="btn-score-add">+5</button>
                           <button type="button" onclick="updateScore('home', 3)" class="btn-score-add">+3</button>
                           <button type="button" onclick="updateScore('home', 2)" class="btn-score-add">+2</button>
                           <button type="button" onclick="updateScore('home', -5)" class="status-btn status-btn-sub">-5</button>
                        </div>
                        <div class="score-controls-team">
                           <button type="button" onclick="updateScore('away', 5)" class="btn-score-add">+5</button>
                           <button type="button" onclick="updateScore('away', 3)" class="btn-score-add">+3</button>
                           <button type="button" onclick="updateScore('away', 2)" class="btn-score-add">+2</button>
                           <button type="button" onclick="updateScore('away', -5)" class="status-btn status-btn-sub">-5</button>
                        </div>
                     </div>
                  </div>
               </div>
            </form>
            <script>
               function updateScore(team, val) {
                 const inputHome   = document.getElementById('score_home');
                 const inputAway   = document.getElementById('score_away');
                 const displayHome = document.getElementById('score-home');
                 const displayAway = document.getElementById('score-away');
                 const form        = document.getElementById('score');
               
                 if (team === 'home') {
                   let v = parseInt(inputHome.value, 10) || 0;
                   v = Math.max(0, v + val);
                   inputHome.value = v;
                   if (displayHome) displayHome.textContent = v;
                 } else {
                   let v = parseInt(inputAway.value, 10) || 0;
                   v = Math.max(0, v + val);
                   inputAway.value = v;
                   if (displayAway) displayAway.textContent = v;
                 }
               
                 const url  = form.getAttribute('action');
                 const data = new FormData(form);
                 fetch(url, {
                   method: form.getAttribute('method') || 'POST',
                   body: data,
                   credentials: 'same-origin'
                 });
               }
               
               document.addEventListener('DOMContentLoaded', function() {
                 const inputHome   = document.getElementById('score_home');
                 const inputAway   = document.getElementById('score_away');
                 const displayHome = document.getElementById('score-home');
                 const displayAway = document.getElementById('score-away');
                 if (inputHome && displayHome) displayHome.textContent = inputHome.value;
                 if (inputAway && displayAway) displayAway.textContent = inputAway.value;
               });
            </script>
            <div class="section-subtitle">
               <i class="bi bi-tv-fill"></i>
               <span data-i18n="videoStream">Flux vidéo</span>
            </div>
            <div id="stream-card" class="dashboard-card">
               <div class="card-info">
                  <div class="stream-container">
                     <iframe
                        id="stream-iframe"
                        src=""
                        frameborder="0"
                        allow="autoplay; encrypted-media"
                        allowfullscreen
                        ></iframe>
                  </div>
                  <p class="card-label" data-i18n="pasteEmbedUrl">
                     Collez l’URL d’intégration de votre plateforme et cliquez sur « Charger ».
                  </p>
                  <div class="settings-form">
                     <div class="form-group">
                        <label for="stream-url" class="form-label" data-i18n="embedUrl">URL d’intégration</label>
                        <form id="stream-form" onsubmit="return false;" style="margin:0;">
                           <div class="stream-controls-row">
                              <input
                                 id="stream-url"
                                 type="text"
                                 class="form-control"
                                 placeholder="https://www.youtube.com/embed/…"
                                 />
                              <button id="stream-load" class="btn btn-primary btn-sm" type="button" data-i18n="loadBtn">
                              Charger
                              </button>
                           </div>
                        </form>
                     </div>
                  </div>
               </div>
            </div>
<script>
function toEmbedUrl(url) {
  if (!url) return '';
  try {
    url = url.trim();

    if (
      url.includes('/embed/') ||
      url.includes('player.twitch.tv') ||
      url.includes('player.vimeo.com') ||
      url.includes('dailymotion.com/embed/') ||
      url.includes('facebook.com/plugins/video.php') ||
      url.includes('tiktok.com/embed/')
    ) {
      return url;
    }

    const u = new URL(url);

    // YouTube
    if (u.hostname.includes('youtube.com') || u.hostname === 'youtu.be') {
      let vid;
      if (u.hostname === 'youtu.be') {
        vid = u.pathname.slice(1);
      } else if (u.searchParams.has('v')) {
        vid = u.searchParams.get('v');
      } else if (u.pathname.startsWith('/embed/')) {
        vid = u.pathname.split('/').pop();
      }
      if (vid) return `https://www.youtube.com/embed/${vid}`;
    }

    // Twitch
    if (u.hostname.includes('twitch.tv')) {
      const path = u.pathname.split('/').filter(Boolean);
      if (path[0] === 'videos' && path[1]) {
        return `https://player.twitch.tv/?video=${path[1]}&parent=${location.hostname}`;
      } else if (path[0]) {
        return `https://player.twitch.tv/?channel=${path[0]}&parent=${location.hostname}`;
      }
    }

    // Facebook
    if (u.hostname.includes('facebook.com')) {
      return `https://www.facebook.com/plugins/video.php?href=${encodeURIComponent(url)}&show_text=0&width=560`;
    }

    // TikTok
    if (u.hostname.includes('tiktok.com')) {
      const match = url.match(/\/video\/(\d+)/);
      if (match) {
        return `https://www.tiktok.com/embed/v2/${match[1]}`;
      }
    }

    // Dailymotion
    if (u.hostname.includes('dailymotion.com')) {
      let id = null;
      if (u.pathname.startsWith('/video/')) {
        id = u.pathname.split('/')[2];
      }
      if (id) {
        return `https://www.dailymotion.com/embed/video/${id}`;
      }
    }

    // Vimeo
    if (u.hostname.includes('vimeo.com')) {
      const parts = u.pathname.split('/');
      const id = parts.filter(Boolean).pop();
      if (id && /^\d+$/.test(id)) {
        return `https://player.vimeo.com/video/${id}`;
      }
    }

    return url;
  } catch (e) {
    return url;
  }
}
               
               document.addEventListener('DOMContentLoaded', function () {
                 const btn = document.getElementById('stream-load');
                 const input = document.getElementById('stream-url');
                 const iframe = document.getElementById('stream-iframe');
                 if (!btn || !input || !iframe) return;
               
                 const lastUrl = localStorage.getItem('stream-url') || '';
                 input.value = lastUrl;
                 iframe.src = lastUrl ? toEmbedUrl(lastUrl) : '';
               
                 btn.addEventListener('click', function () {
                   const url = input.value.trim();
                   localStorage.setItem('stream-url', url); 
                   if (!url) {
                     iframe.src = "";
                     return;
                   }
                   const embedUrl = toEmbedUrl(url);
                   iframe.src = embedUrl;
                 });
               
                 input.addEventListener('keydown', function (e) {
                   if (e.key === 'Enter') {
                     btn.click();
                     e.preventDefault();
                   }
               
                   setTimeout(() => {
                     localStorage.setItem('stream-url', input.value.trim());
                   }, 10);
                 });
               });
            </script>
            <script>
               document.addEventListener('DOMContentLoaded', () => {
                 const input  = document.getElementById('stream-url');
                 const btn    = document.getElementById('stream-load');
                 const iframe = document.getElementById('stream-iframe');
                 const KEY    = 'streamEmbedUrl';
               
                 const saved = localStorage.getItem(KEY);
                 if (saved) {
                   input.value  = saved;
                   iframe.src   = saved;
                 }
               
                 btn.addEventListener('click', () => {
                   let url = input.value.trim();
                   if (!url) return alert(translations[lang]?.pleaseEnterUrl || 'Veuillez saisir une URL.');
               
                   const embed = toEmbedUrl(url);
                   localStorage.setItem(KEY, embed);
                   iframe.src = embed;
                 });
               });
                           
            </script>
            <div class="section-subtitle obs-subtitle" style="margin-top:2.2em;">
               <i class="bi bi-translate" style="color:#bf2a3c"></i>
               <span data-i18n="langSectionTitle">Langue</span>
            </div>
            <div class="dashboard-card obs-card" style="background:rgba(0,0,0,0.20);text-align:center;box-shadow:0 1px 7px rgba(0,0,0,0.06);padding:1.1em 1em 1.2em 1em;">
               <div style="display:flex;flex-direction:column;align-items:center;">
                  <div style="display:flex;flex-direction:row;justify-content:center;gap:0.85em;">
                     <button id="fr-opt" class="lang-opt" type="button" aria-pressed="false" data-lang="fr">Français</button>
                     <button id="en-opt" class="lang-opt" type="button" aria-pressed="false" data-lang="en">English</button>
	             <button id="es-opt" class="lang-opt" type="button" aria-pressed="false" data-lang="es">Español</button>
                  </div>
                  <div style="font-size:0.97em;color:#bfc5cf;margin-top:1.3em;text-align:center;width:100%;" data-i18n="langSectionDesc">
                     Sélectionnez votre langue pour l’interface XVLIVEMANAGER.
                  </div>
               </div>
            </div>
<div class="section-subtitle obs-subtitle" style="margin-top:2.2em;">
  <i class="bi bi-megaphone-fill" style="color:#bf2a3c"></i>
  <span data-i18n="forum_title">Club</span>
</div>

<div class="dashboard-card obs-card" style="background:rgba(0,0,0,0.20); box-shadow:0 1px 7px rgba(0,0,0,0.06); padding:1.25em 1em 1em 1em;">
  <div style="display:flex; flex-direction:column; align-items:center;">
    <div style="font-size:0.98em; color:#d4d8de; margin-bottom:1.2em; text-align:center;" data-i18n="forum_description">
      Créez des phases de poule et des tournois (brackets) facilement.
    </div>
    <a href="https://club.xvlivemanager.fr/" target="_blank" class="btn btn-primary btn-sm" style="margin-top:0;" data-i18n="access_forum">
      Accéder au forum
    </a>
  </div>
</div>
      <div class="section-subtitle obs-subtitle" style="margin-top:2.2em;">
               <i class="bi bi-lightning-fill" style="color:#bf2a3c"></i>
               <span data-i18n="obsOnly">Seulement pour OBS Studio</span>
            </div>
            <div class="dashboard-card obs-card" style="background:rgba(0,0,0,0.20);text-align:center;box-shadow:0 1px 7px rgba(0,0,0,0.06);padding:1.25em 1em 1em 1em;">
               <a href="https://obsproject.com/fr" target="_blank" class="obs-logo-link" style="display:inline-block;">
               <img src="static/admin/obs.png" alt="OBS Studio" style="height:54px;width:auto;display:block;margin:0 auto;transition:transform 0.16s;">
               </a>
               <div style="font-size:0.98em;color:#d4d8de;margin-top:0.70em;text-align:center;"
                  data-i18n="optimalIntegration">
                  Compatibilité et intégration optimales.
               </div>
            </div>
            <script>
               document.querySelectorAll('.obs-logo-link img').forEach(function(img){
                 img.addEventListener('mouseover',function(){ this.style.transform="scale(1.12)"; });
                 img.addEventListener('mouseout',function(){ this.style.transform="none"; });
               });
            </script>
         </aside>
         <main class="main-content">
            <div class="main-intro-block">
               <div class="main-intro-title" data-i18n="meetingControl">Pilotage de la rencontre</div>
               <div class="main-intro-desc" data-i18n="masterEveryMoment">
                  Maîtrisez tous les moments du match : enregistrement des buteurs, gestion des événements, des remplacements et des commentaires, le tout en temps réel.
               </div>
            </div>
            <div class="dashboard-card tabbed-card">
               <div class="tabs-header">
                  <button type="button" class="tab-btn active" data-tab="buteurs" data-i18n="scorersList">Liste des buteurs</button>
                  <button type="button" class="tab-btn" data-tab="evenements" data-i18n="keyMoments">Faits marquants</button>
                  <button type="button" class="tab-btn" data-tab="remplacants" data-i18n="lineupRotation">Rotation d’effectif</button>
               </div>
               <div class="tabs-content">
                  <div class="tab-panel active" data-tab="buteurs">
                     <div class="info-block">
                        <div class="main-intro-desc" data-i18n="dragScorer">Glissez un joueur sur le type de but pour enregistrer.</div>
                        <div class="sub-block buteurs-subblock">
                           <form id="buteurs-dnd" action="/update_buteurs?anchor=buteurs" method="POST" autocomplete="off">
                              <div class="buteurs-columns-row">
                                 <div class="teams-column buteurs-home">
                                    <h3 class="buteurs-title buteurs-title-home" data-i18n="homeTeam">Équipe domicile</h3>
                                    <div class="buteurs-players-list">
                                       {% for joueur in select_players_home %}
                                       {% if joueur %}
                                       <button type="button" class="status-btn home-btn" draggable="true"
                                          data-player="{{ joueur }}" data-team="home"
                                          style="width:120px; min-width:120px; max-width:120px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                                       {{ joueur }}
                                       </button>
                                       {% endif %}
                                       {% endfor %}
                                    </div>
                                 </div>
                                 <div class="types-column buteurs-types">
                                    {% for type, label in [
                                    ('Essai 🏉', 'Essai'),
                                    ('Transfo 🎯', 'Transformation'),
                                    ('Drop 🦶', 'Drop'),
                                    ('Pénalité 🎯', 'Pénalité')
                                    ] %}
                                    <div class="type-dropzone" data-type="{{ type }}" data-i18n="{{ label|lower|replace(' ', '_') }}">
                                       {{ label }}
                                    </div>
                                    {% endfor %}
                                 </div>
                                 <div class="teams-column buteurs-away">
                                    <h3 class="buteurs-title buteurs-title-away" data-i18n="awayTeam">Équipe extérieure</h3>
                                    <div class="buteurs-players-list">
                                       {% for joueur in select_players_away %}
                                       {% if joueur %}
                                       <button type="button" class="status-btn away-btn" draggable="true"
                                          data-player="{{ joueur }}" data-team="away"
                                          style="width:120px; min-width:120px; max-width:120px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                                       {{ joueur }}
                                       </button>
                                       {% endif %}
                                       {% endfor %}
                                    </div>
                                 </div>
                              </div>
                              <div class="buteurs-iframe-btnrow" style="display:flex; justify-content: flex-end;">
                                 <button type="button" id="show-buteurs-iframe" class="btn-score-add" data-i18n="viewScorersList">
                                 Voir la liste des buteurs
                                 </button>
                              </div>
                              <div id="buteurs-modal" class="buteurs-modal-main">
                                 <div class="buteurs-modal-bg"></div>
                                 <div class="buteurs-modal-content">
                                    <button class="sidePanel-close" type="button" id="buteurs-close-btn">×</button>
                                    <div class="main-intro-block buteurs-modal-titleblock">
                                       <div class="main-intro-title" data-i18n="fullScorersList">Liste complète des buteurs</div>
                                       <div class="main-intro-desc" data-i18n="scorersHistory">
                                          Retrouvez l’historique des buteurs du match, en temps réel.<br>
                                          (Ce tableau s’actualise automatiquement à chaque action)
                                       </div>
                                    </div>
                                    <div class="buteurs-modal-equipes-row" style="display: flex; justify-content: center; align-items: center; gap: 1.2rem; margin-bottom: 0.5rem;">
                                       <span style="font-weight: 600; color: #4fc3f7; font-size: 1.08rem;" data-i18n="homeTeamCaps">ÉQUIPE DOMICILE</span>
                                       <span style="display:inline-block;width:1.5px;height:22px;background:#fff;opacity:.35;margin:0 1.1rem;border-radius:2px;"></span>
                                       <span style="font-weight: 600; color: #ef4444; font-size: 1.08rem;" data-i18n="awayTeamCaps">ÉQUIPE EXTÉRIEURE</span>
                                    </div>
                                    <iframe id="buteurs-modal-frame" class="iframe-light" src="" allowfullscreen></iframe>
                                 </div>
                              </div>
                              <input type="hidden" name="buteur_minute_home" id="buteur_minute_home" value="">
                              <input type="hidden" name="buteur_minute_away" id="buteur_minute_away" value="">
                              <input type="hidden" name="buteur_joueur_home" id="buteur_joueur_home" value="">
                              <input type="hidden" name="buteur_joueur_away" id="buteur_joueur_away" value="">
                              <input type="hidden" name="buteur_type_home" id="buteur_type_home" value="">
                              <input type="hidden" name="buteur_type_away" id="buteur_type_away" value="">
                           </form>
                        </div>
                     </div>
                  </div>
                  <script>
                     document.addEventListener('DOMContentLoaded', () => {
                       const formButeurs  = document.getElementById('buteurs-dnd');
                       const formScore    = document.getElementById('score');
                       const scoreHomeEl  = document.getElementById('score-home');
                       const scoreAwayEl  = document.getElementById('score-away');
                       const inputHome    = document.getElementById('score_home');
                       const inputAway    = document.getElementById('score_away');
                       const minSelect    = document.getElementById('minute-select');
                     
                       const pointsByType = {
                         'Essai 🏉':     5,
                         'Transfo 🎯':   2,
                         'Drop 🦶':      3,
                         'Pénalité 🎯':  3,
                         'Try 🏉':       5,
                         'Conversion 🎯':2,
                         'Drop goal 🦶': 3,
                         'Penalty 🎯':   3
                       };
                     
                       document.querySelectorAll('.status-btn.home-btn, .status-btn.away-btn').forEach(btn => {
                         btn.addEventListener('dragstart', e => {
                           const payload = { player: btn.dataset.player, team: btn.dataset.team };
                           e.dataTransfer.setData('text/plain', JSON.stringify(payload));
                         });
                       });
                     
                       document.querySelectorAll('.type-dropzone').forEach(zone => {
                         zone.addEventListener('dragover', e => {
                           e.preventDefault();
                           zone.classList.add('dragover');
                         });
                         zone.addEventListener('dragleave', () => {
                           zone.classList.remove('dragover');
                         });
                         zone.addEventListener('drop', async e => {
                           e.preventDefault();
                           zone.classList.remove('dragover');
                           let dragData;
                           try {
                             dragData = JSON.parse(e.dataTransfer.getData('text/plain'));
                           } catch {
                             alert(translations[lang]?.dragDataError || 'Erreur dans les données du drag');
                             return;
                           }
                           dragData.type = zone.dataset.type;
                     
                           const pts = pointsByType[dragData.type] || 0;
                           if (dragData.team === 'home') {
                             const newHome = (parseInt(inputHome.value,10)||0) + pts;
                             inputHome.value    = newHome;
                             scoreHomeEl.textContent = newHome;
                           } else {
                             const newAway = (parseInt(inputAway.value,10)||0) + pts;
                             inputAway.value    = newAway;
                             scoreAwayEl.textContent = newAway;
                           }
                     
                           try {
                             const resp = await fetch(formScore.action, {
                               method: 'POST',
                               credentials: 'same-origin',
                               body: new FormData(formScore)
                             });
                             if (!resp.ok) throw new Error('Échec update_score');
                     
                             const timerResp = await fetch('/timer_value', { credentials: 'same-origin' });
                             if (!timerResp.ok) throw new Error('Échec timer_value');
                             const data = await timerResp.json();
                             const minute = data.minute != null ? String(data.minute) : '';
                             if (minSelect) minSelect.value = minute;
                     
                             const minuteInput = document.getElementById(`buteur_minute_${dragData.team}`);
                             if (minuteInput) minuteInput.value = minute;
                             const joueurInput = document.getElementById(`buteur_joueur_${dragData.team}`);
                             if (joueurInput) joueurInput.value = dragData.player;
                             const typeInput   = document.getElementById(`buteur_type_${dragData.team}`);
                             if (typeInput) typeInput.value = dragData.type;
                     
                             const resp2 = await fetch(formButeurs.action, {
                               method: 'POST',
                               credentials: 'same-origin',
                               body: new FormData(formButeurs)
                             });
                             if (!resp2.ok) throw new Error('Échec update_buteurs');
                     
                             const modal = document.getElementById('buteurs-modal');
                             const iframe = document.getElementById('buteurs-modal-frame');
                             if (modal && iframe && modal.classList.contains('show')) {
                               iframe.src = '/buteurs.html?t=' + Date.now();
                             }
                     
                           } catch(err) {
                             console.error(err);
                             alert(translations[lang]?.updateScoreError || 'Erreur lors de la mise à jour du score ou du temps.');
                           }
                         });
                       });
                     
                       formButeurs.addEventListener('submit', e => {
                         e.preventDefault();
                         fetch(formButeurs.action, {
                           method: 'POST',
                           credentials: 'same-origin',
                           body: new FormData(formButeurs)
                         })
                         .then(resp => {
                           if (!resp.ok) throw new Error('Échec update_buteurs');
                     
                           const modal = document.getElementById('buteurs-modal');
                           const iframe = document.getElementById('buteurs-modal-frame');
                           if (modal && iframe && modal.classList.contains('show')) {
                             iframe.src = '/buteurs.html?t=' + Date.now();
                           }
                         })
                         .catch(err => {
                           console.error(err);
                           alert(translations[lang]?.updateScorersError || 'Erreur mise à jour des buteurs.');
                         });
                       });
                     });
                  </script>
                  <script>
                     document.addEventListener('DOMContentLoaded', function() {
                       const btn = document.getElementById('show-buteurs-iframe');
                       const modal = document.getElementById('buteurs-modal');
                       const iframe = document.getElementById('buteurs-modal-frame');
                       const closeBtn = document.getElementById('buteurs-close-btn');
                       const bg = modal.querySelector('.buteurs-modal-bg');
                       if(btn && modal && iframe && closeBtn && bg) {
                         btn.addEventListener('click', function() {
                           iframe.src = '/buteurs.html?t=' + Date.now();
                           modal.classList.add('show');
                         });
                         closeBtn.addEventListener('click', function() {
                           modal.classList.remove('show');
                           iframe.src = '';
                         });
                         bg.addEventListener('click', function() {
                           modal.classList.remove('show');
                           iframe.src = '';
                         });
                         window.addEventListener('keydown', function(e){
                           if(e.key === 'Escape') {
                             modal.classList.remove('show');
                             iframe.src = '';
                           }
                         });
                       }
                     });
                  </script>
                  <div class="tab-panel" data-tab="evenements">
                     <div class="info-block">
                        <div class="main-intro-desc" data-i18n="dragEvent">Glissez un joueur sur le type d’événement pour enregistrer.</div>
                        <div class="sub-block buteurs-subblock">
                           <form id="evenements-dnd" action="/update_evenements?anchor=evenements" method="POST" autocomplete="off">
                              <div class="buteurs-columns-row">
                                 <div class="teams-column buteurs-home">
                                    <h3 class="buteurs-title buteurs-title-home" data-i18n="homeTeam">Équipe domicile</h3>
                                    <div class="buteurs-players-list">
                                       {% for joueur in select_players_home %}
                                       {% if joueur %}
                                       <button type="button" class="status-btn home-btn" draggable="true"
                                          data-player="{{ joueur }}" data-team="home"
                                          style="width:120px; min-width:120px; max-width:120px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                                       {{ joueur }}
                                       </button>
                                       {% endif %}
                                       {% endfor %}
                                    </div>
                                 </div>
                                 <div class="types-column buteurs-types">
                                    {% for type, label in [
                                    ('Carton (🟨)', 'Carton jaune'),
                                    ('Carton (🟥)', 'Carton rouge'),
                                    ('Blessure (🚑)', 'Blessure')
                                    ] %}
                                    <div class="type-dropzone" data-type="{{ type }}" data-i18n="{{ label|lower|replace(' ', '_') }}">
                                       {{ label }}
                                    </div>
                                    {% endfor %}
                                    <div id="minute-container" style="display:none; margin-top:1rem;">
                                       <select id="minute-select" class="minute-select">
                                          <option value="">Minute</option>
                                          {% for m in range(1,81) %}
                                          <option value="{{m}}">{{m}}</option>
                                          {% endfor %}
                                          {% for m in range(1,11) %}
                                          <option value="80+{{m}}">80+{{m}}</option>
                                          {% endfor %}
                                       </select>
                                    </div>
                                 </div>
                                 <div class="teams-column buteurs-away">
                                    <h3 class="buteurs-title buteurs-title-away" data-i18n="awayTeam">Équipe extérieure</h3>
                                    <div class="buteurs-players-list">
                                       {% for joueur in select_players_away %}
                                       {% if joueur %}
                                       <button type="button" class="status-btn away-btn" draggable="true"
                                          data-player="{{ joueur }}" data-team="away"
                                          style="width:120px; min-width:120px; max-width:120px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                                       {{ joueur }}
                                       </button>
                                       {% endif %}
                                       {% endfor %}
                                    </div>
                                 </div>
                              </div>
                              <input type="hidden" name="event_minute_home" id="event_minute_home" value="">
                              <input type="hidden" name="event_player_home" id="event_player_home" value="">
                              <input type="hidden" name="event_action_home" id="event_action_home" value="">
                              <input type="hidden" name="event_minute_away" id="event_minute_away" value="">
                              <input type="hidden" name="event_player_away" id="event_player_away" value="">
                              <input type="hidden" name="event_action_away" id="event_action_away" value="">
                           </form>
                           <div class="buteurs-iframe-btnrow" style="display:flex; justify-content: flex-end;">
                              <button type="button" id="show-evenements-iframe" class="btn-score-add" data-i18n="viewEventsList">
                              Voir la liste des événements
                              </button>
                           </div>
                           <div id="evenements-modal" class="buteurs-modal-main">
                              <div class="buteurs-modal-bg"></div>
                              <div class="buteurs-modal-content">
                                 <button class="sidePanel-close" type="button" id="evenements-close-btn">×</button>
                                 <div class="main-intro-block buteurs-modal-titleblock">
                                    <div class="main-intro-title" data-i18n="fullEventsList">Liste complète des faits marquants</div>
                                    <div class="main-intro-desc" data-i18n="eventsHistory">
                                       Retrouvez l’historique des événements du match, en temps réel.<br>
                                       (Ce tableau s’actualise automatiquement à chaque action)
                                    </div>
                                 </div>
                                 <div class="buteurs-modal-equipes-row" style="display: flex; justify-content: center; align-items: center; gap: 1.2rem; margin-bottom: 0.5rem;">
                                    <span style="font-weight: 600; color: #4fc3f7; font-size: 1.08rem;" data-i18n="homeTeamCaps">ÉQUIPE DOMICILE</span>
                                    <span style="display:inline-block;width:1.5px;height:22px;background:#fff;opacity:.35;margin:0 1.1rem;border-radius:2px;"></span>
                                    <span style="font-weight: 600; color: #ef4444; font-size: 1.08rem;" data-i18n="awayTeamCaps">ÉQUIPE EXTÉRIEURE</span>
                                 </div>
                                 <iframe id="evenements-frame" class="iframe-light" src="" allowfullscreen></iframe>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <script>
                  document.addEventListener('DOMContentLoaded', () => {
                    const form = document.getElementById('evenements-dnd');
                    const minSel = document.getElementById('minute-select');
                    const dropzones = document.querySelectorAll('#evenements-dnd .type-dropzone');
                    const buttons = document.querySelectorAll('#evenements-dnd .status-btn');
                  
                    if (!form || !minSel || buttons.length === 0 || dropzones.length === 0) {
                      console.error(translations[lang]?.missingElements || 'Éléments manquants pour le drag&drop événements.');
                      return;
                    }
                  
                    buttons.forEach(btn => {
                      btn.setAttribute('draggable', 'true');
                      btn.addEventListener('dragstart', e => {
                        const dragInfo = { player: btn.dataset.player, team: btn.dataset.team };
                        e.dataTransfer.setData('text/plain', JSON.stringify(dragInfo));
                        e.dataTransfer.effectAllowed = 'copy';
                      });
                    });
                  
                    dropzones.forEach(zone => {
                      zone.addEventListener('dragover', e => {
                        e.preventDefault();
                        e.dataTransfer.dropEffect = 'copy';
                        zone.classList.add('dragover');
                      });
                      zone.addEventListener('dragleave', () => {
                        zone.classList.remove('dragover');
                      });
                      zone.addEventListener('drop', e => {
                        e.preventDefault();
                        zone.classList.remove('dragover');
                        let dragInfo;
                        try {
                          dragInfo = JSON.parse(e.dataTransfer.getData('text/plain'));
                        } catch {
                          return alert(translations[lang]?.dragDataError || 'Erreur dans les données du drag');
                        }
                        dragInfo.type = zone.dataset.type;
                  
                        fetch('/timer_value', { credentials: 'same-origin' })
                          .then(r => {
                            if (!r.ok) throw new Error('Échec timer_value');
                            return r.json();
                          })
                          .then(data => {
                            const m = data.minute != null ? String(data.minute) : '';
                            minSel.value = m;
                            const t = dragInfo.team;
                            document.getElementById(`event_minute_${t}`).value = m;
                            document.getElementById(`event_player_${t}`).value = dragInfo.player;
                            document.getElementById(`event_action_${t}`).value = dragInfo.type;
                  
                            fetch(form.action, {
                              method: form.method,
                              credentials: 'same-origin',
                              body: new FormData(form)
                            })
                              .then(resp => {
                                if (!resp.ok) throw new Error('Échec update_evenements');
                                const iframe = document.getElementById('evenements-frame');
                                if (iframe) {
                                  iframe.src = '/evenements.html?t=' + Date.now();
                                }
                              })
                              .catch(err => {
                                console.error(err);
                                alert(translations[lang]?.updateEventsError || 'Erreur lors de la mise à jour des événements.');
                              });
                          })
                          .catch(() => {
                            alert(translations[lang]?.getMinuteError || 'Impossible de récupérer la minute.');
                          });
                      });
                    });
                  
                    form.addEventListener('submit', e => {
                      e.preventDefault();
                      fetch(form.action, {
                        method: form.method,
                        credentials: 'same-origin',
                        body: new FormData(form)
                      })
                        .then(resp => {
                          if (!resp.ok) throw new Error('Échec update_evenements');
                          const iframe = document.getElementById('evenements-frame');
                          if (iframe) {
                            iframe.src = '/evenements.html?t=' + Date.now();
                          }
                        })
                        .catch(err => {
                          console.error(err);
                          alert(translations[lang]?.updateEventsError || 'Erreur mise à jour des événements.');
                        });
                    });
                  
                    const btn = document.getElementById('show-evenements-iframe');
                    const modal = document.getElementById('evenements-modal');
                    const iframe = document.getElementById('evenements-frame');
                    const closeBtn = document.getElementById('evenements-close-btn');
                    const bg = modal ? modal.querySelector('.buteurs-modal-bg') : null;
                    if (btn && modal && iframe && closeBtn && bg) {
                      btn.addEventListener('click', function () {
                        iframe.src = '/evenements.html?t=' + Date.now();
                        modal.classList.add('show');
                      });
                      closeBtn.addEventListener('click', function () {
                        modal.classList.remove('show');
                        iframe.src = '';
                      });
                      bg.addEventListener('click', function () {
                        modal.classList.remove('show');
                        iframe.src = '';
                      });
                      window.addEventListener('keydown', function (e) {
                        if (e.key === 'Escape') {
                          modal.classList.remove('show');
                          iframe.src = '';
                        }
                      });
                    }
                  });
                                 
               </script>
               <div class="tab-panel" data-tab="remplacants">
                  <div class="info-block">
                     <div class="main-intro-desc" data-i18n="mainIntroDesc">Glissez un titulaire sur un remplaçant pour enregistrer le remplacement.</div>
                     <div class="sub-block buteurs-subblock">
                        <form id="remplacants" action="/update_remplacants?anchor=remplacants" method="POST" autocomplete="off">
                           <div class="buteurs-columns-row">
                              <div class="teams-column buteurs-home">
                                 <h3 class="buteurs-title buteurs-title-home" data-i18n="buteursTitleHome">Équipe domicile</h3>
                                 <div class="buteurs-players-list" id="home-tit">
                                    {% for j in compo_home.joueurs %}
                                    {% if j %}
                                    <button type="button" class="status-btn home-btn" draggable="true"
                                       data-team="home" data-player="{{ j }}"
                                       style="width:120px; min-width:120px; max-width:120px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                                    {{ j }}
                                    </button>
                                    {% endif %}
                                    {% endfor %}
                                 </div>
                              </div>
                              <div class="types-column buteurs-types">
                                 <div class="remp-label" data-i18n="rempLabel" style="font-size:0.92rem; text-align: center; margin-bottom:0.6rem;">Remplaçants</div>
                                 <div class="remp-blocks" style="display: flex; gap: 1.2rem; align-items: flex-start; justify-content: center;">
                                    <div style="min-width:140px; flex:1;">
                                       <div class="buteurs-players-list remp-list-gauche" id="home-remp-zone" style="display:flex; flex-direction:column; align-items:flex-start; gap:0.3rem;">
                                          {% for j in compo_home.remplacants %}
                                          {% if j %}
                                          <div class="status-btn home-btn repl-btn"
                                             data-team="home" data-player="{{ j }}" tabindex="0"
                                             style="width:120px; min-width:120px; max-width:120px; text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                                             {{ j }}
                                          </div>
                                          {% endif %}
                                          {% endfor %}
                                       </div>
                                    </div>
                                    <div style="width:1px; min-height:60px; background:#fff; opacity:.20; border-radius:2px; margin:0 0.3rem;"></div>
                                    <div style="min-width:140px; flex:1;">
                                       <div class="buteurs-players-list remp-list-droite" id="away-remp-zone" style="display:flex; flex-direction:column; align-items:flex-end; gap:0.3rem;">
                                          {% for j in compo_away.remplacants %}
                                          {% if j %}
                                          <div class="status-btn away-btn repl-btn"
                                             data-team="away" data-player="{{ j }}" tabindex="0"
                                             style="width:120px; min-width:120px; max-width:120px; text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                                             {{ j }}
                                          </div>
                                          {% endif %}
                                          {% endfor %}
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              <div class="teams-column buteurs-away">
                                 <h3 class="buteurs-title buteurs-title-away" data-i18n="buteursTitleAway">Équipe extérieure</h3>
                                 <div class="buteurs-players-list" id="away-tit">
                                    {% for j in compo_away.joueurs %}
                                    {% if j %}
                                    <button type="button" class="status-btn away-btn" draggable="true"
                                       data-team="away" data-player="{{ j }}"
                                       style="width:120px; min-width:120px; max-width:120px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                                    {{ j }}
                                    </button>
                                    {% endif %}
                                    {% endfor %}
                                 </div>
                              </div>
                           </div>
                           <input type="hidden" name="remp_min_home" id="remp_min_home">
                           <input type="hidden" name="remp_out_home" id="remp_out_home">
                           <input type="hidden" name="remp_in_home"  id="remp_in_home">
                           <input type="hidden" name="remp_min_away" id="remp_min_away">
                           <input type="hidden" name="remp_out_away" id="remp_out_away">
                           <input type="hidden" name="remp_in_away"  id="remp_in_away">
                        </form>
                        <div class="buteurs-iframe-btnrow" style="display:flex; justify-content: flex-end;">
                           <button type="button" id="show-remplacants-iframe" class="btn-score-add" data-i18n="showRemplacantsBtn">
                           Voir la liste des remplacements
                           </button>
                        </div>
                        <div id="remplacants-modal" class="buteurs-modal-main">
                           <div class="buteurs-modal-bg"></div>
                           <div class="buteurs-modal-content">
                              <button class="sidePanel-close" type="button" id="remplacants-close-btn">×</button>
                              <div class="main-intro-block buteurs-modal-titleblock">
                                 <div class="main-intro-title" data-i18n="mainIntroTitle">Liste complète des remplacements</div>
                                 <div class="main-intro-desc" data-i18n="rempHistoryDesc">
                                    Retrouvez l’historique des remplacements du match, en temps réel.<br>
                                    (Ce tableau s’actualise automatiquement à chaque action)
                                 </div>
                              </div>
                              <div class="buteurs-modal-equipes-row" style="display: flex; justify-content: center; align-items: center; gap: 1.2rem; margin-bottom: 0.5rem;">
                                 <span style="font-weight: 600; color: #4fc3f7; font-size: 1.08rem;" data-i18n="rempHomeTeam">ÉQUIPE DOMICILE</span>
                                 <span style="display:inline-block;width:1.5px;height:22px;background:#fff;opacity:.35;margin:0 1.1rem;border-radius:2px;"></span>
                                 <span style="font-weight: 600; color: #ef4444; font-size: 1.08rem;" data-i18n="rempAwayTeam">ÉQUIPE EXTÉRIEURE</span>
                              </div>
                              <iframe id="remplacants-frame-modal" class="iframe-light" src="" allowfullscreen></iframe>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('remplacants');
  const homeTitZone = document.getElementById('home-tit');
  const awayTitZone = document.getElementById('away-tit');
  const homeRempZone = document.getElementById('home-remp-zone');
  const awayRempZone = document.getElementById('away-remp-zone');


  function makeTitulaireBtn(team, player) {
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = `status-btn ${team}-btn`;
    btn.setAttribute('draggable', 'true');
    btn.dataset.team = team;
    btn.dataset.player = player;
    btn.style.width = btn.style.minWidth = btn.style.maxWidth = "120px";
    btn.style.whiteSpace = "nowrap";
    btn.style.overflow = "hidden";
    btn.style.textOverflow = "ellipsis";
    btn.textContent = player;
    btn.addEventListener('dragstart', onDragStart);
    return btn;
  }

  function makeRempBtn(team, player) {
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = `status-btn ${team}-btn repl-btn`;
    btn.setAttribute('draggable', 'false');
    btn.dataset.team = team;
    btn.dataset.player = player;
    btn.tabIndex = 0;
    btn.style.width = btn.style.minWidth = btn.style.maxWidth = "120px";
    btn.style.textAlign = "center";
    btn.style.whiteSpace = "nowrap";
    btn.style.overflow = "hidden";
    btn.style.textOverflow = "ellipsis";
    btn.textContent = player;
    return btn;
  }

  function onDragStart(e) {
    const btn = e.target.closest('button[data-player]');
    if (!btn) return;
    const payload = { team: btn.dataset.team, player: btn.dataset.player };
    e.dataTransfer.setData('text/plain', JSON.stringify(payload));
    e.dataTransfer.effectAllowed = 'move';
  }


  function refreshTitDrag() {
    document.querySelectorAll('#home-tit button, #away-tit button').forEach(btn => {
      btn.setAttribute('draggable', 'true');
      btn.removeEventListener('dragstart', onDragStart);
      btn.addEventListener('dragstart', onDragStart);
    });
  }


  function onDropRempZone(e, team) {
    e.preventDefault();
    let payload;
    try {
      payload = JSON.parse(e.dataTransfer.getData('text/plain'));
    } catch {
      alert('Erreur dans les données du drag');
      return;
    }
    if (payload.team !== team) {
      alert('Glissez un titulaire de la bonne équipe.');
      return;
    }

    const titZone = document.getElementById(`${team}-tit`);
    const rempZone = document.getElementById(`${team}-remp-zone`);
    const titBtn = titZone.querySelector('button[data-player="' + payload.player + '"]');
    if (!titBtn) return;
    // On cible le remplaçant le plus proche de la souris (sinon on prend le premier)
    let rempBtn = null;
    if (e.target.classList.contains('repl-btn')) rempBtn = e.target;
    else rempBtn = rempZone.querySelector('.repl-btn');
    if (!rempBtn) return;


    const joueurIn  = rempBtn.dataset.player;
    const joueurOut = payload.player;


    titZone.removeChild(titBtn);
    rempZone.removeChild(rempBtn);


    const nouveauRemp = makeRempBtn(team, joueurOut); // devient remplaçant
    const nouveauTit  = makeTitulaireBtn(team, joueurIn); // devient titulaire


    rempZone.appendChild(nouveauRemp);
    titZone.appendChild(nouveauTit);


    refreshTitDrag();


    fetch('/timer_value', { credentials: 'same-origin' })
      .then(r => r.json())
      .then(data => {
        const minute = data.minute != null ? String(data.minute) : '';
        document.getElementById(`remp_min_${team}`).value = minute;
        document.getElementById(`remp_out_${team}`).value = joueurOut;
        document.getElementById(`remp_in_${team}`).value  = joueurIn;
        fetch(form.action, {
          method: form.method,
          credentials: 'same-origin',
          body: new FormData(form)
        })
        .then(resp => {
          if (!resp.ok) throw new Error();
          const iframe = document.getElementById('remplacants-frame');
          if (iframe) iframe.src = '/remplacants.html?t=' + Date.now();
          const iframeModal = document.getElementById('remplacants-frame-modal');
          const modal = document.getElementById('remplacants-modal');
          if (modal && iframeModal && modal.classList.contains('show')) {
            iframeModal.src = '/remplacants.html?t=' + Date.now();
          }
        })
        .catch(() => {
          alert('Erreur lors de la mise à jour des remplaçants.');
        });
      })
      .catch(() => {
        alert('Impossible de récupérer la minute.');
      });
  }


  homeRempZone.addEventListener('dragover', function(e) {
    // Autorise le drop uniquement sur un bouton remplaçant
    if (e.target.classList.contains('repl-btn')) e.preventDefault();
  });
  homeRempZone.addEventListener('drop', function(e) {
    onDropRempZone(e, 'home');
  });
  awayRempZone.addEventListener('dragover', function(e) {
    if (e.target.classList.contains('repl-btn')) e.preventDefault();
  });
  awayRempZone.addEventListener('drop', function(e) {
    onDropRempZone(e, 'away');
  });


  refreshTitDrag();


  form.addEventListener('submit', function(e) {
    e.preventDefault();
    fetch(form.action, {
      method: form.method,
      credentials: 'same-origin',
      body: new FormData(form)
    })
    .then(resp => {
      if (!resp.ok) throw new Error();
      const iframe = document.getElementById('remplacants-frame');
      if (iframe) iframe.src = '/remplacants.html?t=' + Date.now();
      const iframeModal = document.getElementById('remplacants-frame-modal');
      const modal = document.getElementById('remplacants-modal');
      if (modal && iframeModal && modal.classList.contains('show')) {
        iframeModal.src = '/remplacants.html?t=' + Date.now();
      }
    })
    .catch(() => {
      alert('Erreur mise à jour des remplaçants.');
    });
  });


  const btn = document.getElementById('show-remplacants-iframe');
  const modal = document.getElementById('remplacants-modal');
  const iframeModal = document.getElementById('remplacants-frame-modal');
  const closeBtn = document.getElementById('remplacants-close-btn');
  const bg = modal ? modal.querySelector('.buteurs-modal-bg') : null;
  if(btn && modal && iframeModal && closeBtn && bg) {
    btn.addEventListener('click', function() {
      iframeModal.src = '/remplacants.html?t=' + Date.now();
      modal.classList.add('show');
    });
    closeBtn.addEventListener('click', function() {
      modal.classList.remove('show');
      iframeModal.src = '';
    });
    bg.addEventListener('click', function() {
      modal.classList.remove('show');
      iframeModal.src = '';
    });
    window.addEventListener('keydown', function(e){
      if(e.key === 'Escape') {
        modal.classList.remove('show');
        iframeModal.src = '';
      }
    });
  }
});
</script>

            <script>
               document.addEventListener('DOMContentLoaded', function() {
                 document.querySelectorAll('.tabbed-card .tab-btn').forEach(btn => {
                   btn.addEventListener('click', function() {
                     const tab = this.getAttribute('data-tab');
               
                     this.parentNode.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                     this.classList.add('active');
               
                     const panels = this.closest('.tabbed-card').querySelectorAll('.tab-panel');
                     panels.forEach(p => p.classList.remove('active'));
                     const target = this.closest('.tabbed-card').querySelector('.tab-panel[data-tab="' + tab + '"]');
                     if (target) target.classList.add('active');
                   });
                 });
               });
            </script>
            <button id="toggle-comments-zone" type="button" style="margin-bottom: 1rem;" data-i18n="toggleComments">
            Afficher le flux de commentaires
            </button>
            <div id="comments-zone" class="tabbed-card commentaires-tab">
               <div class="main-intro-title" style="text-align:center;margin-top:1.4rem;" data-i18n="commentsTitle">
                  Flux de commentaires
               </div>
               <div class="main-intro-desc" style="text-align:center;margin-top:1.1rem;margin-bottom:1.4rem;" data-i18n="commentsDesc">
                  Choisissez un commentaire prédéfini et glissez-le dans la zone centrale pour l’envoyer automatiquement. Vous pouvez aussi saisir un texte manuel.
               </div>
               <div class="tabs-header" style="display:flex;flex-wrap:nowrap;justify-content:center;align-items:center;gap:0.2rem;width:calc(100% + 4rem);position:relative;z-index:2;overflow-x:auto;white-space:nowrap;margin-left:-2rem;margin-right:-2rem;border-bottom:1.5px solid rgba(255,255,255,0.09);">
                  <button class="tab-btn active comment-tab-btn" data-section="Accueil et mise en ambiance" type="button" style="font-size:0.94rem;" data-i18n="tabAccueil">Accueil</button>
                  <button class="tab-btn comment-tab-btn" data-section="Conditions météo" type="button" style="font-size:0.94rem;" data-i18n="tabMeteo">Météo</button>
                  <button class="tab-btn comment-tab-btn" data-section="Première mi-temps" type="button" style="font-size:0.94rem;" data-i18n="tabFirstHalf">1ère mi-temps</button>
                  <button class="tab-btn comment-tab-btn" data-section="Mi-temps Discussion" type="button" style="font-size:0.94rem;" data-i18n="tabHalftime">Mi-temps</button>
                  <button class="tab-btn comment-tab-btn" data-section="Deuxième mi-temps" type="button" style="font-size:0.94rem;" data-i18n="tabSecondHalf">2ème mi-temps</button>
                  <button class="tab-btn comment-tab-btn" data-section="Fin du match" type="button" style="font-size:0.94rem;" data-i18n="tabEnd">Fin du match</button>
                  <button class="tab-btn comment-tab-btn" data-section="Arbitre" type="button" style="font-size:0.94rem;" data-i18n="tabReferee">Arbitrage</button>
                  <button class="tab-btn comment-tab-btn" data-section="Action vous" type="button" style="font-size:0.94rem;" data-i18n="tabYourTeam">Votre équipe</button>
                  <button class="tab-btn comment-tab-btn" data-section="Action adverse" type="button" style="font-size:0.94rem;" data-i18n="tabOpponent">Adversaire</button>
                  <button class="tab-btn comment-tab-btn" data-section="Expression" type="button" style="font-size:0.94rem;" data-i18n="tabExpressions">Expressions</button>
               </div>
               <form id="commentaires" action="/update_commentaires?anchor=commentaires" method="POST" target="comments-frame">
                  <input type="hidden" id="comment_minute" name="comment_minute" value="0"/>
                  <input type="hidden" name="submit_comment" value="1"/>
                  <input type="hidden" id="comment_section" name="comment_section" value="Accueil et mise en ambiance"/>
                  <div class="buteurs-columns-row commentaires-columns-row" style="margin-top:1.4rem;">
                     <div class="buteurs-home commentaires-list">
                        <div class="buteurs-title" data-i18n="predefinedCommentsTitle">Commentaires prédéfinis</div>
                        <div id="section-comments" class="buteurs-players-list commentaires-list-inner"></div>
                     </div>
                     <div class="buteurs-types commentaires-dropzone">
                        <div class="buteurs-title commentaires-dropzone-title">&nbsp;</div>
                        <div id="drop-zone" class="type-dropzone" data-i18n="dropHere">
                           Déposez ici
                        </div>
                        <input id="comment_custom" name="comment_custom" placeholder="Texte personnalisé…" type="text"
                           class="form-control" data-i18n-placeholder="customTextPlaceholder"/>
                     </div>
                     <div class="buteurs-away commentaires-preview">
                        <div class="buteurs-title buteurs-title-away" data-i18n="livePreviewTitle">Aperçu direct</div>
                        <div class="commentaires-iframe-wrapper">
                           <iframe id="comments-frame" name="comments-frame" class="iframe-light commentaires-iframe" src="/livecomments.html?t={{ timestamp }}" scrolling="yes"></iframe>
                        </div>
                     </div>
                  </div>
               </form>
               <div id="comment-preview" class="commentaires-preview-guide" data-i18n="hoverToPreview">
                  Passez la souris sur un commentaire pour le prévisualiser.
               </div>
            </div>
      </div>
      <script>
         (function() {
         
             const COMMENTS_ZONE_ID   = 'comments-zone';
             const TOGGLE_BTN_ID      = 'toggle-comments-zone';
             const COMMENTS_KEY       = 'commentsZoneOpen';
         
             function onReady(fn) {
                 if (document.readyState !== 'loading') fn();
                 else document.addEventListener('DOMContentLoaded', fn);
             }
         
             onReady(function() {
                 var commentsZone = document.getElementById(COMMENTS_ZONE_ID);
                 var toggleBtn    = document.getElementById(TOGGLE_BTN_ID);
                 if (!commentsZone || !toggleBtn) return;
         
                 function setCommentsVisibility(open) {
                     commentsZone.style.display = open ? '' : 'none';
                     toggleBtn.textContent = open
                       ? (translations[lang]?.hideComments || "Masquer le flux de commentaires")
                       : (translations[lang]?.showComments || "Afficher le flux de commentaires");
                     localStorage.setItem(COMMENTS_KEY, open ? '1' : '0');
                 }
         
                 var isOpen = localStorage.getItem(COMMENTS_KEY) === '1';
                 setCommentsVisibility(isOpen);
         
                 toggleBtn.addEventListener('click', function() {
                     setCommentsVisibility(commentsZone.style.display === 'none');
                 });
             });
         })();
      </script>
      <script>
         document.addEventListener('DOMContentLoaded', function() {
           var iframe = document.getElementById('comments-frame');
           iframe.onload = function() {
             try {
               var doc = iframe.contentDocument || iframe.contentWindow.document;
               var style = doc.createElement('style');
               style.innerHTML = `
                 body, html, * {
                   color: #fff !important;
                   font-weight: 400 !important;
                 }
               `;
               doc.head.appendChild(style);
             } catch (e) {
         
             }
           };
         });
      </script>
      <script>
         const commentsData = {
         'Accueil et mise en ambiance': [
         "arenaWelcome",
         "fieldReady",
         "ovalWarriors",
         "ballTeams80mn",
         "todayCourage",
         "vibrateWithUs",
         "kickoffShow",
         "titansPrepare",
         "everyPassCounts",
         "fullStadium",
         "energyPowerHeart",
         "scrumForms",
         "neverGiveUp",
         "spectacularTriesAhead",
         "whistleAboutToBlow",
         "journeyToSolidarity"
           ],
         'Conditions météo': [
         "blueSky",
         "perfectPitch",
         "dryField",
         "fineRainAdapt",
         "slipperyBall",
         "mudIsOut",
         "windArrives",
         "trickyWind",
         "coldBites",
         "winterWeather",
         "rainWindMud",
         "toughConditions",
         "cloudsGather",
         "morningDrizzle",
         "thermoDrops",
         "dewOnPitch",
         "hotSunEndurance",
         "wetPitchTrajectories",
         "gustsSweep",
         "distantThunder",
         "heatRises",
         "freshBreeze"
           ],
           'Première mi-temps': [
         "kickoffStart",
         "firstBallRuck",
         "teamsSizingUp",
         "firstBreak",
         "highTempo",
         "fierceBattle",
         "forwardsLongPlay",
         "handlingErrorScrum",
         "simulatedScrum",
         "wellPlayedLineout",
         "lineoutAttack",
         "firstBigMoment",
         "wingBreak",
         "paceChange",
         "lightningCounter",
         "clearingKick",
         "impeccableDefense",
         "highForwardsPress",
         "constantPressure",
         "defensiveCover",
         "passImprecision",
         "virtualTimeout",
         "tightScore",
         "packOrganizes",
         "breakThroughMiddle",
         "oppoDefenseStrong",
         "flyhalfFix",
         "newLineout",
         "tryInMinds",
         "yellowCardComing",
         "tacticalKick",
         "hookerRelance",
         "crowdElectric",
         "halftimeWhistle"
           ],
           'Mi-temps Discussion': [
         "engagedFirstHalf",
         "highIntensityFewChances",
         "tightScoreNothingDone",
         "halftimeAdvantageButWork",
         "oppoDifferenceBeforeBreak",
         "rainComplicatesPasses",
         "crowdHereAtmosphere",
         "coachesAdjustSecondHalf",
         "matchWideOpen",
         "expectFastRestart",
         "halftimeEpicBattle",
         "noTriesForwardBattle",
         "noInchGivenTension",
         "halftimeGoallessUncertainty",
         "firstHalfDefensive",
         "crowdBuzzedElectric",
         "fewPenaltiesFluentRef",
         "defensiveLocksStrong",
         "coachesObserveAdjust",
         "breakdownBattlesFatigue",
         "kickingDrawsField",
         "trylessFirstHalfPromise",
         "scrumSceneCombative",
         "backsOnAlert",
         "seeYouSecondHalf"
         
           ],
           'Deuxième mi-temps': [
         "secondHalfKickoff",
         "ourTeamBetterIntent",
         "oppoWantsGap",
         "quickLineout",
         "scrumKnockOn",
         "ballStolen",
         "carrierPressure",
         "breakAttempt",
         "wingBreakDefOpens",
         "defensesHold",
         "defenseBarricaded",
         "pressureResumes",
         "subFreshImpact",
         "quickPenalty",
         "edgeKickTime",
         "stratLineout",
         "hitsGetHarder",
         "firstCramps",
         "everyBallLikeFinal",
         "moneyTime",
         "lastChance",
         "lastTackle",
         "subsBringEnergy",
         "backlineCombo",
         "strongScrumPush",
         "scrumhalfPlaysQuick",
         "yellowForHighTackle",
         "shortHandedDefense",
         "counterattackIgnites",
         "penaltyForTouch",
         "pinballArea",
         "clockTicks"
           ],
           'Fin du match': [
         "finalWhistleEnd",
         "logicalVictory",
         "oppoDeservedWin",
         "tightMatchCongrats",
         "defeatDespiteEffort",
         "frustratingMatch",
         "teamNeverGaveUp",
         "totalCommitment",
         "finalWhistleMeetingEnds",
         "undisputedVictory",
         "bitterDefeat",
         "narrowVictory",
         "breathlessEnd",
         "teamConfidence",
         "oppoWinsEfficiently",
         "backToLockerRoomPositive",
         "scoreReflectsCommitment",
         "thanksSupporters",
         "spiritNeverFailed",
         "crowdVibrated",
         "nextMeetingFix",
         "refEndsDebate",
         "ruggedShowEnd",
         "seeNextMatch",
         "thanksForFollowing"
           ],
           'Arbitre': [
         "refPenaltyForUs",
         "penaltyAgainstOpp",
         "simplePenaltyNoCard",
         "yellowRepeated",
         "yellowAntiPlayOpp",
         "straightRedUs",
         "redOppDangerous",
         "ourPlayerInjured",
         "oppPlayerInjured",
         "refVideoTry",
         "refVideoDispute",
         "videoTryAwarded",
         "videoTryRefused",
         "scrumKnockOnSlippery",
         "refDiscussionCaptains",
         "timeOff",
         "timeBackOn"
           ],
           'Action vous': [
         "tryCollective",
         "tryIndividual",
         "tryInterception",
         "conversionSuccess",
         "conversionMissed",
         "penaltySuccess",
         "penaltyMissed",
         "dropGoalSuccess",
         "dropGoalMissed"
           ],
           'Action adverse': [
         "tryAfterPhases",
         "tryInterceptionOpp",
         "conversionSuccessOpp",
         "conversionMissedOpp",
         "penaltySuccessOpp",
         "penaltyMissedOpp",
         "dropGoalSuccessOpp",
         "dropGoalMissedOpp"
           ],
           'Expression': [
         "fliesChangedDonkey",
         "slapBoxOpen",
         "endOfFairCowpats",
         "shedFellDog",
         "pigInCorn",
         "niceMaul",
         "bigHit",
         "helmetShotChest",
         "fellLikePancake",
         "tackleShookStands",
         "foldedLikeNapkin",
         "slapBoxAgain",
         "tractorPassed",
         "fierceRucks",
         "shedFellDogRepeat",
         "sweptByTackle",
         "stuckLikePostit",
         "oldSchoolHits",
         "pigInCornRepeat",
         "cementMixerDefense",
         "maulLikeSteamroller",
         "shedFellDogRan"
           ]
         };
         
         const colorsBySection = {
         'Accueil et mise en ambiance': '#14b8a6',
         'Conditions météo'           : '#3b82f6',
         'Première mi-temps'          : '#8b5cf6',
         'Mi-temps Discussion'        : '#f97316',
         'Deuxième mi-temps'          : '#ef4444',
         'Fin du match'               : '#6b7280',
         'Arbitre'                    : '#3fa796',
         'Action vous'                : '#10b981',
         'Action adverse'             : '#ef4444',
         'Expression'                 : '#f472b6'
         };
         
         document.addEventListener('DOMContentLoaded', function() {
         const form         = document.getElementById('commentaires');
         const minuteField  = document.getElementById('comment_minute');
         const sectionField = document.getElementById('comment_section');
         const container    = document.getElementById('section-comments');
         const dropZone     = document.getElementById('drop-zone');
         const customInput  = document.getElementById('comment_custom');
         const iframe       = document.getElementById('comments-frame');
         const timerDisplay = document.getElementById('timer-display');
         const preview      = document.getElementById('comment-preview');
         
         let currentSection = sectionField.value || 'Accueil et mise en ambiance';
         
         function getCurrentMinute() {
          if (!timerDisplay) return '0';
          const parts = timerDisplay.textContent.trim().split(':');
          let m = parseInt(parts[0], 10);
          if (isNaN(m) || m < 0) m = 0;
          return (m <= 80) ? String(m) : '80+' + String(m - 80);
         }
         
         function loadComments(section) {
         container.innerHTML = '';
         (commentsData[section] || []).forEach(key => {
         const text = translations[lang]?.[key] || key;
         const btn = document.createElement('button');
         btn.type = 'button';
         btn.className = 'comment-btn';
         btn.draggable = true;
         btn.setAttribute('data-fulltext', text);
         btn.setAttribute('data-key', key);
         
         const span = document.createElement('span');
         span.className = 'comment-btn-ellipsis';
         span.textContent = text;
         btn.appendChild(span);
         
         btn.style.background = colorsBySection[section] || 'var(--accent)';
         btn.style.border     = '2px solid #191d23';
         
         btn.addEventListener('dragstart', function(e) {
         const payload = { key: key, section: section };
         e.dataTransfer.setData('text/plain', JSON.stringify(payload));
         e.dataTransfer.effectAllowed = 'move';
         });
         
         btn.addEventListener('mouseenter', () => preview.textContent = text);
         btn.addEventListener('mouseleave', () =>
         preview.textContent = translations[lang]?.hoverPreview || "Passez la souris sur un commentaire pour le prévisualiser."
         );
         btn.addEventListener('click', () => {
         customInput.value   = text;
         preview.textContent = text;
         });
         
         container.appendChild(btn);
         });
         }
         
         document.querySelectorAll('.comment-tab-btn').forEach(btn => {
         btn.addEventListener('click', () => {
         document.querySelectorAll('.comment-tab-btn').forEach(b => b.classList.remove('active'));
         btn.classList.add('active');
         currentSection = btn.dataset.section;
         sectionField.value = currentSection;
         loadComments(currentSection);
         });
         });
         const firstActive = document.querySelector('.comment-tab-btn.active')
                      || document.querySelector('.comment-tab-btn');
         if (firstActive) firstActive.click();
         
         function submitComment(text) {
         minuteField.value  = getCurrentMinute();
         sectionField.value = currentSection;
         customInput.value  = text;
         const data = new FormData(form);
         fetch(form.action, {
         method:      'POST',
         body:        data,
         credentials: 'same-origin'
         }).then(function() {
         if (iframe) iframe.src = `/livecomments.html?t=${Date.now()}`;
         customInput.value = '';
         });
         }
         
         ['dragenter', 'dragover'].forEach(evt => {
         dropZone.addEventListener(evt, function(e) {
         e.preventDefault();
         e.dataTransfer.dropEffect = 'move';
         this.classList.add('dragover');
         });
         });
         ['dragleave', 'drop'].forEach(evt => {
         dropZone.addEventListener(evt, function(e) {
         this.classList.remove('dragover');
         });
         });
         
         dropZone.addEventListener('drop', function(e) {
         e.preventDefault();
         let payload = null;
         try {
         payload = JSON.parse(e.dataTransfer.getData('text/plain'));
         } catch (err) {
         return;
         }
         
         if (
         payload &&
         typeof payload.key === 'string' &&
         payload.section === currentSection &&
         commentsData[currentSection] &&
         commentsData[currentSection].includes(payload.key)
         ) {
         const text = translations[lang]?.[payload.key] || payload.key;
         submitComment(text);
         }
         });
         
         customInput.addEventListener('keydown', function(e) {
         if (e.key === 'Enter') {
         e.preventDefault();
         submitComment(customInput.value);
         }
         });
         });
      </script>
      </main>
      </div>
      <div id="archivePanel" class="side-panel">
         <button class="sidePanel-close" onclick="toggleArchivePanel(false)">×</button>
         <div class="sidePanel-header">
            <h2 data-i18n="archives_header">Archives des rencontres</h2>
         </div>
         <div id="archivesContainer" class="sidePanel-section">
            <p id="archivesLoading" data-i18n="archives_loading" style="text-align:center; color:var(--text-secondary); margin-top:2rem;">
               Chargement des archives…
            </p>
         </div>
      </div>
      <script>
         function loadArchives() {
           const container = document.getElementById('archivesContainer');
           const loading = document.getElementById('archivesLoading');
           container.innerHTML = '';
           loading.style.display = 'block';
         
           fetch('/archives')
             .then(resp => {
               if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
               return resp.text();
             })
             .then(html => {
               const doc = new DOMParser().parseFromString(html, 'text/html');
               const nodes = doc.querySelectorAll('main.container > div');
               if (!nodes.length) {
                 container.innerHTML = `<p style="color:#ccc;" data-i18n="no_archive">Aucune archive disponible.</p>`;
                 applyTranslations();
                 return;
               }
         
               let blocks = [];
               nodes.forEach(div => {
                 const h3 = div.querySelector('h3');
                 const link = div.querySelector('a[href^="/archives/"]');
                 const form = div.querySelector('form[action^="/delete_archive/"]');
                 if (!h3 || !link || !form) return;
         
                 const dateText = h3.textContent.replace('📄 Résumé du ', '');
                 const href = link.getAttribute('href');
                 const filename = href.split('/').pop();
         
                 const block = document.createElement('div');
                 block.className = 'info-block';
                 block.innerHTML = `
                   <h3 class="info-title" data-i18n="archive_summary">Résumé du ${dateText}</h3>
                   <p class="info-desc" data-i18n="archive_content">Contient date, lieu, composition, score, événements…</p>
                   <div style="margin-top:0.75rem; display:flex; gap:0.5rem; justify-content:flex-end;">
                     <a href="${href}" target="_blank" class="btn btn-add" data-i18n="archive_consult">Consulter</a>
                     <form action="/delete_archive/${filename}" method="post" style="display:inline;">
                       <button type="submit" class="btn btn-cancel" data-i18n="archive_delete_btn" onclick="return confirm(translations[lang]['archive_delete_confirm']);">
                         Supprimer
                       </button>
                     </form>
                   </div>`;
                 blocks.push(block);
               });
         
               for (let i = blocks.length - 1; i >= 0; i--) {
                 container.appendChild(blocks[i]);
               }
               applyTranslations();
             })
             .catch(err => {
               console.error(err);
               container.innerHTML = `<p style="color:red; text-align:center;" data-i18n="archive_load_fail">Échec du chargement.</p>`;
               applyTranslations();
             })
             .finally(() => {
               loading.style.display = 'none';
             });
         }
      </script>
      <div id="layoutsPanel" class="side-panel side-panel-left">
         <button class="sidePanel-close" onclick="toggleLayoutsPanel(false)">×</button>
         <div class="sidePanel-header">
            <h2 data-i18n="interfaces_header">Interfaces</h2>
         </div>
         <div class="settings-form">
            <div class="warning-block warning-block--yellow" style="margin-bottom:1.5rem; width:100%;">
               <div class="warning-icon"><i class="bi bi-info-circle-fill"></i></div>
               <div>
                  <p class="warning-title" data-i18n="interfaces_instructions_title">Instructions</p>
                  <p class="warning-message" data-i18n="interfaces_instructions_msg">
                     <b>Un pack ZIP d'une interface</b> correspond à tous les affichages utilisés lors d'un match : avant-match, résumé de la première mi-temps, résumé du match, et match en direct.
                  </p>
               </div>
            </div>
            <!-- Message hors ligne -->
            <div id="offline-message" data-i18n="interfaces_offline_msg" style="display:none;color:#fa5252;text-align:center;font-weight:700;margin-top:2rem;">
               Indisponible hors ligne. Veuillez vous connecter à Internet pour accéder à la galerie d'interfaces.
            </div>
            <!-- Conteneur de la galerie dynamique -->
            <div id="interfaces-gallery" class="layouts-grid" style="display:grid;grid-template-columns:1fr;gap:2.2rem;"></div>
            <div class="form-actions" style="margin-top:2rem;text-align:center;">
               <button type="button" class="btn btn-cancel" data-close data-i18n="cancel_btn">
               Annuler
               </button>
            </div>
         </div>
      </div>
      <div id="offline-message" data-i18n="interfaces_offline_msg" style="display:none;color:#fa5252;text-align:center;font-weight:700;margin-top:2rem;">
         Indisponible hors ligne. Veuillez vous connecter à Internet pour accéder à la galerie d'interfaces.
      </div>
      <div id="interfaces-gallery" class="layouts-grid" style="display:grid;grid-template-columns:1fr;gap:2.2rem;"></div>
      <script>
         const INTERFACES_URL_FR = "https://xvlivemanager.fr/interfaces.json";
         const INTERFACES_URL_EN = "https://xvlivemanager.fr/interfaces-en.json";
         const INTERFACES_URL_ES = "https://xvlivemanager.fr/interfaces-es.json";
         
         const ZIP_MAPPING = {
           "pro-league": "Pro_League.zip",
           "liga-style": "Liga_Style.zip",
           "tea-time": "Tea_Time.zip",
           "top-15": "TOP15.zip",
           "bundes-style": "Bundes_Style.zip",
           "score-vision": "Score_Vision.zip",
           "afc-xv": "AFC_XV.zip",
           "interface-perso": "Interface_Perso.zip"
         };
         
         function expectedZipFileName(layoutId) {
           return ZIP_MAPPING[layoutId] || "";
         }
         
         function showLayoutError(form, message) {
           var breakDiv = form.querySelector('.replace-layout-break');
           var info = form.querySelector('.replace-layout-info');
           if (!info) {
             info = document.createElement('div');
             info.className = 'replace-layout-info';
             if (breakDiv && breakDiv.nextSibling) {
               form.insertBefore(info, breakDiv.nextSibling);
             } else {
               form.appendChild(info);
             }
           }
           info.textContent = message;
           info.style.color = "#ff5252";
           info.style.margin = "1.1rem auto 0 auto";
           info.style.textAlign = "center";
           info.style.width = "100%";
           info.style.fontWeight = "600";
           info.style.fontSize = "1em";
         }
         
         function closeAllPanels() {
           document.querySelectorAll('.side-panel').forEach(function(panel) {
             panel.classList.remove('active');
           });
         }
         
         function toggleLayoutsPanel(show) {
           var panel = document.getElementById('layoutsPanel');
           if (!panel) return;
           if (show) {
             closeAllPanels();
             panel.classList.add('active');
             loadGallery(); 
           } else {
             panel.classList.remove('active');
           }
         }
         
         function updateInstalledLabels() {
           let installedId = localStorage.getItem('obs_layout_installed');
           if (!installedId) {
             installedId = 'pro-league';
             localStorage.setItem('obs_layout_installed', installedId);
           }
           document.querySelectorAll('.layouts-grid .sub-block').forEach(block => {
             const layoutId = block.getAttribute('data-layout-id');
             const titleBlock = block.querySelector('div[style*="align-items:center"]');
             if (!titleBlock) return;
             let label = block.querySelector('.installed-label');
             if (!label) {
               label = document.createElement('span');
               label.className = 'installed-label';
               titleBlock.appendChild(label);
             }
             if (installedId && layoutId && installedId === layoutId) {
               label.textContent = translations[lang]?.interface_pack_installed || '— pack installé';
               label.style.color = "#12e39c";
               label.style.fontWeight = "700";
               label.style.fontSize = "1em";
             } else {
               label.textContent = "";
             }
           });
         }
         
         function renderInterfaces(interfaces) {
           const gallery = document.getElementById('interfaces-gallery');
           gallery.innerHTML = '';
           interfaces.forEach(function(layout) {
             const block = document.createElement('div');
             block.className = "sub-block";
             block.setAttribute('data-layout-id', String(layout.id));
             block.style = "margin-bottom:1.5rem;padding:1.3rem 1rem 1.1rem 1rem;background:rgba(40,40,40,0.30);box-shadow:0 3px 14px 0 rgba(0,0,0,0.09);border:none;";
             const inputId = `file_${layout.id}`;
             const btnId = `btn_import_${layout.id}`;
             block.innerHTML = `
               <div style="display:flex;align-items:center;gap:0.7em;margin-bottom:0.7rem;">
                 <span style="color:#fff;font-size:1.03em;font-weight:700;padding:2.5px 10px 3.5px 10px;letter-spacing:0.01em;">
                   ${layout.name}
                 </span>
               </div>
               <div style="width:360px;max-width:100%;height:202px;margin:0 auto 1.2rem auto;position:relative;overflow:hidden;background:#18191b;box-shadow:0 6px 18px 0 rgba(15,12,9,0.07);display:flex;align-items:center;justify-content:center;">
                 <img src="${layout.image}"
                   alt="Aperçu ${layout.name}"
                   style="max-width:100%;max-height:100%;object-fit:contain;display:block;background:#18191b;">
         ${layout.id !== 'interface-perso' ? `
         <a href="${layout.zip}"
           target="_blank"
           style="position:absolute;bottom:12px;right:16px;z-index:2;background:rgba(30,30,30,0.85);color:#fff;padding:7px 18px;border-radius:5px;text-decoration:none;font-weight:600;font-size:1em;box-shadow:0 2px 8px rgba(0,0,0,0.19);transition:background .18s;">
           ${translations[lang]?.download_zip || 'Télécharger le pack ZIP'}
         </a>
         ` : ''}
               </div>
               <div style="margin-top:0.5rem;color:#c1c7d2;">${layout.description || ""}</div>
               <form class="replace-layouts-form"
                 action="/replace-layouts"
                 method="post"
                 enctype="multipart/form-data"
                 style="display:flex;flex-direction:row;align-items:center;justify-content:center;gap:1.15rem;padding:0.2rem 0 0.7rem 0;margin-top:0.2rem;flex-wrap:wrap;">
                 <input type="file" id="${inputId}" name="layouts_zip" accept=".zip" required style="display:none;">
                 <button type="button"
                   class="btn btn-cancel"
                   id="${btnId}"
                   style="display:block;max-width:160px;width:100%;padding:0.55rem 1.2rem;font-size:0.96rem;font-weight:600;border-radius:4px;margin:0;letter-spacing:0.03em;"
                   onclick="document.getElementById('${inputId}').click();">
                   ${translations[lang]?.import_btn || 'Importer'}
                 </button>
                 <button type="submit"
                   class="btn btn-primary"
                   style="display:block;max-width:160px;width:100%;padding:0.55rem 1.2rem;font-size:0.96rem;font-weight:700;border-radius:4px;margin:0;letter-spacing:0.03em;">
                   ${translations[lang]?.install_btn || 'Installer'}
                 </button>
                 <div class="replace-layout-break" style="flex-basis:100%;height:0;"></div>
               </form>
             `;
             gallery.appendChild(block);
         
             setTimeout(function() {
               const input = document.getElementById(inputId);
               const btn = document.getElementById(btnId);
               if (input && btn) {
                 input.addEventListener('change', function() {
                   if (input.files && input.files.length > 0) {
                     btn.textContent = input.files[0].name;
                   } else {
                     btn.textContent = translations[lang]?.import_btn || 'Importer';
                   }
                   const file = input.files && input.files[0];
                   if (file) {
                     const expected = expectedZipFileName(layout.id);
                     const fileName = file.name;
                     if (fileName !== expected) {
                       showLayoutError(input.closest('form'),
                         (translations[lang]?.import_error || "Erreur : Vous devez importer exactement le fichier ")
                         + expected
                         + (translations[lang]?.import_error_2 || " (Fichier choisi : ")
                         + fileName
                         + (translations[lang]?.import_error_end || ")")
                       );
                       input.value = '';
                       btn.textContent = translations[lang]?.import_btn || 'Importer';
                     }
                   }
                 });
               }
               const form = block.querySelector('.replace-layouts-form');
               if (form) {
                 form.addEventListener('submit', function(e) {
                   e.preventDefault();
                   var submitBtn = form.querySelector('button[type="submit"]');
                   submitBtn.disabled = true;
                   submitBtn.textContent = translations[lang]?.installing || 'Installation...';
                   const layoutId = block.getAttribute('data-layout-id');
         
                   const inputFile = form.querySelector('input[type="file"]');
                   const file = inputFile && inputFile.files[0];
                   if (file) {
                     const expected = expectedZipFileName(layoutId);
                     const fileName = file.name;
                     if (fileName !== expected) {
                       showLayoutError(form,
                         (translations[lang]?.import_error || "Erreur : Vous devez importer exactement le fichier ")
                         + expected
                         + (translations[lang]?.import_error_2 || " (Fichier choisi : ")
                         + fileName
                         + (translations[lang]?.import_error_end || ")")
                       );
                       submitBtn.disabled = false;
                       submitBtn.textContent = translations[lang]?.install_btn || 'Installer';
                       return;
                     }
                   }
                   var formData = new FormData(form);
                   fetch(form.action, {
                     method: 'POST',
                     body: formData
                   })
                   .then(response => response.text())
                   .then(text => {
                     if (layoutId && /(succ[eè]s|réussi|installé|ok)/i.test(text)) {
                       localStorage.setItem('obs_layout_installed', layoutId);
                       updateInstalledLabels();
                     }
                     var breakDiv = form.querySelector('.replace-layout-break');
                     var info = form.querySelector('.replace-layout-info');
                     if (!info) {
                       info = document.createElement('div');
                       info.className = 'replace-layout-info';
                       if (breakDiv && breakDiv.nextSibling) {
                         form.insertBefore(info, breakDiv.nextSibling);
                       } else {
                         form.appendChild(info);
                       }
                     }
                     info.textContent = text;
                     const isSuccess = /(succ[eè]s|réussi|installé|ok)/i.test(text);
                     info.style.color = isSuccess ? "#20c997" : "#ff5252";
                     info.style.margin = "1.1rem auto 0 auto";
                     info.style.textAlign = "center";
                     info.style.width = "100%";
                     info.style.fontWeight = "600";
                     info.style.fontSize = "1em";
                     submitBtn.disabled = false;
                     submitBtn.textContent = translations[lang]?.install_btn || 'Installer';
         
                     if (isSuccess) {
                       setTimeout(() => {
                         if (info && info.parentNode) {
                           info.parentNode.removeChild(info);
                         }
                       }, 2000);
                     }
                   });
                 });
               }
             }, 100);
           });
           updateInstalledLabels();
         }
         
         function showOffline() {
           document.getElementById('interfaces-gallery').style.display = "none";
           document.getElementById('offline-message').style.display = "";
         }
         function showGallery() {
           document.getElementById('interfaces-gallery').style.display = "";
           document.getElementById('offline-message').style.display = "none";
         }
         
         function getInterfacesUrl() {
           if (window.lang === 'en') return INTERFACES_URL_EN;
           if (window.lang === 'es') return INTERFACES_URL_ES;
           return INTERFACES_URL_FR;
         }
         
         function loadGallery() {
           const gallery = document.getElementById('interfaces-gallery');
           if (!gallery) return;
           gallery.innerHTML = '';
           if (!navigator.onLine) { showOffline(); return; }
           fetch(getInterfacesUrl() + '?' + Date.now())
             .then(resp => {
               if (!resp.ok) throw new Error('offline');
               return resp.json();
             })
             .then(data => { showGallery(); renderInterfaces(data); })
             .catch(showOffline);
         }
         
         window.addEventListener('storage', function(e) {
           if (e.key === 'lang') {
             loadGallery();
           }
         });
         window.addEventListener('online', loadGallery);
         window.addEventListener('offline', showOffline);
         
         document.addEventListener('DOMContentLoaded', function() {
           var btn = document.getElementById('btnOpenLayouts');
           if (btn) {
             btn.style.cursor = 'pointer';
             btn.addEventListener('click', function() {
               toggleLayoutsPanel(true);
             });
           }
           document.querySelectorAll('.sidePanel-close, .btn-cancel[data-close]').forEach(function(el){
             el.addEventListener('click', function(){
               toggleLayoutsPanel(false);
             });
           });
         });
      </script>
      <div id="infoPanel" class="side-panel side-panel-left">
         <button class="sidePanel-close" onclick="toggleInfoPanel(false)">×</button>
         <div class="sidePanel-header">
            <h2 data-i18n="mainInfo">Informations principales</h2>
         </div>
         <div id="infoContainer" class="sidePanel-section">
            <div class="settings-form">
               <div class="warning-block warning-block--yellow" style="margin-bottom:1.5rem;width:100%;">
                  <div class="warning-icon"><i class="bi bi-info-circle-fill"></i></div>
                  <div>
                     <p class="warning-title" data-i18n="instructionsTitle">Instructions</p>
                     <p class="warning-message" data-i18n="instructionsMsg">
                        Veuillez remplir les champs suivants avec les informations exactes du match : date, heure, lieu et noms des arbitres.
                     </p>
                  </div>
               </div>
               <form action="/update_infos_match?anchor=infos" method="POST">
                  <div class="sub-block">
                     <div class="section-subtitle" data-i18n="matchDetails">Détails de la rencontre</div>
                     <div class="grid" style="display:grid; gap:1rem; grid-template-columns: repeat(2, minmax(120px, 1fr));">
                        <div class="field">
                           <label for="date" class="form-label" data-i18n="dateLabel">Date</label>
                           <input type="date" id="date" name="date" class="form-control input-date no-spinner" value="{{ date }}">
                        </div>
                        <div class="field">
                           <label for="heure" class="form-label" data-i18n="timeLabel">Heure</label>
                           <input type="time" id="heure" name="heure" class="form-control input-time no-spinner" value="{{ heure }}">
                        </div>
                        <div class="field">
                           <label for="ville" class="form-label" data-i18n="cityLabel">Ville</label>
                           <input type="text" id="ville" name="ville" class="form-control" data-i18n-placeholder="cityPlaceholder" placeholder="Ville" value="{{ ville }}">
                        </div>
                        <div class="field">
                           <label for="stade" class="form-label" data-i18n="stadiumLabel">Stade</label>
                           <input type="text" id="stade" name="stade" class="form-control" data-i18n-placeholder="stadiumPlaceholder" placeholder="Stade" value="{{ stade }}">
                        </div>
                     </div>
                  </div>
                  <div class="sub-block">
                     <div class="section-subtitle" data-i18n="referees">Arbitres</div>
                     <div class="grid" style="display:grid; gap:1rem; grid-template-columns: repeat(2, minmax(120px, 1fr));">
                        <div class="field">
                           <label for="arbitre_central" class="form-label" data-i18n="refCentral">Central</label>
                           <input type="text" id="arbitre_central" name="arbitre_central" class="form-control" data-i18n-placeholder="refCentralPlaceholder" placeholder="Central" value="{{ arbitres.central }}">
                        </div>
                        <div class="field">
                           <label for="arbitre_touche_1" class="form-label" data-i18n="refTouch1">Touche 1</label>
                           <input type="text" id="arbitre_touche_1" name="arbitre_touche_1" class="form-control" data-i18n-placeholder="refTouch1Placeholder" placeholder="Touche 1" value="{{ arbitres.touche_1 }}">
                        </div>
                        <div class="field">
                           <label for="arbitre_touche_2" class="form-label" data-i18n="refTouch2">Touche 2</label>
                           <input type="text" id="arbitre_touche_2" name="arbitre_touche_2" class="form-control" data-i18n-placeholder="refTouch2Placeholder" placeholder="Touche 2" value="{{ arbitres.touche_2 }}">
                        </div>
                        <div class="field">
                           <label for="arbitre_video" class="form-label" data-i18n="refTMO">TMO</label>
                           <input type="text" id="arbitre_video" name="arbitre_video" class="form-control" data-i18n-placeholder="refTMOPlaceholder" placeholder="TMO" value="{{ arbitres.video }}">
                        </div>
                     </div>
                  </div>
                  <div class="form-actions">
                     <button type="button" class="btn btn-cancel" data-close data-i18n="cancelBtn">Annuler</button>
                     <button type="submit" class="btn btn-primary" data-i18n="validateBtn">Valider</button>
                  </div>
               </form>
            </div>
         </div>
      </div>
      <script>
         function closeAllPanels() {
         
           document.querySelectorAll('.side-panel').forEach(p => p.classList.remove('active'));
         
           var reglagesSection = document.getElementById('reglages-section');
           if (reglagesSection) reglagesSection.classList.add('is-hidden');
         }
         
         function toggleInfoPanel(show = true) {
           closeAllPanels();
           const panel = document.getElementById('infoPanel');
           if (!panel) return;
           panel.classList.toggle('active', show);
         }
         
         document.addEventListener('DOMContentLoaded', () => {
         
           const infoBtn = document.querySelector('.sub-header-left > div:first-child');
           if (infoBtn) {
             infoBtn.style.cursor = 'pointer';
             infoBtn.addEventListener('click', () => toggleInfoPanel(true));
           }
         
           document.addEventListener('click', function(e) {
             if (
               e.target.matches('#infoPanel .btn-cancel[data-close]') ||
               e.target.closest('#infoPanel .btn-cancel[data-close]') ||
               e.target.matches('#infoPanel .sidePanel-close')
             ) {
               toggleInfoPanel(false);
             }
           });
         });
      </script>
      <div id="compoPanel" class="side-panel side-panel-left">
         <button class="sidePanel-close" onclick="toggleCompoPanel(false)">×</button>
         <div class="sidePanel-header">
            <h2 data-i18n="teamLineups">Compositions des équipes</h2>
         </div>
         <div class="settings-form">
            <div class="warning-block warning-block--yellow" style="margin-bottom:1.5rem;width:100%;">
               <div class="warning-icon"><i class="bi bi-info-circle-fill"></i></div>
               <div>
                  <p class="warning-title" data-i18n="instructionsTitle">Instructions</p>
                  <p class="warning-message" data-i18n="lineupsInstructions">
                     Veuillez remplir les champs pour chaque équipe : sélectionnez un logo, saisissez le nom de l’équipe, complétez les joueurs titulaires et remplaçants.
                  </p>
               </div>
            </div>
            <form id="compo-form" action="/update_equipes?anchor=compos" method="POST" enctype="multipart/form-data" autocomplete="off">
               <div style="display:flex;gap:2.5rem;align-items:flex-start;flex-wrap:wrap;">
                  <div style="flex:1 1 0;min-width:220px;max-width:340px;">
                     <h3 class="section-subtitle" style="margin-top:0;margin-bottom:1.2rem;" data-i18n="homeTeam">Équipe domicile</h3>
                     <div style="display:flex;flex-direction:column;align-items:center;position:relative;">
                        <div class="logo-preview-wrapper" style="text-align:center; position:relative;">
                           <img id="logoPreviewHome"
                              src="{% if logo_home %}/static/logos_teams/logo_home.png{% endif %}"
                              alt="Logo domicile"
                              class="logo-preview"
                              style="max-width:100px;max-height:100px;display:{% if logo_home %}block{% else %}none{% endif %};" />
                           <button id="deleteLogoHome"
                              type="button"
                              class="logo-delete-btn"
                              style="display:{% if logo_home %}block{% else %}none{% endif %}; position:absolute; top:-8px; right:-8px;"
                              onclick="removeTeamLogo('logo_home', 'logoPreviewHome', 'deleteLogoHome', 'logoHomeRemoved'); return false;">×</button>
                           <button type="button"
                              class="btn btn-cancel"
                              style="margin:0.7rem auto 1rem auto;display:block;"
                              onclick="document.getElementById('logo_home').click();"
                              data-i18n="chooseLogoBtn">Choisir un logo</button>
                           <input type="file"
                              id="logo_home"
                              name="logo_home"
                              accept=".png,.jpg,.jpeg"
                              style="display:none;"
                              onchange="handleTeamLogo(event, 'logoPreviewHome', 'deleteLogoHome', 'logoHomeRemoved')" />
                           <input type="hidden" id="logoHomeRemoved" name="logoHomeRemoved" value="0" />
                        </div>
                        <span id="previewTextHome"
                           style="color:#666; font-size:0.875rem; display:{% if logo_home %}none{% else %}block{% endif %};margin-bottom:0.5rem;"data-i18n="noLogoHome">Aucun logo</span>
                     </div>
                     <div class="field">
                        <label for="nom_home" class="form-label" data-i18n="teamNameLabel">Nom de l’équipe</label>
                        <input id="nom_home" name="nom_home" class="form-control" type="text" data-i18n-placeholder="teamNamePlaceholder" placeholder="France" value="{{ compo_home.nom }}" />
                     </div>
                     {% for i, poste in [(1,"Pilier gauche"),(2,"Talonneur"),(3,"Pilier droit"),(4,"Deuxième ligne"),(5,"Deuxième ligne"),(6,"Troisième ligne aile fermé"),(7,"Troisième ligne aile ouvert"),(8,"Numéro 8"),(9,"Demi de mêlée"),(10,"Demi d'ouverture"),(11,"Ailier gauche"),(12,"Premier centre"),(13,"Deuxième centre"),(14,"Ailier droit"),(15,"Arrière")] %}
                     <div class="field">
                        <label for="poste_home_{{ i }}" class="form-label" data-i18n="poste_{{i}}_label">{{ i }} – {{ poste }}</label>
                        <input id="poste_home_{{ i }}" name="poste_home_{{ i }}" class="form-control" type="text" data-i18n-placeholder="playerNamePlaceholder" placeholder="Nom du joueur" value="{{ compo_home.joueurs[i-1] if compo_home.joueurs|length >= i else '' }}" />
                     </div>
                     {% endfor %}
                     <div class="section-subtitle" style="font-size:1.07rem;margin:1.2rem 0 0.4rem 0;" data-i18n="substitutes">Remplaçants</div>
                     {% for i in range(1,9) %}
                     <div class="field">
                        <label for="remplaçant_home_{{ i }}" class="form-label" data-i18n="substituteLabel_{{i}}">Remplaçant {{ i }}</label>
                        <input id="remplaçant_home_{{ i }}" name="remplaçant_home_{{ i }}" class="form-control" type="text" data-i18n-placeholder="playerNamePlaceholder" placeholder="Nom du joueur" value="{{ compo_home.remplacants[i-1] if compo_home.remplacants|length >= i else '' }}" />
                     </div>
                     {% endfor %}
                  </div>
                  <div style="flex:1 1 0;min-width:220px;max-width:340px;">
                     <h3 class="section-subtitle" style="margin-top:0;margin-bottom:1.2rem;" data-i18n="awayTeam">Équipe extérieure</h3>
                     <div style="display:flex;flex-direction:column;align-items:center;position:relative;">
                        <div class="logo-preview-wrapper" style="text-align:center; position:relative;">
                           <img id="logoPreviewAway"
                              src="{% if logo_away %}/static/logos_teams/logo_away.png{% endif %}"
                              alt="Logo extérieure"
                              class="logo-preview"
                              style="max-width:100px;max-height:100px;display:{% if logo_away %}block{% else %}none{% endif %};" />
                           <button id="deleteLogoAway"
                              type="button"
                              class="logo-delete-btn"
                              style="display:{% if logo_away %}block{% else %}none{% endif %}; position:absolute; top:-8px; right:-8px;"
                              onclick="removeTeamLogo('logo_away', 'logoPreviewAway', 'deleteLogoAway', 'logoAwayRemoved'); return false;">×</button>
                           <button type="button"
                              class="btn btn-cancel"
                              style="margin:0.7rem auto 1rem auto;display:block;"
                              onclick="document.getElementById('logo_away').click();"
                              data-i18n="chooseLogoBtn">Choisir un logo</button>
                           <input type="file"
                              id="logo_away"
                              name="logo_away"
                              accept=".png,.jpg,.jpeg"
                              style="display:none;"
                              onchange="handleTeamLogo(event, 'logoPreviewAway', 'deleteLogoAway', 'logoAwayRemoved')" />
                           <input type="hidden" id="logoAwayRemoved" name="logoAwayRemoved" value="0" />
                        </div>
                        <span id="previewTextAway"
                           style="color:#666; font-size:0.875rem; display:{% if logo_away %}none{% else %}block{% endif %};margin-bottom:0.5rem;"data-i18n="noLogoHome">Aucun logo</span>
                     </div>
                     <div class="field">
                        <label for="nom_away" class="form-label" data-i18n="teamNameLabel">Nom de l’équipe</label>
                        <input id="nom_away" name="nom_away" class="form-control" type="text" data-i18n-placeholder="teamNameAwayPlaceholder" placeholder="Nouvelle-Zélande" value="{{ compo_away.nom }}" />
                     </div>
                     {% for i, poste in [(1,"Pilier gauche"),(2,"Talonneur"),(3,"Pilier droit"),(4,"Deuxième ligne"),(5,"Deuxième ligne"),(6,"Troisième ligne aile fermé"),(7,"Troisième ligne aile ouvert"),(8,"Numéro 8"),(9,"Demi de mêlée"),(10,"Demi d'ouverture"),(11,"Ailier gauche"),(12,"Premier centre"),(13,"Deuxième centre"),(14,"Ailier droit"),(15,"Arrière")] %}
                     <div class="field">
                        <label for="poste_away_{{ i }}" class="form-label" data-i18n="poste_{{i}}_label">{{ i }} – {{ poste }}</label>
                        <input id="poste_away_{{ i }}" name="poste_away_{{ i }}" class="form-control" type="text" data-i18n-placeholder="playerNamePlaceholder" placeholder="Nom du joueur" value="{{ compo_away.joueurs[i-1] if compo_away.joueurs|length >= i else '' }}" />
                     </div>
                     {% endfor %}
                     <div class="section-subtitle" style="font-size:1.07rem;margin:1.2rem 0 0.4rem 0;" data-i18n="substitutes">Remplaçants</div>
                     {% for i in range(1,9) %}
                     <div class="field">
                        <label for="remplaçant_away_{{ i }}" class="form-label" data-i18n="substituteLabel_{{i}}">Remplaçant {{ i }}</label>
                        <input id="remplaçant_away_{{ i }}" name="remplaçant_away_{{ i }}" class="form-control" type="text" data-i18n-placeholder="playerNamePlaceholder" placeholder="Nom du joueur" value="{{ compo_away.remplacants[i-1] if compo_away.remplacants|length >= i else '' }}" />
                     </div>
                     {% endfor %}
                  </div>
               </div>
               <div class="form-actions">
                  <button type="button" class="btn btn-cancel" data-close data-i18n="cancelBtn">Annuler</button>
                  <button type="submit" class="btn btn-primary" data-i18n="validateBtn">Valider</button>
               </div>
            </form>
         </div>
      </div>
      <script>
         function handleTeamLogo(event, imgId, deleteBtnId, removedInputId) {
            const file = event.target.files[0];
            const previewImg = document.getElementById(imgId);
            const deleteBtn  = document.getElementById(deleteBtnId);
            const removed    = document.getElementById(removedInputId);
            if (file) {
               const reader = new FileReader();
               reader.onload = e => {
                  previewImg.src           = e.target.result;
                  previewImg.style.display = 'block';
                  deleteBtn.style.display  = 'block';
                  if (removed) removed.value = '0';
               };
               reader.readAsDataURL(file);
            }
         }
         function removeTeamLogo(inputId, imgId, deleteBtnId, removedInputId) {
            const fileInput = document.getElementById(inputId);
            const previewImg = document.getElementById(imgId);
            const deleteBtn  = document.getElementById(deleteBtnId);
            const removed    = document.getElementById(removedInputId);
            if (fileInput) fileInput.value = '';
            if (previewImg) previewImg.src = '';
            if (previewImg) previewImg.style.display = 'none';
            if (deleteBtn)  deleteBtn.style.display = 'none';
            if (removed)    removed.value = '1';
         }
      </script>
      <script>
         function closeAllPanels() {
         
           document.querySelectorAll('.side-panel').forEach(p => p.classList.remove('active'));
         
           var reglagesSection = document.getElementById('reglages-section');
           if (reglagesSection) reglagesSection.classList.add('is-hidden');
         }
         
         function toggleCompoPanel(show = true) {
           closeAllPanels();
           const panel = document.getElementById('compoPanel');
           if (!panel) return;
           panel.classList.toggle('active', show);
         }
         
         document.addEventListener('DOMContentLoaded', () => {
         
           const compoBtn = document.querySelector('.sub-header-left > div:nth-child(2)');
           if (compoBtn) {
             compoBtn.style.cursor = 'pointer';
             compoBtn.addEventListener('click', () => toggleCompoPanel(true));
           }
         
           document.addEventListener('click', function(e) {
             if (
               e.target.matches('#compoPanel .btn-cancel[data-close]') ||
               e.target.closest('#compoPanel .btn-cancel[data-close]') ||
               e.target.matches('#compoPanel .sidePanel-close')
             ) {
               toggleCompoPanel(false);
             }
           });
         });
      </script>
      <div id="partenairesPanel" class="side-panel side-panel-left">
         <button class="sidePanel-close" onclick="togglePartenairesPanel(false)">×</button>
         <div class="sidePanel-header">
            <h2 data-i18n="addPartnersTitle">Ajout des partenaires</h2>
         </div>
         <div class="settings-form">
            <div class="warning-block warning-block--yellow" style="margin-bottom:1.5rem; width:100%;">
               <div class="warning-icon"><i class="bi bi-info-circle-fill"></i></div>
               <div>
                  <p class="warning-title" data-i18n="instructionsTitle">Instructions</p>
                  <p class="warning-message" data-i18n="partnersInstructions">
                     Importez les logos de vos 6 partenaires ci-dessous.<br>
                     Un aperçu s’affichera et vous pourrez supprimer chaque logo via la croix.
                  </p>
               </div>
            </div>
            <form id="partnersForm" action="/update_overlay?anchor=overlay" method="POST" enctype="multipart/form-data">
               <div class="section-subtitle" data-i18n="yourPartners">Vos partenaires</div>
               <div class="logos-grid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:30px;justify-items:center;">
                  {% for i in range(6) %}
                  <div class="sub-block" style="margin-bottom:1.5rem; padding-top:1rem;">
                     <div class="logo-item" style="display:flex; flex-direction:column; align-items:center;">
                        <label for="logo_partenaire_{{ i+1 }}" class="form-label"
                           style="width:100%;text-align:center;margin-bottom:0.5rem;"
                           data-i18n="partnerLabel_{{ i+1 }}">
                        Partenaire {{ i+1 }}
                        </label>
                        <div class="logo-preview-wrapper" style="text-align:center; position:relative;">
                           <img id="preview_logo_partenaire_{{ i+1 }}"
                              src="{% if overlay.logos and overlay.logos[i] %}{{ overlay.logos[i] }}{% endif %}"
                              alt="Partenaire {{ i+1 }}"
                              class="logo-preview"
                              style="max-width:100%; max-height:60px; border-radius:8px; display:{% if overlay.logos and overlay.logos[i] %}block{% else %}none{% endif %};" />
                           <button id="deleteLogoPartenaire{{ i+1 }}"
                              type="button"
                              data-index="{{ i+1 }}"
                              class="logo-delete-btn"
                              style="display:{% if overlay.logos and overlay.logos[i] %}block{% else %}none{% endif %}; position:absolute; top:-6px; right:-6px;"
                              onclick="removePartnerLogo({{ i+1 }}); return false;">×</button>
                           <button type="button"
                              class="btn btn-cancel"
                              style="margin:0.7rem auto 1rem auto;display:block;"
                              onclick="document.getElementById('logo_partenaire_{{ i+1 }}').click();"
                              data-i18n="chooseLogoBtn">
                           Choisir un logo
                           </button>
                           <input type="file"
                              id="logo_partenaire_{{ i+1 }}"
                              name="logo_partenaire_{{ i+1 }}"
                              accept=".png,.jpg,.jpeg"
                              style="display:none;"
                              onchange="handlePartnerLogo(event, {{ i+1 }})" />
                           <input type="hidden"
                              id="remove_logo_partenaire_{{ i+1 }}"
                              name="remove_logo_partenaire_{{ i+1 }}"
                              value="0" />
                        </div>
                     </div>
                  </div>
                  {% endfor %}
               </div>
               <div class="form-actions">
                  <button type="button" class="btn btn-cancel" data-close data-i18n="cancelBtn">Annuler</button>
                  <button type="submit" class="btn btn-primary" data-i18n="validateBtn">Valider</button>
               </div>
            </form>
         </div>
      </div>
      <script>
         function closeAllPanels() {
         
           document.querySelectorAll('.side-panel').forEach(p => p.classList.remove('active'));
         
           var reglagesSection = document.getElementById('reglages-section');
           if (reglagesSection) reglagesSection.classList.add('is-hidden');
         }
         
         function togglePartenairesPanel(show = true) {
           closeAllPanels();
           const panel = document.getElementById('partenairesPanel');
           if (!panel) return;
           panel.classList.toggle('active', show);
         }
         
         function removePartnerLogo(idx) {
           const fileInput   = document.getElementById(`logo_partenaire_${idx}`);
           const removeInput = document.getElementById(`remove_logo_partenaire_${idx}`);
           const img         = document.getElementById(`preview_logo_partenaire_${idx}`);
           const deleteBtn   = document.getElementById(`deleteLogoPartenaire${idx}`);
           fileInput.value   = '';
           removeInput.value = '1';
           img.style.display = 'none';
           deleteBtn.style.display = 'none';
         }
         
         function handlePartnerLogo(event, index) {
           const file = event.target.files[0];
           const previewImg  = document.getElementById(`preview_logo_partenaire_${index}`);
           const deleteBtn   = document.getElementById(`deleteLogoPartenaire${index}`);
           if (file) {
             const reader = new FileReader();
             reader.onload = e => {
               previewImg.src           = e.target.result;
               previewImg.style.display = 'block';
               deleteBtn.style.display  = 'block'; 
               document.getElementById(`remove_logo_partenaire_${index}`).value = '0';
             };
             reader.readAsDataURL(file);
           }
         }
         
         document.addEventListener('DOMContentLoaded', () => {
         
           const partenairesBtn = document.querySelector('.sub-header-left > div:nth-child(3)');
           if (partenairesBtn) {
             partenairesBtn.style.cursor = 'pointer';
             partenairesBtn.addEventListener('click', () => togglePartenairesPanel(true));
           }
         
           document.addEventListener('click', function(e) {
             if (
               e.target.matches('#partenairesPanel .btn-cancel[data-close]') ||
               e.target.closest('#partenairesPanel .btn-cancel[data-close]') ||
               e.target.matches('#partenairesPanel .sidePanel-close')
             ) {
               togglePartenairesPanel(false);
             }
           });
         
           document.querySelectorAll('#partenairesPanel .sidePanel-close').forEach(btn => {
             btn.addEventListener('click', () => togglePartenairesPanel(false));
           });
         
         });
      </script>
      <div id="directPanel" class="side-panel side-panel-left">
         <button class="sidePanel-close" onclick="toggleDirectPanel(false)">×</button>
         <div class="sidePanel-header">
            <h2 data-i18n="livePrepTitle">Préparation du direct</h2>
         </div>
         <div class="settings-form">
            <div class="warning-block warning-block--yellow" style="margin-bottom:1.5rem; width:100%;">
               <div class="warning-icon"><i class="bi bi-info-circle-fill"></i></div>
               <div>
                  <p class="warning-title" data-i18n="instructionsTitle">Instructions</p>
                  <p class="warning-message" data-i18n="livePrepInstructions">
                     Définissez ici votre message défilant OBS et configurez un compte à rebours personnalisé.
                  </p>
               </div>
            </div>
            <form id="directForm" action="/update_overlay?anchor=overlay" method="POST" enctype="multipart/form-data">
               <div class="section-subtitle" data-i18n="preMatch">Avant-Match</div>
               <div class="form-group" style="display: flex; gap: 1.2rem; align-items: flex-end; margin-bottom:1.4rem;">
                  <div style="flex: 3;">
                     <label for="overlay_message" class="form-label" data-i18n="countdownMsgLabel">Message du compte à rebours</label>
                     <input
                        id="overlay_message"
                        name="overlay_message"
                        type="text"
                        class="form-control"
                        data-i18n-placeholder="countdownMsgPlaceholder"
                        placeholder="Le match commence dans…"
                        value="{{ overlay.countdown.message }}"
                        />
                  </div>
                  <div style="flex: 1;">
                     <label for="overlay_duration" class="form-label" data-i18n="durationLabel">Durée</label>
                     <input
                        id="overlay_duration"
                        name="overlay_duration"
                        type="number"
                        min="1"
                        max="30"
                        class="form-control no-spin"
                        value="{{ overlay.countdown.duration }}"
                        autocomplete="off"
                        />
                  </div>
               </div>
               <div class="section-subtitle" data-i18n="liveLabel">En direct</div>
               <div class="form-group">
                  <label for="scrolling_message" style="margin-bottom:0.5rem; display:block;" data-i18n="obsScrollLabel">Message défilant OBS</label>
                  <input
                     id="scrolling_message"
                     name="scrolling_message"
                     type="text"
                     class="form-control"
                     data-i18n-placeholder="obsScrollPlaceholder"
                     placeholder="Bienvenue au stade."
                     value="{{ overlay.message }}"
                     />
               </div>
               <div class="form-actions">
                  <button type="button" class="btn btn-cancel" data-close data-i18n="cancelBtn">Annuler</button>
                  <button type="submit" class="btn btn-primary" data-i18n="validateBtn">Valider</button>
               </div>
            </form>
         </div>
      </div>
      <script>
         function toggleDirectPanel(show = true) {
           closeAllPanels();
           const panel = document.getElementById('directPanel');
           if (!panel) return;
           panel.classList.toggle('active', show);
         }
         
         document.addEventListener('DOMContentLoaded', () => {
         
           const directBtn = document.querySelector('.sub-header-left > div:nth-child(4)');
           if (directBtn) {
             directBtn.style.cursor = 'pointer';
             directBtn.addEventListener('click', () => toggleDirectPanel(true));
           }
         
           document.addEventListener('click', function(e) {
             if (
               e.target.matches('#directPanel .btn-cancel[data-close]') ||
               e.target.closest('#directPanel .btn-cancel[data-close]') ||
               e.target.matches('#directPanel .sidePanel-close')
             ) {
               toggleDirectPanel(false);
             }
           });
         
           document.querySelectorAll('#directPanel .sidePanel-close').forEach(btn => {
             btn.addEventListener('click', () => toggleDirectPanel(false));
           });
         });
      </script>
      <div id="deleteDataModal" class="modal-overlay is-hidden">
         <div class="modal-card delete-modal-panel">
            <div class="sidePanel-header">
               <h2 style="width:100%; text-align:center; margin:0; font-size:1.35rem; font-weight:700; letter-spacing:0.08em;" data-i18n="deleteDataTitle">
                  SUPPRESSION DES DONNÉES
               </h2>
            </div>
            <form id="deleteAllForm" action="/reset_all?anchor=delete-all" method="POST" class="settings-form" autocomplete="off" style="gap:1.25rem; margin-top:0.2rem;">
               <div style="color:#fff; text-align:center; font-size:1.09rem; margin-bottom:0.6rem; line-height:1.7;" data-i18n="deleteDataWarning">
                  <b>Attention&nbsp;:</b> vous êtes sur le point de supprimer <b>l’intégralité des données</b>.<br>
                  <span style="display:block; font-size:0.78em; color:#bfc3c9; font-style:italic; margin-top:0.45em;">
                  Cette action est <u>définitive</u>. Une archive complète de la rencontre sera automatiquement générée après la suppression.
                  </span>
               </div>
               <div class="form-actions" style="justify-content:center; margin-bottom:0; gap:1rem;">
                  <button type="button" class="btn btn-cancel" onclick="toggleDeleteDataModal(false)" data-i18n="cancelBtn">Annuler</button>
                  <button type="submit" class="btn btn-danger" data-i18n="confirmDeleteBtn">Confirmer la suppression</button>
               </div>
            </form>
         </div>
      </div>
      <section id="reglages-section" class="section-block is-hidden">
         <div id="sidePanel">
            <div class="sidePanel-header">
               <h2 data-i18n="settingsTitle">Réglages</h2>
               <button class="sidePanel-close" onclick="toggleSidePanel(false)">×</button>
            </div>
            <form id="settingsForm" class="settings-form" onsubmit="saveSettings(event)">
               <div class="logo-preview-wrapper">
                  <img id="logoPreview" src="" alt="Logo utilisateur" class="logo-preview" />
                  <button id="deleteLogo" type="button" onclick="deleteLogoHandler()">×</button>
                  <button type="button" class="btn btn-cancel" onclick="document.getElementById('settings_logo').click();" data-i18n="chooseLogoBtn">Choisir un logo</button>
                  <input type="file" id="settings_logo" accept="image/*" style="display:none;" onchange="handleLogoSelection(event)" />
               </div>
               <div class="form-group">
                  <label for="settings_username" data-i18n="usernameLabel">Nom d’utilisateur</label>
                  <input type="text" id="settings_username" data-i18n-placeholder="usernamePlaceholder" placeholder="Nom d’utilisateur" />
               </div>
               <div class="form-group">
                  <label for="settings_tagline" data-i18n="taglineLabel">Votre phrase d'accroche</label>
                  <input type="text" id="settings_tagline" data-i18n-placeholder="taglinePlaceholder" placeholder="Votre phrase d’accroche" />
               </div>
               <div class="form-actions">
                  <button type="button" class="btn btn-cancel" onclick="toggleSidePanel(false)" data-i18n="cancelBtn">Annuler</button>
                  <button type="submit" class="btn btn-primary" data-i18n="saveBtn">Enregistrer</button>
               </div>
            </form>
            <div class="sidePanel-section">
               <h3 class="section-subtitle" data-i18n="yourStatsTitle">Vos statistiques</h3>
               <div class="stats-grid">
                  <div class="dashboard-card">
                     <div class="card-info">
                        <div id="stat-time" class="card-number">00:00</div>
                        <div class="card-label" data-i18n="timeSpentLabel">Temps passé sur <strong>XVLIVEMANAGER</strong></div>
                     </div>
                     <div class="card-icon"><i class="bi bi-clock-history"></i></div>
                  </div>
                  <div class="dashboard-card">
                     <div class="card-info">
                        <div id="stat-keys" class="card-number">0</div>
                        <div class="card-label" data-i18n="keysTypedLabel">Touches tapées</div>
                     </div>
                     <div class="card-icon"><i class="bi bi-keyboard"></i></div>
                  </div>
                  <div class="dashboard-card">
                     <div class="card-info">
                        <div id="stat-clicks" class="card-number">0</div>
                        <div class="card-label" data-i18n="clicksLabel">Clics effectués</div>
                     </div>
                     <div class="card-icon"><i class="bi bi-mouse2-fill"></i></div>
                  </div>
               </div>
               <div class="progression">
                  <div class="progression-title" data-i18n="progressionTitle">Votre progression :</div>
                  <div class="steam-bar">
                     <div id="steam-fill" class="steam-bar-fill"></div>
                  </div>
                  <div class="steam-bar-marks">
                     <span></span>
                     <span></span>
                     <span></span>
                     <span></span>
                  </div>
                  <ul class="level-list">
                     <li data-i18n="levelIntermediate">Intermédiaire (25 %) : 75 h / 300 000 touches / 75 000 clics</li>
                     <li data-i18n="levelMaster">Maître (50 %) : 150 h / 600 000 touches / 150 000 clics</li>
                     <li data-i18n="levelGrandmaster">Grand-Maître (100 %) : 300 h / 1 200 000 touches / 300 000 clics</li>
                  </ul>
                  <div class="form-actions" style="margin-top: 1rem;">
                     <button id="resetBtn" onclick="resetStats()" class="btn btn-danger" data-i18n="resetBtn">Réinitialiser</button>
                  </div>
               </div>
            </div>
         </div>
         <script>
            (function() {
              function loadSettings() {
                fetch('/api/get_settings')
                  .then(r => r.json())
                  .then(data => {
                    const displayLogo= document.getElementById('pageLogo');
                    const previewLogo= document.getElementById('logoPreview');
                    const deleteBtn  = document.getElementById('deleteLogo');
                    if (data.logo) {
                      if (displayLogo) { displayLogo.src = "/api/get_logo"; displayLogo.style.display = 'block'; }
                      if (previewLogo) { previewLogo.src = "/api/get_logo"; previewLogo.style.display = 'block'; }
                      if (deleteBtn)   { deleteBtn.style.display = 'block'; }
                    } else {
                      if (displayLogo) displayLogo.style.display = 'none';
                      if (previewLogo) previewLogo.style.display = 'none';
                      if (deleteBtn)   deleteBtn.style.display = 'none';
                    }
            
            const usernameInput = document.getElementById('settings_username');
            const taglineInput  = document.getElementById('settings_tagline');
            if (usernameInput) usernameInput.value = data.username || '';
            if (taglineInput)  taglineInput.value  = data.tagline || '';
            const userEl    = document.getElementById('welcomeUser');
            const taglineEl = document.getElementById('welcomeTaglineText');
            if (userEl)    userEl.textContent    = data.username || (translations[lang]?.defaultUser || 'Utilisateur');
            if (taglineEl) taglineEl.textContent = data.tagline  || (translations[lang]?.defaultTagline || 'Merci d’utiliser XVLIVEMANAGER.');
                  });
              }
            
              function handleLogoSelection(event) {
                const file = event.target.files[0];
                if (!file) return;
                const previewLogo = document.getElementById('logoPreview');
                previewLogo.src = URL.createObjectURL(file);
                previewLogo.style.display = 'block';
              }
            
            function deleteLogoHandler() {
                fetch('/api/delete_logo', { method: 'POST' })
                    .then(r => r.json())
                    .then(data => {
                        loadSettings(); 
                    });
            }
            
              function saveSettings(e) {
                e.preventDefault();
                const username = document.getElementById('settings_username').value.trim();
                const tagline  = document.getElementById('settings_tagline').value.trim();
                const logoInput = document.getElementById('settings_logo');
                const formData = new FormData();
                formData.append('username', username);
                formData.append('tagline', tagline);
                if (logoInput.files && logoInput.files.length > 0) {
                  formData.append('logo', logoInput.files[0]);
                }
                fetch('/api/save_settings', {
                  method: 'POST',
                  body: formData
                })
                .then(r => r.json())
                .then(data => {
                  loadSettings();
                  if (typeof toggleSidePanel === 'function') toggleSidePanel(false);
                });
              }
            
              document.addEventListener('DOMContentLoaded', function(){
                loadSettings();
                document.getElementById('settings_logo')?.addEventListener('change', handleLogoSelection);
                document.getElementById('deleteLogo')?.addEventListener('click', deleteLogoHandler);
                document.getElementById('settingsForm')?.addEventListener('submit', saveSettings);
            
            document.getElementById('settings_username')?.addEventListener('input', e => {
            document.getElementById('welcomeUser').textContent = e.target.value || (translations[lang]?.defaultUser || 'Utilisateur');
            });
            document.getElementById('settings_tagline')?.addEventListener('input', e => {
            document.getElementById('welcomeTaglineText').textContent = e.target.value || (translations[lang]?.defaultTagline || 'Merci d’utiliser XVLIVEMANAGER.');
            });
            
                updateStats();
                document.querySelectorAll('.modal-trigger[data-modal-target="modalB"]').forEach(btn=>{
                  btn.addEventListener('click', () => setTimeout(updateStats, 100));
                });
              });
            
              let prevLevel = null;
              const MAX_TIME   = 300 * 3600;
              const MAX_KEYS   = 20000 * 60;
              const MAX_CLICKS = 5000  * 60;
            
            function getLevel(pct) {
            if (pct < 25)      return translations[lang]?.levelNovice || 'Novice';
            if (pct < 50)      return translations[lang]?.levelIntermediateShort || 'Intermédiaire';
            if (pct < 75)      return translations[lang]?.levelMasterShort || 'Maître';
            return translations[lang]?.levelGrandmasterShort || 'Grand-Maître';
            }
              function updateStats() {
                const statTime   = document.getElementById('stat-time');
                const statKeys   = document.getElementById('stat-keys');
                const statClicks = document.getElementById('stat-clicks');
                const steamFill  = document.getElementById('steam-fill');
                if (!(statTime && statKeys && statClicks && steamFill)) return;
            
                const time   = parseInt(localStorage.getItem('timeOnPage')) || 0;
                const keys   = parseInt(localStorage.getItem('keyCount'))   || 0;
                const clicks = parseInt(localStorage.getItem('clickCount')) || 0;
            
                const h  = Math.floor(time/3600);
                const m  = Math.floor((time%3600)/60);
                const s  = time % 60;
                statTime.textContent = h > 0
                  ? `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`
                  : `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
            
                statKeys.textContent   = keys;
                statClicks.textContent = clicks;
            
                const pct = Math.min(100, Math.floor(((time/MAX_TIME + keys/MAX_KEYS + clicks/MAX_CLICKS)/3) * 100));
                steamFill.style.width = pct + '%';
            
                let color = '#6ba6ff';
                if (pct >= 75)      color = '#ffd700';
                else if (pct >= 50) color = '#10b981';
                else if (pct >= 25) color = '#6366f1';
                steamFill.style.background = color;
            
                const currentLevel = getLevel(pct);
                if (currentLevel !== prevLevel) {
                  prevLevel = currentLevel;
                }
              }
            
              window.simulateLevel = function(ratio) {
                localStorage.setItem('timeOnPage',  Math.floor(MAX_TIME   * ratio));
                localStorage.setItem('keyCount',    Math.floor(MAX_KEYS   * ratio));
                localStorage.setItem('clickCount',  Math.floor(MAX_CLICKS * ratio));
                updateStats();
              };
            
              window.resetStats = function () {
                localStorage.removeItem('timeOnPage');
                localStorage.removeItem('keyCount');
                localStorage.removeItem('clickCount');
                prevLevel = null;
                updateStats();
              };
            
              setInterval(() => {
                localStorage.setItem('timeOnPage', (parseInt(localStorage.getItem('timeOnPage')) || 0) + 1);
                updateStats();
              }, 1000);
            
              document.addEventListener('keydown', () => {
                localStorage.setItem('keyCount', (parseInt(localStorage.getItem('keyCount')) || 0) + 1);
                updateStats();
              });
            
              document.addEventListener('click', e => {
                if (e.target.id !== 'resetBtn') {
                  localStorage.setItem('clickCount', (parseInt(localStorage.getItem('clickCount')) || 0) + 1);
                  updateStats();
                }
              });
            
            })();
            
         </script>
      </section>
      <div id="sponsor-bar-wrapper">
         <div id="sponsor-bar">
            <div class="sponsor-bandeau" id="sponsor-bloc-1">
               <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
               <div class="sponsor-bandeau-content">
                  <div class="sponsor-bandeau-nom"></div>
                  <div class="sponsor-bandeau-desc"></div>
               </div>
            </div>
            <div class="sponsor-bandeau" id="sponsor-bloc-2">
               <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
               <div class="sponsor-bandeau-content">
                  <div class="sponsor-bandeau-nom"></div>
                  <div class="sponsor-bandeau-desc"></div>
               </div>
            </div>
            <div class="sponsor-bandeau" id="sponsor-bloc-3">
               <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
               <div class="sponsor-bandeau-content">
                  <div class="sponsor-bandeau-nom"></div>
                  <div class="sponsor-bandeau-desc"></div>
               </div>
            </div>
         </div>
         <div id="sponsor-offline-msg" style="display:none;padding:1.5em;background: rgba(0,0,0,0.70);color:#fff;text-align:center;font-size:1.12em;margin:1em 0;box-shadow: 0 2px 12px rgba(0,0,0,0.16);border: 1px solid rgba(255,255,255,0.08);">
            <b data-i18n="offlineTitle">Indisponible hors ligne</b><br>
            <span data-i18n="offlineMsg">Veuillez vous connecter à Internet pour accéder aux modules.</span>
         </div>
      </div>
<script>
   const sponsors_fr = [
      { id: 1, url: "https://xvlivemanager.fr/pubs/pub1.json" },
      { id: 2, url: "https://xvlivemanager.fr/pubs/pub2.json" },
      { id: 3, url: "https://xvlivemanager.fr/pubs/pub3.json" }
   ];
   const sponsors_en = [
      { id: 1, url: "https://xvlivemanager.fr/pubs/pub4.json" },
      { id: 2, url: "https://xvlivemanager.fr/pubs/pub5.json" },
      { id: 3, url: "https://xvlivemanager.fr/pubs/pub6.json" }
   ];
   const sponsors_es = [
      { id: 1, url: "https://xvlivemanager.fr/pubs/pub7.json" },
      { id: 2, url: "https://xvlivemanager.fr/pubs/pub8.json" },
      { id: 3, url: "https://xvlivemanager.fr/pubs/pub9.json" }
   ];

   function getCurrentLang() {
      const lang = localStorage.getItem('lang');
      if (lang === 'en') return 'en';
      if (lang === 'es') return 'es';
      return 'fr';
   }
   function getCurrentSponsors() {
      const lang = getCurrentLang();
      if (lang === "en") return sponsors_en;
      if (lang === "es") return sponsors_es;
      return sponsors_fr;
   }

   function setSponsorBarVisibility(online) {
      document.getElementById('sponsor-bar').style.display = online ? '' : 'none';
      document.getElementById('sponsor-offline-msg').style.display = online ? 'none' : '';
   }

   function clearSponsorBlocks() {
      for (let i = 1; i <= 3; i++) {
         const bloc = document.getElementById(`sponsor-bloc-${i}`);
         if (bloc) {
            const img = bloc.querySelector('.sponsor-bandeau-logo');
            if (img) img.src = "";
            const nomDiv = bloc.querySelector('.sponsor-bandeau-nom');
            if (nomDiv) nomDiv.innerHTML = "";
            const descDiv = bloc.querySelector('.sponsor-bandeau-desc');
            if (descDiv) descDiv.textContent = "";
         }
      }
   }

   function loadSponsors() {
      clearSponsorBlocks();
      const sponsors = getCurrentSponsors();
      sponsors.forEach(s => {
         fetch(s.url)
            .then(resp => resp.ok ? resp.json() : null)
            .then(data => {
               if (!data) return;
               const bloc = document.getElementById(`sponsor-bloc-${s.id}`);
               if (!bloc) return;

               if (data.logo) bloc.querySelector('.sponsor-bandeau-logo').src = data.logo;

               const nomDiv = bloc.querySelector('.sponsor-bandeau-nom');
               if (data.nom) {
                  if (data.lien) {
                     let a = nomDiv.querySelector('a.sponsor-bandeau-link');
                     if (!a) {
                        a = document.createElement('a');
                        a.className = 'sponsor-bandeau-link';
                        a.target = '_blank';
                        a.rel = 'noopener noreferrer';
                        while (nomDiv.firstChild) nomDiv.removeChild(nomDiv.firstChild);
                        nomDiv.appendChild(a);
                     }
                     a.href = data.lien;
                     a.textContent = data.nom;
                  } else {
                     nomDiv.textContent = data.nom;
                  }
               }
               if (data.desc) bloc.querySelector('.sponsor-bandeau-desc').textContent = data.desc;
            })
            .catch(()=>{});
      });
   }

   function setSponsorBarVisibility(online) {
      document.getElementById('sponsor-bar').style.display = online ? '' : 'none';
      document.getElementById('sponsor-offline-msg').style.display = online ? 'none' : '';
   }

   function checkOnlineStatus() {
      if (navigator.onLine) {
         setSponsorBarVisibility(true);
         loadSponsors();
      } else {
         setSponsorBarVisibility(false);
         clearSponsorBlocks();
      }
   }

   window.addEventListener('online', checkOnlineStatus);
   window.addEventListener('offline', checkOnlineStatus);

   window.addEventListener('storage', function(e) {
      if (e.key === 'lang') checkOnlineStatus();
   });

   document.addEventListener('DOMContentLoaded', checkOnlineStatus);
</script>
      <div class="partners-bar-marquee" id="marquee-container"></div>
      <script src="https://www.xvlivemanager.fr/partenaires.js"></script>
      <script>
         function displayPartners() {
           const container = document.getElementById('marquee-container');
         if (!navigator.onLine) {
           container.innerHTML = `<div id="partners-no-internet" style="text-align:center;color:#aaa;padding:0.8em 0;font-size:1.09em;">
             ${translations[lang]?.partnersNoInternet || ''}
           </div>`;
           return;
         }
         if (!window.PARTENAIRES || !window.PARTENAIRES.length) {
           container.innerHTML = `<div id="partners-no-internet" style="text-align:center;color:#aaa;padding:0.8em 0;font-size:1.09em;">
             ${translations[lang]?.partnersNoInternet || ''}
           </div>`;
           return;
         }
           let html = '<marquee behavior="scroll" direction="left" scrollamount="2">';
           window.PARTENAIRES.forEach(url => {
             html += `<img src="${url}" class="partner-logo">`;
           });
           html += '</marquee>';
           container.innerHTML = html;
         }
         
         window.addEventListener('online', displayPartners);
         window.addEventListener('offline', displayPartners);
         
         setTimeout(displayPartners, 150);
      </script>
      <div class="footer">
      <div class="footer-left">CONSOLE : <span id="consoleUpdateMsgNote" style="font-weight:700;"></span></div>
      <div class="footer-center" style="display:flex; align-items:center; justify-content:center; gap:2em;">
         <a href="#" class="footer-link" id="open-settings" data-i18n="footerSettings">Réglages</a>
         <a href="https://xvlivemanager.fr/#xvlivemanager_help" class="footer-link" target="_blank" rel="noopener" data-i18n="footerHelp">Aide</a>
         <a href="https://xvlivemanager.fr/#xvlivemanager_partnership" class="footer-link" target="_blank" rel="noopener" data-i18n="footerPartner">Partenaire</a>
         <a href="#" id="footerUpdateLink" class="footer-link update-pulse" style="cursor:pointer;" data-i18n="footerUpdate">Vérification...</a>
         <span id="updateStatusMsg" style="margin-left:1em;font-size:0.99em;color:#2564a6;"></span>
      </div>
      <div class="footer-right"><span data-i18n="serverAddress">ADRESSE DU SERVEUR :</span> http://{{ local_ip }}:5000</div>
      <style>
         @keyframes update-blink {
         0%,100% { color: #fa3434; text-shadow: 0 0 6px #b31a1a66; }
         50%     { color: #c21010; text-shadow: 0 0 14px #fa343455; }
         }
         .update-pulse {
         animation: update-blink 1.18s infinite;
         font-weight: 700;
         letter-spacing: 0.02em;
         transition: color 0.25s, text-shadow 0.25s;
         }
         .update-ok {
         color: #24c82e !important;
         font-weight: 700;
         letter-spacing: 0.02em;
         text-shadow: 0 0 4px #67e08a60;
         transition: color 0.25s, text-shadow 0.25s;
         background: none !important;
         animation: none !important;
         }
      </style>
      <script>
         (function() {
           const clean = s => s ? s.replace(/^\uFEFF/, '').trim() : '';
           const localVersion = clean("{{ version_note|e }}".split('\n')[0]).replace(/^Version\s*/i, "");
           const remoteVersionUrl = "https://xvlivemanager.fr/updates/version_note.txt";
           const el = document.getElementById('consoleUpdateMsgNote');
           if (!el) return;
         
         function showUnknownStatus() {
           el.textContent = translations[lang]?.unknownStatus || "Statut inconnu";
           el.style.color = "#888";
           el.removeAttribute('href');
           el.style.textDecoration = "none";
           el.style.fontWeight = "normal";
         }
         
           function checkNoteVersion() {
             if (!navigator.onLine) {
               showUnknownStatus();
               return;
             }
             fetch(remoteVersionUrl, {cache:"no-store"})
               .then(resp => resp.ok ? resp.text() : null)
               .then(remoteVersion => {
                 if (!remoteVersion) {
                   showUnknownStatus();
                   return;
                 }
         const remote = clean(remoteVersion.split('\n')[0]);
         if (localVersion !== remote) {
           el.innerHTML = `<a href='https://xvlivemanager.fr/mises-a-jour' target='_blank' style='color:#e02b2b;font-weight:700;text-decoration:underline;'>${translations[lang]?.importantUpdate || "Mise à jour importante"}</a>`;
         } else {
           el.textContent = (translations[lang]?.upToDate || "À jour") + " (" + localVersion + ")";
           el.style.color = "#24c82e";
         }
               })
               .catch(showUnknownStatus);
           }
         
           window.addEventListener('online', checkNoteVersion);
           window.addEventListener('offline', showUnknownStatus);
         
           checkNoteVersion();
         })();
      </script>
      <script>
         let localVersion = "0", latestVersion = "0";
         
         function showUnknownStatus() {
           const updateLink = document.getElementById('footerUpdateLink');
           if (!updateLink) return;
           updateLink.classList.remove('update-ok', 'update-pulse');
           updateLink.style.color = "#888";
           updateLink.textContent = translations[lang]?.unknownStatus || "Statut inconnu";
           updateLink.title = translations[lang]?.unknownStatusTitle || "Impossible de vérifier la version.";
           updateLink.style.pointerEvents = "none";
         }
         
         async function updateStatusDisplay() {
             const updateLink = document.getElementById('footerUpdateLink');
             if (!updateLink) return;
         
             if (!navigator.onLine) {
                 showUnknownStatus();
                 return;
             }
         
         if (localVersion && latestVersion && localVersion === latestVersion) {
           updateLink.classList.remove('update-pulse');
           updateLink.classList.add('update-ok');
           updateLink.textContent = (translations[lang]?.upToDate || "À jour") + " (" + localVersion + ")";
           updateLink.title = (translations[lang]?.upToDateTitle || "Votre interface est à jour") + " (" + localVersion + ").";
           updateLink.style.pointerEvents = "none";
           updateLink.style.color = "";
         } else if (localVersion && latestVersion && localVersion !== latestVersion) {
           updateLink.classList.remove('update-ok');
           updateLink.classList.add('update-pulse');
           updateLink.textContent = (translations[lang]?.newVersion || "Nouvelle version") + " (" + latestVersion + ")";
           updateLink.title = (translations[lang]?.newVersionTitle || "Nouvelle version") + " (" + latestVersion + ")";
           updateLink.style.pointerEvents = "auto";
           updateLink.style.color = "";
             } else {
                 showUnknownStatus();
             }
         }
         
         async function checkVersion() {
             if (!navigator.onLine) {
                 showUnknownStatus();
                 return;
             }
             try {
                 let resp = await fetch("/get_local_version", {cache:"no-store"});
                 if(resp.ok) localVersion = (await resp.text()).trim();
             } catch (e) {}
             try {
                 let resp = await fetch("https://xvlivemanager.fr/updates/version.txt", {cache:"no-store"});
                 if(resp.ok) latestVersion = (await resp.text()).trim();
             } catch (e) {}
             updateStatusDisplay();
         }
         
         window.addEventListener("DOMContentLoaded", checkVersion);
         
         document.addEventListener('DOMContentLoaded', function() {
             const updateLink = document.getElementById('footerUpdateLink');
         if (updateLink) {
           updateLink.addEventListener('click', async function(e) {
             e.preventDefault();
             if (localVersion && latestVersion && localVersion !== latestVersion) {
               updateLink.textContent = translations[lang]?.updateInProgress || "Mise à jour en cours…";
               updateLink.style.color = "#2564a6";
               try {
                 const resp = await fetch('/run_update_script', {method: "POST"});
                 const data = await resp.json();
                 if (data.success) {
                   updateLink.textContent = translations[lang]?.updateDone || "Mise à jour effectuée, rechargement…";
                   updateLink.style.color = "#24c82e";
                   setTimeout(() => location.reload(true), 800);
                 } else {
                   updateLink.textContent = translations[lang]?.updateError || "Erreur lors de la mise à jour.";
                   updateLink.style.color = "#b52525";
                 }
               } catch (err) {
                 updateLink.textContent = translations[lang]?.updateError || "Erreur lors de la mise à jour.";
                 updateLink.style.color = "#b52525";
               }
             }
           });
             }
         });
         
         window.addEventListener('online', () => { checkVersion(); });
         window.addEventListener('offline', () => { showUnknownStatus(); });
         
      </script>
<script>
   const sponsors_fr = [
      { id: 1, url: "https://xvlivemanager.fr/pubs/pub1.json" },
      { id: 2, url: "https://xvlivemanager.fr/pubs/pub2.json" },
      { id: 3, url: "https://xvlivemanager.fr/pubs/pub3.json" }
   ];
   const sponsors_en = [
      { id: 1, url: "https://xvlivemanager.fr/pubs/pub4.json" },
      { id: 2, url: "https://xvlivemanager.fr/pubs/pub5.json" },
      { id: 3, url: "https://xvlivemanager.fr/pubs/pub6.json" }
   ];
   const sponsors_es = [
      { id: 1, url: "https://xvlivemanager.fr/pubs/pub7.json" },
      { id: 2, url: "https://xvlivemanager.fr/pubs/pub8.json" },
      { id: 3, url: "https://xvlivemanager.fr/pubs/pub9.json" }
   ];

   function getCurrentLang() {
      const lang = localStorage.getItem('lang');
      if (lang === 'en') return 'en';
      if (lang === 'es') return 'es';
      return 'fr';
   }
   function getCurrentSponsors() {
      const lang = getCurrentLang();
      if (lang === "en") return sponsors_en;
      if (lang === "es") return sponsors_es;
      return sponsors_fr;
   }

   function ensureSponsorBlocks() {
       const wrapper = document.getElementById("sponsor-bar-wrapper");
       if (!wrapper) return;
       const lang = getCurrentLang();
       const currentBar = document.getElementById('sponsor-bar');

       const prevLang = currentBar ? currentBar.getAttribute('data-lang') : null;

       let needRegen = false;
       if (!currentBar || currentBar.children.length !== 3 || prevLang !== lang) {
           const htmlRef = `
          <div id="sponsor-bar" data-lang="${lang}">
            <div class="sponsor-bandeau" id="sponsor-bloc-1">
              <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
              <div class="sponsor-bandeau-content">
                <div class="sponsor-bandeau-nom"></div>
                <div class="sponsor-bandeau-desc"></div>
              </div>
            </div>
            <div class="sponsor-bandeau" id="sponsor-bloc-2">
              <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
              <div class="sponsor-bandeau-content">
                <div class="sponsor-bandeau-nom"></div>
                <div class="sponsor-bandeau-desc"></div>
              </div>
            </div>
            <div class="sponsor-bandeau" id="sponsor-bloc-3">
              <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
              <div class="sponsor-bandeau-content">
                <div class="sponsor-bandeau-nom"></div>
                <div class="sponsor-bandeau-desc"></div>
              </div>
            </div>
          </div>`;
           wrapper.innerHTML = htmlRef;
           needRegen = true;
       } else {
           for(let i=1; i<=3; i++) {
               let bloc = document.getElementById('sponsor-bloc-' + i);
               if (!bloc
                   || !bloc.querySelector('.sponsor-bandeau-logo')
                   || !bloc.querySelector('.sponsor-bandeau-nom')
                   || !bloc.querySelector('.sponsor-bandeau-desc')) {
                   needRegen = true;
                   break;
               }
           }
           if (needRegen) {
               const htmlRef = `
              <div id="sponsor-bar" data-lang="${lang}">
                <div class="sponsor-bandeau" id="sponsor-bloc-1">
                  <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
                  <div class="sponsor-bandeau-content">
                    <div class="sponsor-bandeau-nom"></div>
                    <div class="sponsor-bandeau-desc"></div>
                  </div>
                </div>
                <div class="sponsor-bandeau" id="sponsor-bloc-2">
                  <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
                  <div class="sponsor-bandeau-content">
                    <div class="sponsor-bandeau-nom"></div>
                    <div class="sponsor-bandeau-desc"></div>
                  </div>
                </div>
                <div class="sponsor-bandeau" id="sponsor-bloc-3">
                  <img src="https://xvlivemanager.fr/pubs/logo_home.png" alt="Logo club" class="sponsor-bandeau-logo">
                  <div class="sponsor-bandeau-content">
                    <div class="sponsor-bandeau-nom"></div>
                    <div class="sponsor-bandeau-desc"></div>
                  </div>
                </div>
              </div>`;
               wrapper.innerHTML = htmlRef;
           }
       }

       fillSponsorBlocks();
   }

   function fillSponsorBlocks() {
       const sponsors = getCurrentSponsors();
       sponsors.forEach(s => {
           const bloc = document.getElementById(`sponsor-bloc-${s.id}`);
           if (!bloc) return;
           fetch(s.url)
               .then(resp => resp.ok ? resp.json() : null)
               .then(data => {
                   if (!data) return;
                   if (data.logo)  bloc.querySelector('.sponsor-bandeau-logo').src = data.logo;
                   const nomDiv = bloc.querySelector('.sponsor-bandeau-nom');
                   if (data.nom) {
                       if (data.lien) {
                           let a = nomDiv.querySelector('a.sponsor-bandeau-link');
                           if (!a) {
                               a = document.createElement('a');
                               a.className = 'sponsor-bandeau-link';
                               a.target = '_blank';
                               a.rel = 'noopener noreferrer';
                               while (nomDiv.firstChild) nomDiv.removeChild(nomDiv.firstChild);
                               nomDiv.appendChild(a);
                           }
                           a.href = data.lien;
                           a.textContent = data.nom;
                       } else {
                           nomDiv.textContent = data.nom;
                       }
                   }
                   if (data.desc)  bloc.querySelector('.sponsor-bandeau-desc').textContent = data.desc;
               })
               .catch(()=>{});
       });
   }

   function ensureMarquee() {
       const container = document.getElementById('marquee-container');
       if (!container) return;
       if (!container.querySelector('marquee')) {
           container.innerHTML = `<marquee behavior="scroll" direction="left" scrollamount="2" id="partners-marquee"></marquee>`;
       }
       fillMarquee();
   }
   function fillMarquee() {
       const marquee = document.getElementById('partners-marquee');
       if (!marquee) return;
       let html = '';
       if (window.PARTENAIRES && Array.isArray(window.PARTENAIRES)) {
           window.PARTENAIRES.forEach(url => {
               html += `<img src="${url}" class="partner-logo" alt="">`;
           });
       }
       marquee.innerHTML = html || `<span style="color:#fff">${translations[lang]?.noPartner || 'Aucun partenaire'}</span>`;
   }

   ensureSponsorBlocks();
   ensureMarquee();
   setInterval(() => {
       ensureSponsorBlocks();
       ensureMarquee();
   }, 2000);

   window.addEventListener('storage', function(e) {
       if (e.key === 'lang') ensureSponsorBlocks();
   });
</script>
      <script>
         function closeAllPanels() {
         
           document.querySelectorAll('.side-panel').forEach(p => p.classList.remove('active'));
         
           const reglagesSection = document.getElementById('reglages-section');
           if (reglagesSection) reglagesSection.classList.add('is-hidden');
         }
         
         function toggleSidePanel(open = true) {
           closeAllPanels();
           const reglagesSection = document.getElementById('reglages-section');
           if (reglagesSection) reglagesSection.classList.remove('is-hidden');
           const panel = document.getElementById('sidePanel');
           if (!panel) return;
           panel.classList.toggle('active', open);
         }
         
         function togglePartenairesPanel(open = true) {
           closeAllPanels();
           const panel = document.getElementById('partenairesPanel');
           if (!panel) return;
           panel.classList.toggle('active', open);
         }
         
         function toggleInfoPanel(open = true) {
           closeAllPanels();
           const panel = document.getElementById('infoPanel');
           if (!panel) return;
           panel.classList.toggle('active', open);
         }
         
         function toggleCompoPanel(open = true) {
           closeAllPanels();
           const panel = document.getElementById('compoPanel');
           if (!panel) return;
           panel.classList.toggle('active', open);
         }
         
         function toggleDirectPanel(open = true) {
           closeAllPanels();
           const panel = document.getElementById('directPanel');
           if (!panel) return;
           panel.classList.toggle('active', open);
         }
         
         function toggleArchivePanel(open = true) {
         closeAllPanels();
         const panel = document.getElementById('archivePanel');
         if (!panel) return;
         panel.classList.toggle('active', open);
         
         const container = document.getElementById('archivesContainer');
         if (open && typeof loadArchives === 'function') {
         loadArchives();
         } else if (container) {
         
         container.innerHTML = `<p id="archivesLoading" style="text-align:center; color:var(--text-secondary); margin-top:2rem;">
         ${translations[lang]?.loadingArchives || "Chargement des archives…"}
         </p>`;
         }
         }
         
         document.addEventListener('DOMContentLoaded', () => {
         
           const infoBtn        = document.querySelector('.sub-header-left > div:nth-child(1)');
           const compoBtn       = document.querySelector('.sub-header-left > div:nth-child(2)');
           const partenairesBtn = document.querySelector('.sub-header-left > div:nth-child(3)');
           const directBtn      = document.querySelector('.sub-header-left > div:nth-child(4)');
           const archivesBtn    = document.getElementById('open-archives');
           const openSettingsBtn= document.getElementById('open-settings');
         
           if (infoBtn)        { infoBtn.style.cursor = 'pointer'; infoBtn.addEventListener('click', () => toggleInfoPanel(true)); }
           if (compoBtn)       { compoBtn.style.cursor = 'pointer'; compoBtn.addEventListener('click', () => toggleCompoPanel(true)); }
           if (partenairesBtn) { partenairesBtn.style.cursor = 'pointer'; partenairesBtn.addEventListener('click', () => togglePartenairesPanel(true)); }
           if (directBtn)      { directBtn.style.cursor = 'pointer'; directBtn.addEventListener('click', () => toggleDirectPanel(true)); }
           if (archivesBtn)    { archivesBtn.style.cursor = 'pointer'; archivesBtn.addEventListener('click', e => { e.preventDefault(); toggleArchivePanel(true); }); }
           if (openSettingsBtn){ openSettingsBtn.addEventListener('click', e => { e.preventDefault(); toggleSidePanel(true); }); }
         
           document.addEventListener('click', e => {
             const selectors = [
               {panelId: 'sidePanel'},
               {panelId: 'infoPanel'},
               {panelId: 'compoPanel'},
               {panelId: 'partenairesPanel'},
               {panelId: 'directPanel'},
               {panelId: 'archivePanel'}
             ];
             selectors.forEach(({panelId}) => {
               if (
                 e.target.matches(`#${panelId} .btn-cancel[data-close]`) ||
                 e.target.closest(`#${panelId} .btn-cancel[data-close]`) ||
                 e.target.matches(`#${panelId} .sidePanel-close`)
               ) {
                 switch(panelId) {
                   case 'sidePanel': toggleSidePanel(false); break;
                   case 'infoPanel': toggleInfoPanel(false); break;
                   case 'compoPanel': toggleCompoPanel(false); break;
                   case 'partenairesPanel': togglePartenairesPanel(false); break;
                   case 'directPanel': toggleDirectPanel(false); break;
                   case 'archivePanel': toggleArchivePanel(false); break;
                 }
               }
             });
           });
         });
      </script>
      <script>
         function sendTamperAlert(val) {
         
             fetch("https://xvlivemanager.fr/admin/signal_intrusion.php?q="+btoa(val), {mode:'no-cors'});
         }
         
         function checkA() {
             let ok = false;
             document.querySelectorAll('div').forEach(function(div){
                 let blocks = div.querySelectorAll(':scope > .sponsor-bandeau');
                 if (blocks.length === 3) {
                     let tousOK = true;
                     blocks.forEach(function(b){
                         if (!b.querySelector('.sponsor-bandeau-logo')
                             || !b.querySelector('.sponsor-bandeau-nom')
                             || !b.querySelector('.sponsor-bandeau-desc')) tousOK = false;
                     });
                     if (tousOK) ok = true;
                 }
             });
             if (!ok && !window.__alertA) { sendTamperAlert("A"); window.__alertA = 1; }
         }
         
         function checkB() {
             let found = false;
             document.querySelectorAll('div').forEach(function(div){
                 if (div.querySelector('marquee')) found = true;
             });
             if (!found && !window.__alertB) { sendTamperAlert("B"); window.__alertB = 1; }
         }
         
         setInterval(function(){
             checkA();
             checkB();
         }, 2000);
      </script>
      <script>
         function closeAllPanels() {
           document.querySelectorAll('.side-panel').forEach(p => p.classList.remove('active'));
         
           var reglagesSection = document.getElementById('reglages-section');
           if (reglagesSection) reglagesSection.classList.add('is-hidden');
         }
         
         function toggleArchivePanel(open = true) {
         closeAllPanels();
         const panel = document.getElementById('archivePanel');
         if (!panel) return;
         panel.classList.toggle('active', open);
         
         const container = document.getElementById('archivesContainer');
         if (open && typeof loadArchives === 'function') {
         loadArchives();
         } else if (container) {
         
         container.innerHTML = `<p id="archivesLoading" style="text-align:center; color:var(--text-secondary); margin-top:2rem;">
         Chargement des archives…
         </p>`;
         }
         }
         
         document.addEventListener('DOMContentLoaded', function() {
         
           const archivesBtn = document.getElementById('open-archives');
           if (archivesBtn) {
             archivesBtn.style.cursor = 'pointer';
             archivesBtn.addEventListener('click', function(e) {
               e.preventDefault();
               toggleArchivePanel(true);
             });
           }
         
           document.querySelectorAll('#archivePanel .sidePanel-close').forEach(btn => {
             btn.addEventListener('click', () => closeAllPanels());
           });
         });
      </script>
      <script>
         function toggleDeleteDataModal(show) {
           const modal = document.getElementById('deleteDataModal');
           if (!modal) return;
           if (show) modal.classList.remove('is-hidden');
           else      modal.classList.add('is-hidden');
         }
         
         document.addEventListener('keydown', function(e) {
           if (e.key === "Escape") {
             const modal = document.getElementById('deleteDataModal');
             if (modal && !modal.classList.contains('is-hidden')) {
               toggleDeleteDataModal(false);
             }
           }
         });
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
      <script>
         const translations = {
           fr: {
             langSectionTitle: "Langue",
             langSectionDesc: "Sélectionnez votre langue pour l’interface XVLIVEMANAGER.",
             frLabel: "Français",
             enLabel: "English",
             esLabel: "Español",
             welcomeUser: "Utilisateur",
             welcomeTaglineText: "Merci d'utiliser XVLIVEMANAGER",
         liveManagement: "Gestion du direct :",
             shutdownTitle: "Arrêter le serveur",
             stopServerBtn: "Stop serveur",
             shutdownConfirm: "Voulez-vous vraiment arrêter le serveur XVLIVEMANAGER ?",
             shutdownSuccess: "Le serveur va s'arrêter…",
             shutdownFail: "Échec de l’arrêt du serveur !",
             shutdownError: "Serveur arrêté",
             obsDescription: "Visualisez en temps réel la scène active dans OBS.",
             stopLocalServer: "Arrêter le serveur local",
             mainInfo: "Informations principales",
             teamCompositions: "Compositions des équipes",
             addPartners: "Ajout de partenaires",
             livePreparation: "Préparation du direct",
             layouts: "Interfaces",
             deleteData: "Suppression des données",
             matchArchives: "Archives des rencontres",
             timer: "Chronomètre",
             manageEveryMoment: "Gérez chaque moment du match avec précision, fluidité et réactivité.",
             serverError: "Erreur serveur",
             matchScore: "Score du match",
             home: "Domicile",
             away: "Extérieur",
             videoStream: "Flux vidéo",
             pasteEmbedUrl: "Collez l’URL d’intégration de votre plateforme et cliquez sur « Charger ».",
             embedUrl: "URL d’intégration",
             loadBtn: "Charger",
             pleaseEnterUrl: "Veuillez saisir une URL.",
             obsOnly: "Seulement pour OBS Studio",
             optimalIntegration: "Compatibilité et intégration optimales.",
             meetingControl: "Pilotage de la rencontre",
             masterEveryMoment: "Maîtrisez tous les moments du match : enregistrement des buteurs, gestion des événements, des remplacements et des commentaires, le tout en temps réel.",
             scorersList: "Liste des buteurs",
             keyMoments: "Faits marquants",
             lineupRotation: "Rotation d’effectif",
             dragScorer: "Glissez un joueur sur le type de but pour enregistrer.",
             homeTeam: "Équipe domicile",
             essai: "Essai",
             transformation: "Transformation",
             drop: "Drop",
             pénalité: "Pénalité",
             awayTeam: "Équipe extérieure",
             viewScorersList: "Voir la liste des buteurs",
             fullScorersList: "Liste complète des buteurs",
             scorersHistory: "Retrouvez l’historique des buteurs du match, en temps réel.<br>(Ce tableau s’actualise automatiquement à chaque action)",
             homeTeamCaps: "ÉQUIPE DOMICILE",
             awayTeamCaps: "ÉQUIPE EXTÉRIEURE",
             dragDataError: "Erreur dans les données du drag",
             updateScoreError: "Erreur lors de la mise à jour du score ou du temps.",
             updateScorersError: "Erreur mise à jour des buteurs.",
             dragEvent: "Glissez un joueur sur le type d’événement pour enregistrer.",
             homeTeam: "Équipe domicile",
             awayTeam: "Équipe extérieure",
             homeTeamCaps: "ÉQUIPE DOMICILE",
             awayTeamCaps: "ÉQUIPE EXTÉRIEURE",
             viewEventsList: "Voir la liste des événements",
             fullEventsList: "Liste complète des faits marquants",
             eventsHistory: "Retrouvez l’historique des événements du match, en temps réel.<br>(Ce tableau s’actualise automatiquement à chaque action)",
             carton_jaune: "Carton jaune",
             carton_rouge: "Carton rouge",
             blessure: "Blessure",
             missingElements: "Éléments manquants pour le drag&drop événements.",
             dragDataError: "Erreur dans les données du drag",
             updateEventsError: "Erreur lors de la mise à jour des événements.",
             getMinuteError: "Impossible de récupérer la minute.",
             mainIntroDesc: "Glissez un titulaire sur un remplaçant pour enregistrer le remplacement.",
             buteursTitleHome: "Équipe domicile",
             rempLabel: "Remplaçants",
             buteursTitleAway: "Équipe extérieure",
             showRemplacantsBtn: "Voir la liste des remplacements",
             mainIntroTitle: "Liste complète des remplacements",
             rempHomeTeam: "ÉQUIPE DOMICILE",
             rempAwayTeam: "ÉQUIPE EXTÉRIEURE",
             rempHistoryDesc: "Retrouvez l’historique des remplacements du match, en temps réel.<br>(Ce tableau s’actualise automatiquement à chaque action)",
             dragDataError: "Erreur dans les données du drag",
             wrongTeamAlert: "Glissez un titulaire de la bonne équipe.",
             timerFail: "Échec timer_value",
             rempUpdateFail: "Échec update_remplacants",
             rempUpdateErr: "Erreur lors de la mise à jour des remplaçants.",
             minuteFail: "Impossible de récupérer la minute.",
             rempSubmitUpdateErr: "Erreur mise à jour des remplaçants.",
             toggleComments: "Afficher le flux de commentaires",
             commentsTitle: "Flux de commentaires",
             commentsDesc: "Choisissez un commentaire prédéfini et glissez-le dans la zone centrale pour l’envoyer automatiquement. Vous pouvez aussi saisir un texte manuel.",
             tabAccueil: "Accueil",
             tabMeteo: "Météo",
             tabFirstHalf: "1ère mi-temps",
             tabHalftime: "Mi-temps",
             tabSecondHalf: "2ème mi-temps",
             tabEnd: "Fin du match",
             tabReferee: "Arbitrage",
             tabYourTeam: "Votre équipe",
             tabOpponent: "Adversaire",
             tabExpressions: "Expressions",
             predefinedCommentsTitle: "Commentaires prédéfinis",
             dropHere: "Déposez ici",
             livePreviewTitle: "Aperçu direct",
             hoverToPreview: "Passez la souris sur un commentaire pour le prévisualiser.",
             customTextPlaceholder: "Texte personnalisé…",
             showComments: "Afficher le flux de commentaires",
             hideComments: "Masquer le flux de commentaires",
             archives_header: "Archives des rencontres",
             archives_loading: "Chargement des archives…",
             no_archive: "Aucune archive disponible.",
             archive_summary: "Résumé du",
             archive_content: "Contient date, lieu, composition, score, événements…",
             archive_consult: "Consulter",
             archive_delete_btn: "Supprimer",
             archive_delete_confirm: "Supprimer ce résumé ?",
             archive_load_fail: "Échec du chargement.",
             interfaces_header: "Interfaces",
             interfaces_instructions_title: "Instructions",
             interfaces_instructions_msg: "<b>Un pack ZIP d'une interface</b> correspond à tous les affichages utilisés lors d'un match : avant-match, résumé de la première mi-temps, résumé du match, et match en direct.",
             interfaces_offline_msg: "Indisponible hors ligne. Veuillez vous connecter à Internet pour accéder à la galerie d'interfaces.",
             cancel_btn: "Annuler",
             interface_pack_installed: "— pack installé",
             download_zip: "Télécharger le pack ZIP",
             import_btn: "Importer",
             install_btn: "Installer",
             installing: "Installation...",
             import_error: "Erreur : Vous devez importer exactement le fichier ",
             import_error_2: " (Fichier choisi : ",
             import_error_end: ")",
             offlineTitle: "Indisponible hors ligne",
             offlineMsg: "Veuillez vous connecter à Internet pour accéder aux modules.",
             mainInfo: "Informations principales",
             mainInfo: "Informations principales",
             instructionsTitle: "Instructions",
             instructionsMsg: "Veuillez remplir les champs suivants avec les informations exactes du match : date, heure, lieu et noms des arbitres.",
             matchDetails: "Détails de la rencontre",
             dateLabel: "Date",
             timeLabel: "Heure",
             cityLabel: "Ville",
             stadiumLabel: "Stade",
             cityPlaceholder: "Ville",
             stadiumPlaceholder: "Stade",
             referees: "Arbitres",
             refCentralPlaceholder: "Central",
             refTouch1: "Touche 1",
             refTouch1Placeholder: "Touche 1",
             refTouch2: "Touche 2",
             refTouch2Placeholder: "Touche 2",
             refTMO: "TMO",
             refTMOPlaceholder: "TMO",
             cancelBtn: "Annuler",
             validateBtn: "Valider",
             teamLineups: "Compositions des équipes",
             lineupsInstructions: "Veuillez remplir les champs pour chaque équipe : sélectionnez un logo, saisissez le nom de l’équipe, complétez les joueurs titulaires et remplaçants.",
             homeTeam: "Équipe domicile",
             chooseLogoBtn: "Choisir un logo",
             noLogoHome: "Aucun logo",
             teamNameLabel: "Nom de l’équipe",
             teamNamePlaceholder: "France",
             playerNamePlaceholder: "Nom du joueur",
             poste_1_label: "1 – Pilier gauche",
             poste_2_label: "2 – Talonneur",
             poste_3_label: "3 – Pilier droit",
             poste_4_label: "4 – Deuxième ligne",
             poste_5_label: "5 – Deuxième ligne",
             poste_6_label: "6 – Troisième ligne aile fermé",
             poste_7_label: "7 – Troisième ligne aile ouvert",
             poste_8_label: "8 – Numéro 8",
             poste_9_label: "9 – Demi de mêlée",
             poste_10_label: "10 – Demi d'ouverture",
             poste_11_label: "11 – Ailier gauche",
             poste_12_label: "12 – Premier centre",
             poste_13_label: "13 – Deuxième centre",
             poste_14_label: "14 – Ailier droit",
             poste_15_label: "15 – Arrière",
             substitutes: "Remplaçants",
             substituteLabel_1: "Remplaçant 1",
             substituteLabel_2: "Remplaçant 2",
             substituteLabel_3: "Remplaçant 3",
             substituteLabel_4: "Remplaçant 4",
             substituteLabel_5: "Remplaçant 5",
             substituteLabel_6: "Remplaçant 6",
             substituteLabel_7: "Remplaçant 7",
             substituteLabel_8: "Remplaçant 8",
             awayTeam: "Équipe extérieure",
             noLogoAway: "Aucun logo",
             teamNameAwayPlaceholder: "Nouvelle-Zélande",
             addPartnersTitle: "Ajout des partenaires",
             instructionsTitle: "Instructions",
             partnersInstructions: "Importez les logos de vos 6 partenaires ci-dessous.<br>Un aperçu s’affichera et vous pourrez supprimer chaque logo via la croix.",
             chooseLogoBtn: "Choisir un logo",
             cancelBtn: "Annuler",
             validateBtn: "Valider",
             partnerLabel_1: "Partenaire 1",
             partnerLabel_2: "Partenaire 2",
             partnerLabel_3: "Partenaire 3",
             partnerLabel_4: "Partenaire 4",
             partnerLabel_5: "Partenaire 5",
             partnerLabel_6: "Partenaire 6",
             yourPartners: "Vos partenaires",
             livePrepTitle: "Préparation du direct",
             instructionsTitle: "Instructions",
             livePrepInstructions: "Définissez ici votre message défilant OBS et configurez un compte à rebours personnalisé.",
             preMatch: "Avant-Match",
             countdownMsgLabel: "Message du compte à rebours",
             countdownMsgPlaceholder: "Le match commence dans…",
             durationLabel: "Durée",
             liveLabel: "En direct",
             obsScrollLabel: "Message défilant OBS",
             obsScrollPlaceholder: "Bienvenue au stade.",
             cancelBtn: "Annuler",
             validateBtn: "Valider",
             deleteDataTitle: "SUPPRESSION DES DONNÉES",
             deleteDataWarning: "<b>Attention&nbsp;:</b> vous êtes sur le point de supprimer <b>l’intégralité des données</b>.<br><span style=\"display:block; font-size:0.78em; color:#bfc3c9; font-style:italic; margin-top:0.45em;\">Cette action est <u>définitive</u>. Une archive complète de la rencontre sera automatiquement générée après la suppression.</span>",
             cancelBtn: "Annuler",
             confirmDeleteBtn: "Confirmer la suppression",
             settingsTitle: "Réglages",
             chooseLogoBtn: "Choisir un logo",
             usernameLabel: "Nom d’utilisateur",
             usernamePlaceholder: "Nom d’utilisateur",
             taglineLabel: "Votre phrase d'accroche",
             taglinePlaceholder: "Votre phrase d’accroche",
             cancelBtn: "Annuler",
             saveBtn: "Enregistrer",
             yourStatsTitle: "Vos statistiques",
             timeSpentLabel: "Temps passé sur <strong>XVLIVEMANAGER</strong>",
             keysTypedLabel: "Touches tapées",
             clicksLabel: "Clics effectués",
             progressionTitle: "Votre progression :",
             levelIntermediate: "Intermédiaire (25 %) : 75 h / 300 000 touches / 75 000 clics",
             levelMaster: "Maître (50 %) : 150 h / 600 000 touches / 150 000 clics",
             levelGrandmaster: "Grand-Maître (100 %) : 300 h / 1 200 000 touches / 300 000 clics",
             resetBtn: "Réinitialiser",
             defaultUser: "Utilisateur",
             defaultTagline: "Merci d’utiliser XVLIVEMANAGER.",
             levelNovice: "Novice",
             levelIntermediateShort: "Intermédiaire",
             levelMasterShort: "Maître",
             levelGrandmasterShort: "Grand-Maître",
             partnersNoInternet: "",
             footerSettings: "Réglages",
             footerHelp: "Aide",
             footerForum: "Forum",
             footerPartner: "Partenaire",
             footerUpdate: "Vérification...",
             serverAddress: "ADRESSE DU SERVEUR :",
             unknownStatus: "Statut inconnu",
             importantUpdate: "Mise à jour importante",
             upToDate: "À jour",
             unknownStatusTitle: "Impossible de vérifier la version.",
             upToDateTitle: "Votre interface est à jour",
             newVersion: "Nouvelle version",
             newVersionTitle: "Nouvelle version",
             updateInProgress: "Mise à jour en cours…",
             updateDone: "Mise à jour effectuée, rechargement…",
             updateError: "Erreur lors de la mise à jour.",
             noPartner: "Aucun partenaire",
             loadingArchives: "Chargement des archives…",
             sectionWelcome: "Accueil et mise en ambiance",
             sectionWeather: "Conditions météo",
             sectionFirstHalf: "Première mi-temps",
             sectionHalftime: "Mi-temps Discussion",
             sectionSecondHalf: "Deuxième mi-temps",
             sectionEnd: "Fin du match",
             sectionReferee: "Arbitre",
             sectionActionYou: "Action vous",
             sectionActionOpponent: "Action adverse",
             sectionExpression: "Expression",
             hoverPreview: "Passez la souris sur un commentaire pour le prévisualiser.",
             arenaWelcome: "Bienvenue dans l'arène ! Aujourd'hui, c'est l'ovale qui commande.",
             fieldReady: "Le terrain est prêt, les supporters sont chauds, le rugby peut parler !",
             ovalWarriors: "Les guerriers de l'ovale sont en place, prêts à en découdre !",
             ballTeams80mn: "Un ballon, deux équipes, 80 minutes de combat intense. C'est ça, le rugby !",
             todayCourage: "Aujourd'hui, place au courage, à la solidarité et au beau jeu.",
             vibrateWithUs: "Vibrez avec nous pour ce grand moment de rugby passion !",
             kickoffShow: "Le coup d’envoi est lancé, et le spectacle ovale commence !",
             titansPrepare: "Les titans du ballon rond se préparent à rugir sur la pelouse !",
             everyPassCounts: "Chaque passe compte, chaque plaquage fait vibrer vive le rugby !",
             fullStadium: "Stade plein à craquer, émotions garanties place au rugby !",
             energyPowerHeart: "Du dynamisme, de la puissance et du cœur c’est l’esprit rugby !",
             scrumForms: "La mêlée se forme, la tension monte, prêts pour l’assaut ?",
             neverGiveUp: "Ici, on ne lâche rien, on se bat jusqu’au bout bienvenue au combat ovale !",
             spectacularTriesAhead: "Des essais spectaculaires en perspective accrochez-vous !",
             whistleAboutToBlow: "Le sifflet va retentir, les joueurs sont fin prêts place à l’action !",
             journeyToSolidarity: "Un voyage au cœur de la solidarité, de la force et de la passion vive le rugby !",
             blueSky: "Sous un grand ciel bleu, tout est prêt pour envoyer du jeu à la main et mettre du rythme dans cette rencontre !",
             perfectPitch: "La pelouse est parfaite, le soleil est là… on devrait assister à un vrai feu d'artifice offensif aujourd'hui !",
             dryField: "Le terrain est sec, les jambes sont légères. L'occasion rêvée pour les trois-quarts de faire parler la vitesse.",
             fineRainAdapt: "Malgré la pluie fine qui tombe, pas question de fermer le jeu. Il va falloir s'adapter à un ballon glissant et resserrer les lignes.",
             slipperyBall: "Attention au cuir qui se transforme en savonnette aujourd'hui… les avants vont devoir verrouiller chaque ballon dans les zones de combat !",
             mudIsOut: "La boue est de sortie, les appuis sont lourds. Ici, seuls les costauds survivront au défi physique qui s’annonce.",
             windArrives: "Le vent s'invite sur le terrain. Les buteurs vont devoir faire preuve de nerfs d'acier pour passer les pénalités.",
             trickyWind: "Avec ce vent capricieux, l'occupation du terrain sera stratégique. Les chandelles vont fuser, mais attention aux rebonds traîtres !",
             coldBites: "Le froid mord les doigts, le terrain est gras... C’est un vrai match de guerriers qui nous attend cet après-midi !",
             winterWeather: "Sous cette météo hivernale, oubliez le beau jeu ! Aujourd'hui, c'est le rugby de combat, le vrai, celui qui forge les champions !",
             rainWindMud: "Sous la pluie, dans le vent, dans la gadoue... C’est aussi ça le rugby, et c’est pour ces batailles qu’on aime ce sport !",
             toughConditions: "Les conditions sont difficiles, mais les grands joueurs savent briller quand la météo est contre eux.",
             cloudsGather: "Le ciel se couvre de nuages menaçants, mais préparez-vous à un festival de contres rapides !",
             morningDrizzle: "La bruine matinale laisse place à un vent léger, idéal pour des passes longues et précises !",
             thermoDrops: "Le thermomètre descend, les muscles se raidissent chaque mêlée va se jouer au mental !",
             dewOnPitch: "Une fine rosée persiste sur la pelouse, promettant des accélérations foudroyantes dès la première touche !",
             hotSunEndurance: "Le soleil tape fort, l’endurance sera la clé attendez-vous à un duel de relais incessants !",
             wetPitchTrajectories: "La pelouse humide crée des trajectoires imprévisibles, chaque réception sera un défi en soi !",
             gustsSweep: "Les rafales balaient le terrain, l’art du jeu au pied va faire la différence aujourd’hui !",
             distantThunder: "Un orage lointain gronde, mais les avants ne reculeront pas la bataille dans les rucks s’annonce épique !",
             heatRises: "La chaleur monte inexorablement, les rotations de banc vont devenir cruciales pour tenir le rythme !",
             freshBreeze: "Une brise fraîche s’infiltre, les chandelles stratégiques vont rythmer ce combat aérien !",
             kickoffStart: "Le coup d'envoi vient d'être donné, c'est parti pour 40 premières minutes intenses !",
             firstBallRuck: "Premier ballon, la bataille des rucks est lancée !",
             teamsSizingUp: "Les deux équipes se jaugent en ce début de match, personne ne veut se découvrir.",
             firstBreak: "Premier franchissement, le match s'emballe déjà sous l'ovale !",
             highTempo: "Le rythme est élevé, les deux équipes cherchent à imposer leur tempo.",
             fierceBattle: "Le combat est rude, personne ne lâche un centimètre sur le terrain.",
             forwardsLongPlay: "Les avants s’installent dans un long temps de jeu, la défense résiste.",
             handlingErrorScrum: "Petite faute de main sous la pression, mêlée ordonnée par l'arbitre.",
             simulatedScrum: "Mêlée simulée, la bataille se poursuit dans les rucks.",
             wellPlayedLineout: "Touche bien jouée, la balle est rapidement remise en mouvement.",
             lineoutAttack: "Ballon capté en touche, lancement d’une nouvelle attaque.",
             firstBigMoment: "Premier temps fort, les supporters donnent de la voix !",
             wingBreak: "Percée spectaculaire sur l’aile, ça se joue à vitesse grand V !",
             paceChange: "Changement de rythme surprenant, l’adversaire est pris de vitesse.",
             lightningCounter: "Contre-attaque éclair, tout le public se lève !",
             clearingKick: "Coup de pied de recentrage qui soulage la pression adverse.",
             impeccableDefense: "La défense est impeccable, aucun espace n’est trouvé.",
             highForwardsPress: "Pressing haut des avants, l’adversaire recule sous la pression.",
             constantPressure: "Pression constante. Le demi de mêlée cherche la faille.",
             defensiveCover: "Retour défensif impeccable, aucun point n’est concédé.",
             passImprecision: "Manque de précision dans la passe, le ballon file en touche.",
             virtualTimeout: "Temps mort virtuel pour soigner un joueur. Le jeu reprend vite.",
             tightScore: "Le score reste serré, chaque action compte dans cette première mi-temps tendue.",
             packOrganizes: "Le pack s’organise, ça sent la puissance dans cette touche !",
             breakThroughMiddle: "Une percée dans l’axe, les avants se faufilent sous la pression !",
             oppoDefenseStrong: "La défense adverse tient bon, chaque plaquage fait reculer l’attaque !",
             flyhalfFix: "Le demi d’ouverture fixe la ligne, cherche un intervalle !",
             newLineout: "Nouvelle touche, ballon lancé à la perfection !",
             tryInMinds: "L’essai est dans toutes les têtes, mais la mêlée se prépare !",
             yellowCardComing: "Carton jaune imminent, le duel physique tourne au vinaigre !",
             tacticalKick: "Un coup de pied tactique pour soulager la pression dans l’en-but !",
             hookerRelance: "La relance du talonneur surprend tout le monde, ça part en folie !",
             crowdElectric: "Le public est debout, l’atmosphère est électrique avant la reprise !",
             halftimeWhistle: "Et c'est la mi-temps ! 40 minutes de haute intensité dans ce premier acte.",
             engagedFirstHalf: "Une première mi-temps engagée, les deux équipes ont livré une belle bataille.",
             highIntensityFewChances: "Beaucoup d'intensité mais peu d'occasions franches dans ce premier acte.",
             tightScoreNothingDone: "Le score est serré, rien n'est encore joué dans cette rencontre.",
             halftimeAdvantageButWork: "Nous avons l'avantage à la pause, mais tout reste à faire.",
             oppoDifferenceBeforeBreak: "L'équipe adverse a su faire la différence juste avant la pause.",
             rainComplicatesPasses: "La pluie complique les transmissions, mais l'engagement est total des deux côtés.",
             crowdHereAtmosphere: "Le public est au rendez-vous, l'ambiance est magnifique ici à la pause.",
             coachesAdjustSecondHalf: "Les coachs vont devoir ajuster leurs plans pour faire la différence en seconde période.",
             matchWideOpen: "Le match est encore très ouvert, tout reste à écrire en deuxième mi-temps.",
             expectFastRestart: "On attend une reprise tambour battant après cette première période intense.",
             halftimeEpicBattle: "La pause sonne sur un duel d’exception où chaque mètre a été âprement disputé !",
             noTriesForwardBattle: "Aucun essai inscrit, mais la bataille des avants fait toujours rage !",
             noInchGivenTension: "Les deux équipes n’ont pas lâché un centimètre, la tension reste palpable !",
             halftimeGoallessUncertainty: "Score vierge à la mi-temps, mais l’incertitude reste maître du jeu !",
             firstHalfDefensive: "Un premier acte marqué par la maîtrise des défenses et l’engagement physique !",
             crowdBuzzedElectric: "Le public a vibré sur chaque action, l’atmosphère est électrique !",
             fewPenaltiesFluentRef: "L’arbitre a sifflé peu de fautes, gage d’un arbitrage fluide et maîtrisé !",
             defensiveLocksStrong: "Les cadenas défensifs ont tenu bon, il faudra trouver la clé en deuxième période !",
             coachesObserveAdjust: "Les coachs observent attentivement, prêts à déclencher leurs ajustements !",
             breakdownBattlesFatigue: "Les duels au sol ont rythmé ce premier acte, et la fatigue commence à poindre !",
             kickingDrawsField: "Le jeu au pied tactique a dessiné le terrain, mais aucun point n’a encore été marqué !",
             trylessFirstHalfPromise: "Une première mi-temps sans essai, mais pleine de promesses pour la suite !",
             scrumSceneCombative: "La mêlée a été le théâtre de nombreux affrontements, symbole de la combativité !",
             backsOnAlert: "Les trois-quarts sont restés en embuscade, guettant la moindre faille !",
             seeYouSecondHalf: "Rendez-vous à l’entame de la seconde mi-temps pour un dénouement passionnant !",
             secondHalfKickoff: "Le coup d'envoi de la deuxième mi-temps vient d'être donné, 40 minutes pour faire la différence !",
             ourTeamBetterIntent: "Notre équipe revient des vestiaires avec de bien meilleures intentions.",
             oppoWantsGap: "Les adversaires semblent déterminés à creuser l'écart dès la reprise.",
             quickLineout: "Touche jouée rapidement, on veut maintenir la pression.",
             scrumKnockOn: "Mêlée concédée, l’arbitre sanctionne un en-avant.",
             ballStolen: "Ballon gratté au sol, quelle prise d’initiative !",
             carrierPressure: "Pressing sur le porteur, rien ne passe dans ce couloir.",
             breakAttempt: "Tentative de break, grosse séquence offensive en cours.",
             wingBreakDefOpens: "Percée sur l’aile, l’espace se crée enfin dans la défense.",
             defensesHold: "Les défenses tiennent bon malgré les assauts répétés.",
             defenseBarricaded: "Défense barricadée, aucun espace n’est trouvé.",
             pressureResumes: "Reprise de la pression sur la ligne, défense héroïque.",
             subFreshImpact: "Changement opéré. Un impact frais arrive sur le terrain.",
             quickPenalty: "Pénalité jouée vite, l’arbitre ménage le spectacle.",
             edgeKickTime: "Coup de pied tactique en bout de ligne pour tuer le temps.",
             stratLineout: "Touche stratégique dans le camp adverse, à suivre…",
             hitsGetHarder: "Les impacts sont de plus en plus rudes, la fatigue commence à se faire sentir.",
             firstCramps: "Les premières crampes apparaissent, signe d'une dépense physique énorme.",
             everyBallLikeFinal: "Chaque ballon est disputé comme une finale, l'intensité est maximale.",
             moneyTime: "Le money-time approche, chaque décision va compter dans cette fin de match.",
             lastChance: "Dernière opportunité avant le coup de sifflet final. Tout se joue maintenant.",
             lastTackle: "Dernier plaquage décisif, la victoire se joue dans les dernières secondes.",
             subsBringEnergy: "Les remplaçants entrent en jeu pour insuffler un nouvel élan offensif !",
             backlineCombo: "La ligne arrière combine parfaitement, l’ouverture est imminente !",
             strongScrumPush: "La mêlée solide fait reculer l’adversaire d’un mètre à chaque engagement !",
             scrumhalfPlaysQuick: "Le demi de mêlée joue vite, l’ailier prend la profondeur !",
             yellowForHighTackle: "Carton jaune pour un plaquage haut, l’infériorité numérique pèse déjà !",
             shortHandedDefense: "La réduction d’homme est gérée, la défense se resserre à dix !",
             counterattackIgnites: "Une relance foudroyante depuis l’en-but et le terrain s’embrase !",
             penaltyForTouch: "Pénalité jouée en touche pour une conquête près de la ligne !",
             pinballArea: "Un coup de billard dans la surface, spectaculaire mais sans concrétiser !",
             clockTicks: "Le chrono file, il faut accélérer pour éviter la prolongation !",
             finalWhistleEnd: "Coup de sifflet final, fin de la rencontre.",
             logicalVictory: "Victoire logique après une performance solide de l'équipe !",
             oppoDeservedWin: "Succès de l'équipe adverse mérité après un match maîtrisé.",
             tightMatchCongrats: "Match accroché jusqu'au bout, bravo aux deux équipes.",
             defeatDespiteEffort: "Défaite malgré une grosse débauche d'énergie.",
             frustratingMatch: "Match frustrant, beaucoup d'efforts pour peu de récompense.",
             teamNeverGaveUp: "L'équipe n'a jamais baissé les bras malgré l'issue.",
             totalCommitment: "On retiendra l'engagement total des joueurs aujourd'hui.",
             finalWhistleMeetingEnds: "Coupe de sifflet final, la rencontre s’achève !",
             undisputedVictory: "Victoire incontestable après un match maîtrisé de bout en bout !",
             bitterDefeat: "Défaite amère malgré une collecte d’efforts remarquable !",
             narrowVictory: "Succès étriqué au terme d’un duel âpre et équilibré !",
             breathlessEnd: "Fin de match haletante, bravo aux deux collectifs !",
             teamConfidence: "L’équipe gagne en confiance et tourne la page sur cette performance !",
             oppoWinsEfficiently: "L’adversaire s’impose logiquement grâce à une grosse efficacité !",
             backToLockerRoomPositive: "Retour aux vestiaires sur une note positive pour préparer la suite !",
             scoreReflectsCommitment: "Le score reflète l’engagement total des joueurs jusqu’au bout !",
             thanksSupporters: "Merci aux supporters pour leur ferveur, rendez-vous bientôt !",
             spiritNeverFailed: "Malgré la défaite, l’état d’esprit n’a jamais faibli !",
             crowdVibrated: "Le public a vibré, cette ambiance restera gravée !",
             nextMeetingFix: "Prochain rendez-vous fixé pour corriger les erreurs du jour !",
             refEndsDebate: "L’arbitrage a soufflé la fin des débats, félicitations aux vainqueurs !",
             ruggedShowEnd: "Clap de fin sur un spectacle rugueux et passionnant !",
             seeNextMatch: "Rendez-vous au prochain match pour rebondir.",
             thanksForFollowing: "Merci à tous d'avoir suivi ce direct avec nous, à bientôt !",
             refPenaltyForUs: "L'arbitre siffle une pénalité en notre faveur.",
             penaltyAgainstOpp: "Pénalité contre l'équipe adverse pour hors-jeu.",
             simplePenaltyNoCard: "Simple pénalité après visionnage, aucun carton distribué.",
             yellowRepeated: "Carton jaune pour faute répétée.",
             yellowAntiPlayOpp: "Carton jaune contre un joueur adverse pour anti-jeu.",
             straightRedUs: "Carton rouge direct ! L'équipe est réduite à 14.",
             redOppDangerous: "Carton rouge pour un geste dangereux côté adverse.",
             ourPlayerInjured: "Notre joueur sort sur blessure.",
             oppPlayerInjured: "Joueur de l'équipe adverse sort sur blessure.",
             refVideoTry: "L'arbitre fait appel à la vidéo pour vérifier l'essai.",
             refVideoDispute: "L'arbitre demande la vidéo pour une action litigieuse.",
             videoTryAwarded: "Après consultation vidéo, l'essai est validé par l'arbitre.",
             videoTryRefused: "Après arbitrage vidéo, l'essai est refusé.",
             scrumKnockOnSlippery: "Mêlée sifflée, faute de main sur ce ballon glissant.",
             refDiscussionCaptains: "Discussion entre l'arbitre et les capitaines pour calmer les esprits.",
             timeOff: "Arrêt du temps.",
             timeBackOn: "Reprise du temps.",
             tryCollective: "ESSAI !!! Magnifique enchaînement collectif, tout en puissance.",
             tryIndividual: "ESSAI !!! Percée fulgurante, quelle action individuelle !",
             tryInterception: "ESSAI sur interception, quelle lecture du jeu incroyable !",
             conversionSuccess: "Transformation réussie, deux points supplémentaires au compteur.",
             conversionMissed: "Transformation manquée, le ballon fuit les perches de peu.",
             penaltySuccess: "Pénalité réussie, l’écart se creuse au score.",
             penaltyMissed: "Pénalité manquée, dommage dans ce moment important.",
             dropGoalSuccess: "DROP !!! Trois points supplémentaires dans la besace !",
             dropGoalMissed: "Tentative de drop, mais le ballon passe sous la barre.",
             tryAfterPhases: "Essai inscrit après plusieurs temps de jeu.",
             tryInterceptionOpp: "Essai marqué après une interception.",
             conversionSuccessOpp: "Transformation réussie suite à l'essai.",
             conversionMissedOpp: "Transformation manquée après l'essai.",
             penaltySuccessOpp: "Pénalité réussie sur faute au sol.",
             penaltyMissedOpp: "Pénalité manquée, le ballon passe à côté.",
             dropGoalSuccessOpp: "Drop réussi pour ajouter trois points.",
             dropGoalMissedOpp: "Tentative de drop manquée.",
             fliesChangedDonkey: "Les mouches ont changé d’âne !",
             slapBoxOpen: "La boîte à gifles est ouverte !",
             endOfFairCowpats: "C’est à la fin de la foire que l’on compte les bouses...",
             shedFellDog: "La cabane est tombée sur le chien !",
             pigInCorn: "Le cochon est dans le maïs !",
             niceMaul: "Oh la belle cocotte !",
             bigHit: "Il a pris un caramel XXL !",
             helmetShotChest: "C’est un coup de casque dans le buffet !",
             fellLikePancake: "Il est tombé comme une crêpe mal retournée !",
             tackleShookStands: "Le placage a fait trembler les tribunes !",
             foldedLikeNapkin: "Il a été plié en deux comme une serviette !",
             slapBoxAgain: "On a ouvert la boîte à gifles !",
             tractorPassed: "Le tracteur est passé sur lui !",
             fierceRucks: "Ça frotte sévère dans les rucks !",
             shedFellDogRepeat: "La cabane est tombée sur le chien !",
             sweptByTackle: "Il a pris la marée sur ce plaquage !",
             stuckLikePostit: "Il est resté collé comme un post-it sur son vis-à-vis !",
             oldSchoolHits: "Ça tape comme à l'ancienne aujourd'hui !",
             pigInCornRepeat: "Le cochon est dans le maïs !",
             cementMixerDefense: "On a sorti la bétonneuse en défense !",
             maulLikeSteamroller: "La cocotte avance comme un rouleau compresseur !",
             shedFellDogRan: "La cabane est tombée et le chien est parti en courant !",
             forum_title: "Club",
             forum_description: "Créez des phases de poule et des tournois (brackets) facilement.",
             access_forum: "Accéder",
         
           },
           en: {
             langSectionTitle: "Language",
             langSectionDesc: "Select your language for the XVLIVEMANAGER interface.",
             frLabel: "Français",
             enLabel: "English",
             esLabel: "Español",
             welcomeUser: "User",
             welcomeTaglineText: "Thank you for using XVLIVEMANAGER",
         liveManagement: "Live management:",
             shutdownTitle: "Stop the server",
             stopServerBtn: "Stop server",
             shutdownConfirm: "Do you really want to stop the XVLIVEMANAGER server?",
             shutdownSuccess: "The server will stop…",
             shutdownFail: "Failed to stop the server!",
             shutdownError: "Server stopped",
             obsDescription: "View the active scene in OBS in real time.",
             stopLocalServer: "Stop the local server",
             mainInfo: "Main information",
             teamCompositions: "Team lineups",
             addPartners: "Add partners",
             livePreparation: "Live preparation",
             layouts: "Interfaces",
             deleteData: "Delete data",
             matchArchives: "Match archives",
             timer: "Timer",
             manageEveryMoment: "Manage every moment of the match with precision, smoothness, and responsiveness.",
             serverError: "Server error",
             matchScore: "Match score",
             home: "Home",
             away: "Away",
             videoStream: "Video stream",
             pasteEmbedUrl: "Paste your platform's embed URL and click \"Load\".",
             embedUrl: "Embed URL",
             loadBtn: "Load",
             pleaseEnterUrl: "Please enter a URL.",
             obsOnly: "Only for OBS Studio",
             optimalIntegration: "Optimal compatibility and integration.",
             meetingControl: "Match management",
             masterEveryMoment: "Master every moment of the match: scorers recording, events management, substitutions, and comments — all in real time.",
             scorersList: "Scorers list",
             keyMoments: "Key moments",
             lineupRotation: "Lineup rotation",
             dragScorer: "Drag a player onto the type of score to record.",
             homeTeam: "Home team",
             essai: "Try",
             transformation: "Conversion",
             drop: "Drop goal",
             pénalité: "Penalty",
             awayTeam: "Away team",
             viewScorersList: "View scorers list",
             fullScorersList: "Full scorers list",
             scorersHistory: "Find the full history of the match scorers in real time.<br>(This table updates automatically with every action)",
             homeTeamCaps: "HOME TEAM",
             awayTeamCaps: "AWAY TEAM",
             dragDataError: "Error in drag data",
             updateScoreError: "Error updating score or timer.",
             updateScorersError: "Error updating scorers.",
             dragEvent: "Drag a player onto the event type to record.",
             homeTeam: "Home team",
             awayTeam: "Away team",
             homeTeamCaps: "HOME TEAM",
             awayTeamCaps: "AWAY TEAM",
             viewEventsList: "View events list",
             fullEventsList: "Full key events list",
             eventsHistory: "Find the full history of match events in real time.<br>(This table updates automatically with every action)",
             carton_jaune: "Yellow card",
             carton_rouge: "Red card",
             blessure: "Injury",
             missingElements: "Missing elements for drag & drop events.",
             dragDataError: "Error in drag data",
             updateEventsError: "Error updating events.",
             getMinuteError: "Could not retrieve the minute.",
             mainIntroDesc: "Drag a starting player onto a substitute to record the substitution.",
             buteursTitleHome: "Home team",
             rempLabel: "Substitutes",
             buteursTitleAway: "Away team",
             showRemplacantsBtn: "Show substitution list",
             mainIntroTitle: "Full substitution list",
             rempHomeTeam: "HOME TEAM",
             rempAwayTeam: "AWAY TEAM",
             rempHistoryDesc: "Find the match substitution history, in real time.<br>(This table updates automatically with every action)",
             dragDataError: "Error in drag data",
             wrongTeamAlert: "Drag a starter from the correct team.",
             timerFail: "timer_value failed",
             rempUpdateFail: "update_remplacants failed",
             rempUpdateErr: "Error updating substitutes.",
             minuteFail: "Unable to fetch the minute.",
             rempSubmitUpdateErr: "Error updating substitutes.",
             toggleComments: "Show comments feed",
             commentsTitle: "Comments feed",
             commentsDesc: "Choose a predefined comment and drag it to the central area to send it automatically. You can also enter a manual message.",
             tabAccueil: "Intro",
             tabMeteo: "Weather",
             tabFirstHalf: "1st half",
             tabHalftime: "Halftime",
             tabSecondHalf: "2nd half",
             tabEnd: "End of match",
             tabReferee: "Referee",
             tabYourTeam: "Your team",
             tabOpponent: "Opponent",
             tabExpressions: "Expressions",
             predefinedCommentsTitle: "Predefined comments",
             dropHere: "Drop here",
             livePreviewTitle: "Live preview",
             hoverToPreview: "Hover over a comment to preview it.",
             customTextPlaceholder: "Custom message…",
             showComments: "Show comments feed",
             hideComments: "Hide comments feed",
             archives_header: "Match archives",
             archives_loading: "Loading archives…",
             no_archive: "No archive available.",
             archive_summary: "Summary of",
             archive_content: "Contains date, location, lineup, score, events…",
             archive_consult: "View",
             archive_delete_btn: "Delete",
             archive_delete_confirm: "Delete this summary?",
             archive_load_fail: "Failed to load.",
             interfaces_header: "Interfaces",
             interfaces_instructions_title: "Instructions",
             interfaces_instructions_msg: "<b>A ZIP pack of an interface</b> includes all the displays used during a match: pre-match, halftime summary, full match summary, and live match.",
             interfaces_offline_msg: "Unavailable offline. Please connect to the Internet to access the interface gallery.",
             cancel_btn: "Cancel",
             interface_pack_installed: "— pack installed",
             download_zip: "Download ZIP pack",
             import_btn: "Import",
             install_btn: "Install",
             installing: "Installing...",
             import_error: "Error: You must import the exact file ",
             import_error_2: " (Selected file: ",
             import_error_end: ")",
             offlineTitle: "Unavailable offline",
             offlineMsg: "Please connect to the Internet to access the modules.",
             mainInfo: "Main information",
             mainInfo: "Main information",
             instructionsTitle: "Instructions",
             instructionsMsg: "Please fill in the following fields with the exact details of the match: date, time, location and referee names.",
             matchDetails: "Match details",
             dateLabel: "Date",
             timeLabel: "Time",
             cityLabel: "City",
             stadiumLabel: "Stadium",
             cityPlaceholder: "City",
             stadiumPlaceholder: "Stadium",
             referees: "Referees",
             refCentral: "Referee",
             refCentralPlaceholder: "Referee",
             refTouch1: "Touch Judge 1",
             refTouch1Placeholder: "Touch Judge 1",
             refTouch2: "Touch Judge 2",
             refTouch2Placeholder: "Touch Judge 2",
             refTMO: "TMO",
             refTMOPlaceholder: "TMO",
             cancelBtn: "Cancel",
             validateBtn: "Validate",
             teamLineups: "Team lineups",
             lineupsInstructions: "Please fill in the fields for each team: select a logo, enter the team name, and complete the starting players and substitutes.",
             homeTeam: "Home team",
             chooseLogoBtn: "Choose a logo",
             noLogoHome: "No logo",
             teamNameLabel: "Team name",
             teamNamePlaceholder: "France",
             playerNamePlaceholder: "Player name",
             poste_1_label: "1 – Loosehead Prop",
             poste_2_label: "2 – Hooker",
             poste_3_label: "3 – Tighthead Prop",
             poste_4_label: "4 – Lock",
             poste_5_label: "5 – Lock",
             poste_6_label: "6 – Blindside Flanker",
             poste_7_label: "7 – Openside Flanker",
             poste_8_label: "8 – Number 8",
             poste_9_label: "9 – Scrum-half",
             poste_10_label: "10 – Fly-half",
             poste_11_label: "11 – Left Wing",
             poste_12_label: "12 – Inside Centre",
             poste_13_label: "13 – Outside Centre",
             poste_14_label: "14 – Right Wing",
             poste_15_label: "15 – Fullback",
             substitutes: "Substitutes",
             substituteLabel_1: "Substitute 1",
             substituteLabel_2: "Substitute 2",
             substituteLabel_3: "Substitute 3",
             substituteLabel_4: "Substitute 4",
             substituteLabel_5: "Substitute 5",
             substituteLabel_6: "Substitute 6",
             substituteLabel_7: "Substitute 7",
             substituteLabel_8: "Substitute 8",
             addPartnersTitle: "Add partners",
             instructionsTitle: "Instructions",
             partnersInstructions: "Import the logos of your 6 partners below.<br>A preview will be displayed and you can delete each logo using the cross.",
             chooseLogoBtn: "Choose a logo",
             cancelBtn: "Cancel",
             validateBtn: "Validate",
             partnerLabel_1: "Partner 1",
             partnerLabel_2: "Partner 2",
             partnerLabel_3: "Partner 3",
             partnerLabel_4: "Partner 4",
             partnerLabel_5: "Partner 5",
             partnerLabel_6: "Partner 6",
             yourPartners: "Your partners",
             livePrepTitle: "Live preparation",
             instructionsTitle: "Instructions",
             livePrepInstructions: "Set your OBS scrolling message here and configure a custom countdown.",
             preMatch: "Pre-match",
             countdownMsgLabel: "Countdown message",
             countdownMsgPlaceholder: "The match starts in…",
             durationLabel: "Duration",
             liveLabel: "Live",
             obsScrollLabel: "OBS scrolling message",
             obsScrollPlaceholder: "Welcome to the stadium.",
             cancelBtn: "Cancel",
             validateBtn: "Validate",
             deleteDataTitle: "DATA DELETION",
             deleteDataWarning: "<b>Warning&nbsp;:</b> you are about to delete <b>all data</b>.<br><span style=\"display:block; font-size:0.78em; color:#bfc3c9; font-style:italic; margin-top:0.45em;\">This action is <u>permanent</u>. A full archive of the match will be automatically generated after deletion.</span>",
             cancelBtn: "Cancel",
             confirmDeleteBtn: "Confirm deletion",
             settingsTitle: "Settings",
             chooseLogoBtn: "Choose a logo",
             usernameLabel: "Username",
             usernamePlaceholder: "Username",
             taglineLabel: "Your tagline",
             taglinePlaceholder: "Your tagline",
             cancelBtn: "Cancel",
             saveBtn: "Save",
             yourStatsTitle: "Your statistics",
             timeSpentLabel: "Time spent on <strong>XVLIVEMANAGER</strong>",
             keysTypedLabel: "Keys typed",
             clicksLabel: "Clicks made",
             progressionTitle: "Your progression:",
             levelIntermediate: "Intermediate (25%): 75 h / 300,000 keys / 75,000 clicks",
             levelMaster: "Master (50%): 150 h / 600,000 keys / 150,000 clicks",
             levelGrandmaster: "Grandmaster (100%): 300 h / 1,200,000 keys / 300,000 clicks",
             resetBtn: "Reset",
             defaultUser: "User",
             defaultTagline: "Thank you for using XVLIVEMANAGER.",
             levelNovice: "Novice",
             levelIntermediateShort: "Intermediate",
             levelMasterShort: "Master",
             levelGrandmasterShort: "Grandmaster",
             partnersNoInternet: "",
             footerSettings: "Settings",
             footerHelp: "Help",
             footerForum: "Forum",
             footerPartner: "Partner",
             footerUpdate: "Checking...",
             serverAddress: "SERVER ADDRESS:",
             unknownStatus: "Unknown status",
             importantUpdate: "Important update",
             upToDate: "Up to date",
             unknownStatusTitle: "Unable to check the version.",
             upToDateTitle: "Your interface is up to date",
             newVersion: "New version",
             newVersionTitle: "New version",
             updateInProgress: "Update in progress…",
             updateDone: "Update completed, reloading…",
             updateError: "Error during the update.",
             noPartner: "No partner",
             loadingArchives: "Loading archives…",
             sectionWelcome: "Welcome & atmosphere",
             sectionWeather: "Weather conditions",
             sectionFirstHalf: "First half",
             sectionHalftime: "Halftime discussion",
             sectionSecondHalf: "Second half",
             sectionEnd: "End of the match",
             sectionReferee: "Referee",
             sectionActionYou: "Your action",
             sectionActionOpponent: "Opponent's action",
             sectionExpression: "Expression",
             hoverPreview: "Hover over a comment to preview it.",
             arenaWelcome: "Welcome to the arena! Today, it's all about rugby.",
             fieldReady: "The field is ready, the fans are excited, rugby takes the stage!",
             ovalWarriors: "The oval warriors are set, ready for battle!",
             ballTeams80mn: "One ball, two teams, 80 minutes of intense combat. That's rugby!",
             todayCourage: "Today, it's all about courage, solidarity, and great play.",
             vibrateWithUs: "Feel the passion for this great rugby moment with us!",
             kickoffShow: "Kick-off is on, and the oval show begins!",
             titansPrepare: "The titans of the game are getting ready to roar on the pitch!",
             everyPassCounts: "Every pass counts, every tackle thrills—long live rugby!",
             fullStadium: "Stadium packed, emotions guaranteed—let's play rugby!",
             energyPowerHeart: "Energy, power, and heart—this is the spirit of rugby!",
             scrumForms: "The scrum forms, tension rises, are you ready for battle?",
             neverGiveUp: "Here, nobody gives up; we fight till the end—welcome to rugby combat!",
             spectacularTriesAhead: "Spectacular tries ahead—get ready!",
             whistleAboutToBlow: "The whistle is about to blow, the players are ready—action starts now!",
             journeyToSolidarity: "A journey to the heart of solidarity, strength, and passion—long live rugby!",
             blueSky: "Under a clear blue sky, everything is set for fast, skillful rugby!",
             perfectPitch: "The pitch is perfect, the sun is shining… we expect an attacking fireworks show today!",
             dryField: "The field is dry, legs are light—perfect for backs to show their speed.",
             fineRainAdapt: "Despite the fine rain, there's no closing the game. Players must adapt to a slippery ball and tighten their lines.",
             slipperyBall: "Watch out for the ball turning into soap today… forwards must secure every ball in the contact zones!",
             mudIsOut: "It's muddy, footing is heavy. Only the tough will survive this physical challenge.",
             windArrives: "The wind is up. Kickers will need nerves of steel for penalties.",
             trickyWind: "With this tricky wind, field position will be key. High balls will fly, but beware of tricky bounces!",
             coldBites: "The cold bites, the field is soft… A real warrior's match this afternoon!",
             winterWeather: "With wintery weather, forget beautiful play! Today it's real rugby—gritty, true, the kind that forges champions!",
             rainWindMud: "In the rain, wind, and mud… that's rugby too, and why we love this sport!",
             toughConditions: "Conditions are tough, but great players shine when the weather is against them.",
             cloudsGather: "The sky darkens with threatening clouds, but get ready for a counter-attack festival!",
             morningDrizzle: "Morning drizzle gives way to a light wind—perfect for long, precise passes!",
             thermoDrops: "The temperature drops, muscles tighten—each scrum will be a mental battle!",
             dewOnPitch: "A light dew covers the pitch, promising explosive sprints from the first touch!",
             hotSunEndurance: "The sun is strong—endurance will be key, expect constant relay battles!",
             wetPitchTrajectories: "The wet turf creates unpredictable paths—every catch will be a challenge!",
             gustsSweep: "Gusts sweep the field—the art of kicking will make the difference today!",
             distantThunder: "A distant thunder rumbles, but the forwards won't back down—the battle at the rucks will be epic!",
             heatRises: "Heat rises, substitutions will be crucial to keep up the pace!",
             freshBreeze: "A cool breeze blows in, strategic high balls will set the rhythm for this aerial battle!",
             kickoffStart: "Kick-off! The first 40 minutes of intense action are underway!",
             firstBallRuck: "First ball in play, the battle at the rucks begins!",
             teamsSizingUp: "Both teams are feeling each other out early, nobody wants to reveal their hand.",
             firstBreak: "First line break—this match is heating up already!",
             highTempo: "The tempo is high, both sides are trying to dictate the pace.",
             fierceBattle: "It's a fierce contest, no one is giving an inch.",
             forwardsLongPlay: "The forwards settle into a long phase, the defense stands strong.",
             handlingErrorScrum: "A small handling error under pressure, scrum awarded by the referee.",
             simulatedScrum: "Simulated scrum, the battle continues in the rucks.",
             wellPlayedLineout: "Lineout well executed, ball quickly back in play.",
             lineoutAttack: "Ball secured from the lineout—launching a fresh attack.",
             firstBigMoment: "First big moment, the fans find their voice!",
             wingBreak: "Spectacular break down the wing—it's being played at full speed!",
             paceChange: "Surprising change of pace, the opposition is caught off guard.",
             lightningCounter: "Lightning-fast counterattack, the whole crowd is on its feet!",
             clearingKick: "A clearing kick relieves the defensive pressure.",
             impeccableDefense: "Impeccable defense, no gaps are found.",
             highForwardsPress: "Forwards pressing high, the opposition is pushed back.",
             constantPressure: "Relentless pressure—the scrum-half is looking for a weakness.",
             defensiveCover: "Perfect defensive cover, not a single point conceded.",
             passImprecision: "Lack of precision in the pass, the ball goes into touch.",
             virtualTimeout: "Virtual timeout for an injury—quickly back to play.",
             tightScore: "The score remains tight—every action counts in this tense first half.",
             packOrganizes: "The pack lines up—it feels like power is coming in this lineout!",
             breakThroughMiddle: "A break through the middle—the forwards squeeze through under pressure!",
             oppoDefenseStrong: "Opposition defense holds strong, every tackle pushes back the attack!",
             flyhalfFix: "The fly-half fixes the line, searching for a gap!",
             newLineout: "New lineout, throw-in perfectly executed!",
             tryInMinds: "Try is on everyone's mind, but the scrum is about to set!",
             yellowCardComing: "Yellow card imminent—the physical battle is heating up!",
             tacticalKick: "Tactical kick to relieve the pressure in the in-goal area!",
             hookerRelance: "The hooker's counterattack surprises everyone—chaos breaks out!",
             crowdElectric: "The crowd is on its feet, the atmosphere is electric before the restart!",
             halftimeWhistle: "And that's halftime! 40 minutes of high-intensity rugby in this opening act.",
             engagedFirstHalf: "A hard-fought first half, both teams have put up a great battle.",
             highIntensityFewChances: "Plenty of intensity but few clear chances in this opening period.",
             tightScoreNothingDone: "The score is tight, everything is still to play for in this match.",
             halftimeAdvantageButWork: "We have the advantage at halftime, but there's still a lot to do.",
             oppoDifferenceBeforeBreak: "The opposition made the difference just before the break.",
             rainComplicatesPasses: "Rain is making passing tricky, but both sides are fully committed.",
             crowdHereAtmosphere: "The crowd is here in numbers, the atmosphere is fantastic at halftime.",
             coachesAdjustSecondHalf: "Coaches will need to adjust their gameplans to make the difference in the second half.",
             matchWideOpen: "The match is still wide open—everything remains to be decided in the second period.",
             expectFastRestart: "We're expecting a fast-paced restart after this intense first half.",
             halftimeEpicBattle: "Halftime after a fantastic battle where every meter was hard-fought!",
             noTriesForwardBattle: "No tries scored yet, but the battle up front rages on!",
             noInchGivenTension: "Neither side has given up an inch—tension is still high!",
             halftimeGoallessUncertainty: "Goalless at the break, but uncertainty still rules!",
             firstHalfDefensive: "A first half marked by defensive discipline and physical commitment!",
             crowdBuzzedElectric: "The crowd has buzzed for every play—the atmosphere is electric!",
             fewPenaltiesFluentRef: "Few penalties whistled, proof of smooth and controlled officiating!",
             defensiveLocksStrong: "The defensive locks have held strong, they’ll need to find the key after halftime!",
             coachesObserveAdjust: "The coaches are watching closely, ready to make their moves!",
             breakdownBattlesFatigue: "The breakdowns have set the tone, and fatigue is starting to show!",
             kickingDrawsField: "Kicking strategy has shaped the territory, but no points have been scored yet!",
             trylessFirstHalfPromise: "A tryless first half, but plenty of promise for what's to come!",
             scrumSceneCombative: "The scrum has been the scene of many battles—a symbol of fighting spirit!",
             backsOnAlert: "The backs are lying in wait, ready to pounce on any gap!",
             seeYouSecondHalf: "See you at the start of the second half for a thrilling finish!",
             secondHalfKickoff: "Second half kicks off—40 minutes to make the difference!",
             ourTeamBetterIntent: "Our team comes out of the locker room with much better intent.",
             oppoWantsGap: "The opposition looks determined to widen the gap right from the restart.",
             quickLineout: "Quick lineout, we want to keep up the pressure.",
             scrumKnockOn: "Scrum conceded—referee penalizes a knock-on.",
             ballStolen: "Ball stolen on the ground—great initiative!",
             carrierPressure: "Pressure on the ball carrier—nothing gets through this channel.",
             breakAttempt: "Breakaway attempt—big attacking sequence underway.",
             wingBreakDefOpens: "Break down the wing—space finally opens up in the defense.",
             defensesHold: "Defenses hold strong despite repeated attacks.",
             defenseBarricaded: "Barricaded defense—no space found.",
             pressureResumes: "Pressure resumes on the try line—heroic defending.",
             subFreshImpact: "Substitution—fresh legs come on.",
             quickPenalty: "Quick penalty—referee keeps the action flowing.",
             edgeKickTime: "Tactical kick to the edge to run down the clock.",
             stratLineout: "Strategic lineout in opposition territory—one to watch…",
             hitsGetHarder: "Hits are getting harder and harder—fatigue is setting in.",
             firstCramps: "First cramps appear, a sign of huge physical effort.",
             everyBallLikeFinal: "Every ball is fought for like a final—maximum intensity.",
             moneyTime: "Money time is coming—every decision will matter in this finale.",
             lastChance: "Last chance before the final whistle—everything to play for now.",
             lastTackle: "Last decisive tackle—victory is in the final seconds.",
             subsBringEnergy: "Substitutes come on to bring fresh attacking energy!",
             backlineCombo: "The backline links up perfectly—an opening is coming!",
             strongScrumPush: "Solid scrum drives the opposition back a meter every time!",
             scrumhalfPlaysQuick: "Scrum-half plays quickly—winger goes deep!",
             yellowForHighTackle: "Yellow card for a high tackle—down to 14, the pressure is on!",
             shortHandedDefense: "Short-handed defense is organized—tightening up to ten men!",
             counterattackIgnites: "Lightning counterattack from the in-goal—the stadium erupts!",
             penaltyForTouch: "Penalty kicked for touch—a drive close to the line!",
             pinballArea: "A pinball in the danger area—spectacular but no score!",
             clockTicks: "The clock is ticking, we have to speed up to avoid extra time!",
             finalWhistleEnd: "Final whistle, end of the match.",
             logicalVictory: "Logical win after a solid team performance!",
             oppoDeservedWin: "Deserved win for the opponents after a controlled game.",
             tightMatchCongrats: "Tight match to the end, congratulations to both teams.",
             defeatDespiteEffort: "Defeat despite great effort.",
             frustratingMatch: "Frustrating match, lots of effort for little reward.",
             teamNeverGaveUp: "The team never gave up despite the outcome.",
             totalCommitment: "Total commitment from the players today.",
             finalWhistleMeetingEnds: "Final whistle, the match ends!",
             undisputedVictory: "Undisputed victory after a dominant match!",
             bitterDefeat: "Bitter defeat despite a remarkable effort!",
             narrowVictory: "Narrow victory after a tough and balanced duel!",
             breathlessEnd: "Breathless finish, well done to both squads!",
             teamConfidence: "The team grows in confidence and moves on from this performance!",
             oppoWinsEfficiently: "Opponents win logically thanks to great efficiency!",
             backToLockerRoomPositive: "Back to the locker room on a positive note for the next challenge!",
             scoreReflectsCommitment: "The score reflects the players' commitment to the very end!",
             thanksSupporters: "Thanks to the supporters for their passion, see you soon!",
             spiritNeverFailed: "Despite the defeat, the spirit never failed!",
             crowdVibrated: "The crowd vibrated, this atmosphere will be remembered!",
             nextMeetingFix: "Next match scheduled to fix today's mistakes!",
             refEndsDebate: "The referee ends the debates, congratulations to the winners!",
             ruggedShowEnd: "Curtain call on a rugged and thrilling show!",
             seeNextMatch: "See you at the next match to bounce back.",
             thanksForFollowing: "Thank you all for following this live, see you soon!",
             refPenaltyForUs: "The referee awards us a penalty.",
             penaltyAgainstOpp: "Penalty against the opposition for offside.",
             simplePenaltyNoCard: "Simple penalty after video review, no card given.",
             yellowRepeated: "Yellow card for repeated infringement.",
             yellowAntiPlayOpp: "Yellow card for an opposition player—unsportsmanlike conduct.",
             straightRedUs: "Straight red card! The team is down to 14.",
             redOppDangerous: "Red card for a dangerous play by the opposition.",
             ourPlayerInjured: "Our player leaves the field injured.",
             oppPlayerInjured: "Opposition player leaves the field injured.",
             refVideoTry: "The referee calls for the TMO to check the try.",
             refVideoDispute: "Referee calls for video review on a contentious action.",
             videoTryAwarded: "After review, the try is awarded by the referee.",
             videoTryRefused: "After video review, the try is disallowed.",
             scrumKnockOnSlippery: "Scrum awarded—knock-on on this slippery ball.",
             refDiscussionCaptains: "Discussion between the referee and captains to calm things down.",
             timeOff: "Time off.",
             timeBackOn: "Time back on.",
             tryCollective: "TRY!!! Brilliant team move, all about power.",
             tryIndividual: "TRY!!! Blistering break—what a solo effort!",
             tryInterception: "Intercept try—amazing game reading!",
             conversionSuccess: "Conversion successful, two more points on the board.",
             conversionMissed: "Conversion missed, just wide of the posts.",
             penaltySuccess: "Penalty successful, the gap widens on the scoreboard.",
             penaltyMissed: "Penalty missed—shame at such a crucial moment.",
             dropGoalSuccess: "DROP GOAL!!! Three more points in the bag!",
             dropGoalMissed: "Drop goal attempt, but it goes under the bar.",
             tryAfterPhases: "Try scored after several phases.",
             tryInterceptionOpp: "Try scored after an interception.",
             conversionSuccessOpp: "Conversion successful after the try.",
             conversionMissedOpp: "Conversion missed after the try.",
             penaltySuccessOpp: "Penalty successful for hands in the ruck.",
             penaltyMissedOpp: "Penalty missed—the ball goes wide.",
             dropGoalSuccessOpp: "Drop goal made to add three points.",
             dropGoalMissedOpp: "Drop goal attempt missed.",
             fliesChangedDonkey: "The flies have changed donkeys!",
             slapBoxOpen: "The slap box is open!",
             endOfFairCowpats: "It's at the end of the fair that you count the cowpats...",
             shedFellDog: "The shed has fallen on the dog!",
             pigInCorn: "The pig is in the corn!",
             niceMaul: "Oh, what a rolling maul!",
             bigHit: "He took a massive hit!",
             helmetShotChest: "That’s a helmet shot right in the chest!",
             fellLikePancake: "He fell like a badly flipped pancake!",
             tackleShookStands: "That tackle shook the stands!",
             foldedLikeNapkin: "He was folded in two like a napkin!",
             slapBoxAgain: "The slap box is open again!",
             tractorPassed: "The tractor ran over him!",
             fierceRucks: "It’s fierce in the rucks!",
             shedFellDogRepeat: "The shed has fallen on the dog!",
             sweptByTackle: "He got swept away by that tackle!",
             stuckLikePostit: "He stuck like a post-it to his opposite!",
             oldSchoolHits: "It’s old-school heavy hits today!",
             pigInCornRepeat: "The pig is in the corn!",
             cementMixerDefense: "We brought out the cement mixer in defense!",
             maulLikeSteamroller: "The maul is moving like a steamroller!",
             shedFellDogRan: "The shed has fallen and the dog has run off!",
             forum_title: "Club",
             forum_description: "Create pool phases and tournaments (brackets) easily.",
             access_forum: "Access",
          },
           es: {
langSectionTitle: "Idioma",
langSectionDesc: "Seleccione su idioma para la interfaz de XVLIVEMANAGER.",
frLabel: "Francés",
enLabel: "Inglés",
esLabel: "Español",
welcomeUser: "Usuario",
welcomeTaglineText: "Gracias por utilizar XVLIVEMANAGER",

liveManagement: "Gestión en directo:",
shutdownTitle: "Detener el servidor",
stopServerBtn: "Detener el servidor",
shutdownConfirm: "¿Realmente desea detener el servidor de XVLIVEMANAGER?",
shutdownSuccess: "El servidor se detendrá…",
shutdownFail: "¡Error al detener el servidor!",
shutdownError: "Servidor detenido",
obsDescription: "Vea la escena activa en OBS en tiempo real.",
stopLocalServer: "Detener el servidor local",
mainInfo: "Información principal",
teamCompositions: "Alineaciones",
addPartners: "Añadir patrocinadores",
livePreparation: "Preparación del directo",
layouts: "Interfaces",
deleteData: "Eliminar datos",
matchArchives: "Archivos de partidos",
timer: "Cronómetro",
manageEveryMoment: "Gestione cada momento del partido con precisión, fluidez y rapidez.",
serverError: "Error del servidor",
matchScore: "Marcador",
home: "Local",
away: "Visitante",
videoStream: "Transmisión de vídeo",
pasteEmbedUrl: "Pegue la URL de inserción de su plataforma y haga clic en \"Cargar\".",
embedUrl: "URL de inserción",
loadBtn: "Cargar",
pleaseEnterUrl: "Por favor, introduzca una URL.",
obsOnly: "Solo para OBS Studio",
optimalIntegration: "Compatibilidad e integración óptimas.",
meetingControl: "Gestión del partido",
masterEveryMoment: "Domine cada momento del partido: anotadores, gestión de eventos, sustituciones y comentarios, todo en tiempo real.",
scorersList: "Lista de anotadores",
keyMoments: "Momentos clave",
lineupRotation: "Rotación de alineación",
dragScorer: "Arrastre un jugador al tipo de anotación para registrarla.",
homeTeam: "Equipo local",
essai: "Ensayo",
transformation: "Transformación",
drop: "Drop goal",
pénalité: "Golpe de castigo",
awayTeam: "Equipo visitante",
viewScorersList: "Ver la lista de anotadores",
fullScorersList: "Lista completa de anotadores",
scorersHistory: "Consulte el historial completo de anotadores en tiempo real.<br>(Esta tabla se actualiza automáticamente con cada acción)",
homeTeamCaps: "EQUIPO LOCAL",
awayTeamCaps: "EQUIPO VISITANTE",
dragDataError: "Error en los datos arrastrados",
updateScoreError: "Error al actualizar el marcador o el cronómetro.",
updateScorersError: "Error al actualizar los anotadores.",
dragEvent: "Arrastre un jugador al tipo de evento para registrarlo.",
viewEventsList: "Ver la lista de eventos",
fullEventsList: "Lista completa de eventos clave",
eventsHistory: "Consulte el historial completo de eventos en tiempo real.<br>(Esta tabla se actualiza automáticamente con cada acción)",
carton_jaune: "Tarjeta amarilla",
carton_rouge: "Tarjeta roja",
blessure: "Lesión",
missingElements: "Faltan elementos para eventos de arrastrar y soltar.",
updateEventsError: "Error al actualizar los eventos.",
getMinuteError: "No se pudo obtener el minuto.",
mainIntroDesc: "Arrastre un titular sobre un suplente para registrar el cambio.",
buteursTitleHome: "Equipo local",
rempLabel: "Suplentes",
buteursTitleAway: "Equipo visitante",
showRemplacantsBtn: "Mostrar lista de sustituciones",
mainIntroTitle: "Lista completa de sustituciones",
rempHomeTeam: "EQUIPO LOCAL",
rempAwayTeam: "EQUIPO VISITANTE",
rempHistoryDesc: "Consulte el historial de sustituciones en tiempo real.<br>(Esta tabla se actualiza automáticamente con cada acción)",
wrongTeamAlert: "Arrastre un titular del equipo correcto.",
timerFail: "Fallo en timer_value",
rempUpdateFail: "Fallo en update_remplacants",
rempUpdateErr: "Error al actualizar los suplentes.",
minuteFail: "No se pudo obtener el minuto.",
rempSubmitUpdateErr: "Error al actualizar los suplentes.",
toggleComments: "Mostrar feed de comentarios",
commentsTitle: "Feed de comentarios",
commentsDesc: "Elija un comentario predefinido y arrástrelo al área central para enviarlo automáticamente. También puede introducir un mensaje manual.",
tabAccueil: "Introducción",
tabMeteo: "Clima",
tabFirstHalf: "1ª parte",
tabHalftime: "Descanso",
tabSecondHalf: "2ª parte",
tabEnd: "Final del partido",
tabReferee: "Árbitro",
tabYourTeam: "Su equipo",
tabOpponent: "Oponente",
tabExpressions: "Expresiones",
predefinedCommentsTitle: "Comentarios predefinidos",
dropHere: "Soltar aquí",
livePreviewTitle: "Vista previa en directo",
hoverToPreview: "Pase el ratón sobre un comentario para previsualizarlo.",
customTextPlaceholder: "Mensaje personalizado…",
showComments: "Mostrar feed de comentarios",
hideComments: "Ocultar feed de comentarios",

archives_header: "Archivos de partidos",
archives_loading: "Cargando archivos…",
no_archive: "Ningún archivo disponible.",
archive_summary: "Resumen de",
archive_content: "Incluye fecha, lugar, alineación, marcador, eventos…",
archive_consult: "Ver",
archive_delete_btn: "Eliminar",
archive_delete_confirm: "¿Eliminar este resumen?",
archive_load_fail: "Error al cargar.",

interfaces_header: "Interfaces",
interfaces_instructions_title: "Instrucciones",
interfaces_instructions_msg: "<b>Un paquete ZIP de interfaz</b> incluye todas las pantallas utilizadas durante el partido: pre-partido, resumen del descanso, resumen completo y partido en directo.",
interfaces_offline_msg: "No disponible sin conexión. Conéctese a Internet para acceder a la galería de interfaces.",
cancel_btn: "Cancelar",
interface_pack_installed: "— paquete instalado",
download_zip: "Descargar paquete ZIP",
import_btn: "Importar",
install_btn: "Instalar",
installing: "Instalando...",
import_error: "Error: Debe importar el archivo exacto ",
import_error_2: " (Archivo seleccionado: ",
import_error_end: ")",
offlineTitle: "No disponible sin conexión",
offlineMsg: "Conéctese a Internet para acceder a los módulos.",

mainInfo: "Información principal",
instructionsTitle: "Instrucciones",
instructionsMsg: "Por favor, complete los siguientes campos con los datos exactos del partido: fecha, hora, lugar y nombres de los árbitros.",
matchDetails: "Detalles del partido",
dateLabel: "Fecha",
timeLabel: "Hora",
cityLabel: "Ciudad",
stadiumLabel: "Estadio",
cityPlaceholder: "Ciudad",
stadiumPlaceholder: "Estadio",
referees: "Árbitros",
refCentral: "Árbitro principal",
refCentralPlaceholder: "Árbitro principal",
refTouch1: "Juez de línea 1",
refTouch1Placeholder: "Juez de línea 1",
refTouch2: "Juez de línea 2",
refTouch2Placeholder: "Juez de línea 2",
refTMO: "TMO",
refTMOPlaceholder: "TMO",
cancelBtn: "Cancelar",
validateBtn: "Validar",

teamLineups: "Alineaciones",
lineupsInstructions: "Por favor, rellene los campos para cada equipo: seleccione un logotipo, introduzca el nombre del equipo y complete los titulares y suplentes.",
homeTeam: "Equipo local",
chooseLogoBtn: "Elegir logotipo",
noLogoHome: "Sin logotipo",
teamNameLabel: "Nombre del equipo",
teamNamePlaceholder: "Francia",
playerNamePlaceholder: "Nombre del jugador",
poste_1_label: "1 – Pilar izquierdo",
poste_2_label: "2 – Talonador",
poste_3_label: "3 – Pilar derecho",
poste_4_label: "4 – Segunda línea",
poste_5_label: "5 – Segunda línea",
poste_6_label: "6 – Flanker ciego",
poste_7_label: "7 – Flanker abierto",
poste_8_label: "8 – Número 8",
poste_9_label: "9 – Medio de melé",
poste_10_label: "10 – Apertura",
poste_11_label: "11 – Ala izquierda",
poste_12_label: "12 – Centro interior",
poste_13_label: "13 – Centro exterior",
poste_14_label: "14 – Ala derecha",
poste_15_label: "15 – Zaguero",

substitutes: "Suplentes",
substituteLabel_1: "Suplente 1",
substituteLabel_2: "Suplente 2",
substituteLabel_3: "Suplente 3",
substituteLabel_4: "Suplente 4",
substituteLabel_5: "Suplente 5",
substituteLabel_6: "Suplente 6",
substituteLabel_7: "Suplente 7",
substituteLabel_8: "Suplente 8",

addPartnersTitle: "Añadir patrocinadores",
partnersInstructions: "Importe los logotipos de sus 6 patrocinadores a continuación.<br>Se mostrará una vista previa y puede eliminar cada logotipo con la cruz.",
partnerLabel_1: "Patrocinador 1",
partnerLabel_2: "Patrocinador 2",
partnerLabel_3: "Patrocinador 3",
partnerLabel_4: "Patrocinador 4",
partnerLabel_5: "Patrocinador 5",
partnerLabel_6: "Patrocinador 6",
yourPartners: "Sus patrocinadores",

livePrepTitle: "Preparación del directo",
livePrepInstructions: "Configure aquí su mensaje desplazable de OBS y un contador personalizado.",
preMatch: "Pre-partido",
countdownMsgLabel: "Mensaje de cuenta atrás",
countdownMsgPlaceholder: "El partido comienza en…",
durationLabel: "Duración",
liveLabel: "Directo",
obsScrollLabel: "Mensaje desplazable OBS",
obsScrollPlaceholder: "Bienvenidos al estadio.",

deleteDataTitle: "ELIMINACIÓN DE DATOS",
deleteDataWarning: "<b>Atención&nbsp;:</b> está a punto de eliminar <b>todos los datos</b>.<br><span style=\"display:block; font-size:0.78em; color:#bfc3c9; font-style:italic; margin-top:0.45em;\">Esta acción es <u>permanente</u>. Se generará automáticamente un archivo completo del partido tras la eliminación.</span>",
confirmDeleteBtn: "Confirmar eliminación",

settingsTitle: "Configuración",
usernameLabel: "Nombre de usuario",
usernamePlaceholder: "Nombre de usuario",
taglineLabel: "Su eslogan",
taglinePlaceholder: "Su eslogan",
saveBtn: "Guardar",

yourStatsTitle: "Sus estadísticas",
timeSpentLabel: "Tiempo en <strong>XVLIVEMANAGER</strong>",
keysTypedLabel: "Teclas pulsadas",
clicksLabel: "Clics realizados",
progressionTitle: "Su progreso:",
levelNovice: "Principiante",
levelIntermediate: "Intermedio (25%): 75 h / 300.000 teclas / 75.000 clics",
levelMaster: "Experto (50%): 150 h / 600.000 teclas / 150.000 clics",
levelGrandmaster: "Gran Maestro (100%): 300 h / 1.200.000 teclas / 300.000 clics",
levelIntermediateShort: "Intermedio",
levelMasterShort: "Experto",
levelGrandmasterShort: "Gran Maestro",
resetBtn: "Reiniciar",
defaultUser: "Usuario",
defaultTagline: "Gracias por utilizar XVLIVEMANAGER.",
partnersNoInternet: "",

footerSettings: "Configuración",
footerHelp: "Ayuda",
footerForum: "Foro",
footerPartner: "Patrocinador",
footerUpdate: "Comprobando...",
serverAddress: "DIRECCIÓN DEL SERVIDOR:",
unknownStatus: "Estado desconocido",
importantUpdate: "Actualización importante",
upToDate: "Actualizado",
unknownStatusTitle: "No se pudo verificar la versión.",
upToDateTitle: "Su interfaz está actualizada",
newVersion: "Nueva versión",
newVersionTitle: "Nueva versión",
updateInProgress: "Actualizando…",
updateDone: "Actualización completada, recargando…",
updateError: "Error durante la actualización.",
noPartner: "Sin patrocinador",
loadingArchives: "Cargando archivos…",

sectionWelcome: "Bienvenida y ambiente",
sectionWeather: "Condiciones meteorológicas",
sectionFirstHalf: "Primera parte",
sectionHalftime: "Descanso",
sectionSecondHalf: "Segunda parte",
sectionEnd: "Fin del partido",
sectionReferee: "Árbitro",
sectionActionYou: "Su acción",
sectionActionOpponent: "Acción del oponente",
sectionExpression: "Expresión",
hoverPreview: "Pase el ratón sobre un comentario para previsualizarlo.",

arenaWelcome: "¡Bienvenidos a la arena! Hoy, el protagonista es el rugby.",
fieldReady: "El campo está listo, la afición está impaciente, ¡el rugby toma el protagonismo!",
ovalWarriors: "Los guerreros ovalados están listos, preparados para la batalla.",
ballTeams80mn: "Un balón, dos equipos, 80 minutos de combate intenso. ¡Así es el rugby!",
todayCourage: "Hoy es cuestión de coraje, solidaridad y juego espectacular.",
vibrateWithUs: "¡Viva la pasión de este gran momento de rugby junto a nosotros!",
kickoffShow: "Comienza el partido y el espectáculo ovalado está en marcha.",
titansPrepare: "Los titanes del juego se preparan para rugir en el campo.",
everyPassCounts: "Cada pase cuenta, cada placaje emociona—¡viva el rugby!",
fullStadium: "Estadio lleno, emociones garantizadas—¡a jugar al rugby!",
energyPowerHeart: "Energía, fuerza y corazón—¡ese es el espíritu del rugby!",
scrumForms: "Se forma la melé, la tensión sube, ¿están listos para la batalla?",
neverGiveUp: "Aquí nadie se rinde; luchamos hasta el final—bienvenidos al combate del rugby.",
spectacularTriesAhead: "Ensayos espectaculares a la vista—¡prepárense!",
whistleAboutToBlow: "El árbitro está a punto de pitar, los jugadores listos—¡comienza la acción!",
journeyToSolidarity: "Un viaje al corazón de la solidaridad, la fuerza y la pasión—¡viva el rugby!",
blueSky: "Bajo un cielo azul despejado, todo está listo para un rugby rápido y técnico.",
perfectPitch: "El campo está perfecto, el sol brilla… ¡se espera un espectáculo ofensivo!",
dryField: "El terreno está seco, las piernas ligeras—perfecto para que los tres cuartos demuestren su velocidad.",
fineRainAdapt: "A pesar de la lluvia fina, el partido no se detiene. Habrá que adaptarse al balón resbaladizo y cerrar las líneas.",
slipperyBall: "Cuidado, hoy el balón parece jabón… ¡los delanteros tendrán que asegurar cada posesión!",
mudIsOut: "¡Barro en el campo, terreno pesado! Solo los más duros sobrevivirán a este desafío físico.",
windArrives: "El viento sopla fuerte. Los pateadores necesitarán nervios de acero para los golpes de castigo.",
trickyWind: "Con este viento traicionero, la posición en el campo será clave. ¡Atentos a los botes imprevisibles!",
coldBites: "El frío se nota, el terreno está blando… ¡un partido para guerreros!",
winterWeather: "Con este tiempo invernal, olvídense del juego bonito. Hoy es rugby puro, duro, el que forja campeones.",
rainWindMud: "Bajo la lluvia, el viento y el barro… eso también es rugby, ¡por eso nos apasiona este deporte!",
toughConditions: "Condiciones difíciles, pero los grandes jugadores brillan con mal tiempo.",
cloudsGather: "El cielo se oscurece, nubes amenazantes… ¡pero prepárense para un festival de contraataques!",
morningDrizzle: "La llovizna matinal da paso a una brisa ligera—perfecto para pases largos y precisos.",
thermoDrops: "Baja la temperatura, los músculos se tensan—¡cada melé será una batalla mental!",
dewOnPitch: "Un poco de rocío sobre el campo, promete sprints explosivos desde el primer balón.",
hotSunEndurance: "Hace calor—la resistencia será clave, ¡esperen duelos constantes!",
wetPitchTrajectories: "El césped mojado complica las trayectorias—cada recepción será un reto.",
gustsSweep: "Ráfagas de viento cruzan el campo—el arte del pateo marcará la diferencia.",
distantThunder: "Trueno lejano, pero los delanteros no se achican—la batalla en los rucks será épica.",
heatRises: "Sube la temperatura, ¡las sustituciones serán cruciales para mantener el ritmo!",
freshBreeze: "Una brisa fresca sopla, ¡los balones altos marcarán el ritmo de esta batalla aérea!",

kickoffStart: "¡Comienza el partido! Primeros 40 minutos de acción intensa.",
firstBallRuck: "Primer balón en juego, ¡comienza la lucha en los rucks!",
teamsSizingUp: "Los equipos se estudian en los primeros minutos, nadie quiere descubrir sus cartas.",
firstBreak: "¡Primera ruptura de la defensa—esto ya se calienta!",
highTempo: "El ritmo es muy alto, ambos intentan imponer su juego.",
fierceBattle: "Contienda feroz, nadie cede terreno.",
forwardsLongPlay: "Los delanteros encadenan fases largas, la defensa resiste.",
handlingErrorScrum: "Pequeño error de manejo bajo presión, melé concedida por el árbitro.",
simulatedScrum: "Melé simulada, la batalla continúa en los rucks.",
wellPlayedLineout: "Touche bien ejecutada, balón rápidamente en juego.",
lineoutAttack: "Balón asegurado en la touche—¡comienza un nuevo ataque!",
firstBigMoment: "¡Primer gran momento, la afición se hace oír!",
wingBreak: "Ruptura espectacular por la banda—¡se juega a toda velocidad!",
paceChange: "Cambio de ritmo inesperado, la defensa se sorprende.",
lightningCounter: "Contraataque relámpago, ¡todo el estadio en pie!",
clearingKick: "Patada de despeje alivia la presión defensiva.",
impeccableDefense: "Defensa impecable, no dejan huecos.",
highForwardsPress: "Delanteros presionando alto, el rival retrocede.",
constantPressure: "Presión constante—el medio de melé busca una fisura.",
defensiveCover: "Cobertura defensiva perfecta, ni un punto concedido.",
passImprecision: "Imprecisión en el pase, el balón sale fuera.",
virtualTimeout: "Tiempo muerto virtual por lesión—¡se reanuda rápido!",
tightScore: "El marcador sigue igualado—cada acción cuenta en esta primera parte tan tensa.",
packOrganizes: "La delantera se coloca—¡se avecina potencia en la touche!",
breakThroughMiddle: "Ruptura por el centro—los delanteros aprietan bajo presión.",
oppoDefenseStrong: "La defensa rival se mantiene firme, cada placaje frena el avance.",
flyhalfFix: "El apertura fija la línea, buscando un hueco.",
newLineout: "Nueva touche, lanzamiento perfectamente ejecutado.",
tryInMinds: "Todos piensan en el ensayo, pero la melé se va a formar.",
yellowCardComing: "¡Tarjeta amarilla inminente—la batalla física sube de nivel!",
tacticalKick: "Patada táctica para aliviar la presión cerca de la zona de marca.",
hookerRelance: "El talonador inicia la contra—¡sorpresa general y caos!",
crowdElectric: "La afición está de pie, ¡el ambiente es eléctrico antes del reinicio!",
halftimeWhistle: "¡Y llega el descanso! 40 minutos de rugby de alta intensidad.",
engagedFirstHalf: "Primera parte muy disputada, ambos equipos han ofrecido un gran espectáculo.",
highIntensityFewChances: "Muchísima intensidad pero pocas ocasiones claras en este inicio.",
tightScoreNothingDone: "El marcador ajustado, ¡todo por decidir en este partido!",
halftimeAdvantageButWork: "Lideramos al descanso, pero queda mucho trabajo.",
oppoDifferenceBeforeBreak: "El rival hizo la diferencia justo antes del descanso.",
rainComplicatesPasses: "La lluvia dificulta los pases, pero el compromiso es total.",
crowdHereAtmosphere: "El público llena las gradas, ambiente magnífico al descanso.",
coachesAdjustSecondHalf: "Los entrenadores tendrán que ajustar para marcar la diferencia en la segunda parte.",
matchWideOpen: "El partido sigue totalmente abierto—todo por decidir en la segunda parte.",
expectFastRestart: "Se espera un reinicio muy intenso tras esta primera parte.",
halftimeEpicBattle: "Descanso tras una batalla tremenda, ¡cada metro costó sudor!",
noTriesForwardBattle: "Todavía sin ensayos, pero la batalla en la delantera es feroz.",
noInchGivenTension: "Nadie cede terreno—¡la tensión sigue al máximo!",
halftimeGoallessUncertainty: "Sin puntos al descanso, pero todo sigue abierto.",
firstHalfDefensive: "Primera parte marcada por la disciplina defensiva y el compromiso físico.",
crowdBuzzedElectric: "La afición ha vibrado en cada jugada—¡el ambiente es eléctrico!",
fewPenaltiesFluentRef: "Pocas infracciones, muestra de arbitraje fluido y controlado.",
defensiveLocksStrong: "Las defensas han estado sólidas, ¡veremos si abren la llave tras el descanso!",
coachesObserveAdjust: "Los entrenadores observan y preparan sus movimientos.",
breakdownBattlesFatigue: "Las luchas en los rucks marcan el ritmo, ¡ya se nota el cansancio!",
kickingDrawsField: "La estrategia de pateo marca el territorio, pero nadie ha sumado aún.",
trylessFirstHalfPromise: "Primera parte sin ensayos, ¡pero se promete mucho para la segunda!",
scrumSceneCombative: "La melé ha sido el escenario de muchos duelos—¡símbolo del espíritu combativo!",
backsOnAlert: "Los tres cuartos atentos, listos para aprovechar cualquier hueco.",
seeYouSecondHalf: "Nos vemos al inicio de la segunda parte para un final apasionante.",
secondHalfKickoff: "Empieza la segunda parte—¡40 minutos para marcar la diferencia!",
ourTeamBetterIntent: "Nuestro equipo sale del vestuario con mejores intenciones.",
oppoWantsGap: "El rival sale decidido a ampliar la ventaja.",
quickLineout: "Touche rápida, queremos mantener la presión.",
scrumKnockOn: "Melé concedida—el árbitro pita un avant.",
ballStolen: "Balón robado en el suelo—¡gran iniciativa!",
carrierPressure: "Presión sobre el portador—no pasa nada por este canal.",
breakAttempt: "Intento de ruptura—gran secuencia ofensiva.",
wingBreakDefOpens: "Ruptura por la banda—¡por fin se abre la defensa!",
defensesHold: "Las defensas resisten pese a los ataques repetidos.",
defenseBarricaded: "Defensa atrincherada—no encuentran huecos.",
pressureResumes: "La presión vuelve a la línea de ensayo—defensa heroica.",
subFreshImpact: "Sustitución—piernas frescas al campo.",
quickPenalty: "Golpe rápido—el árbitro deja seguir la acción.",
edgeKickTime: "Patada a la banda para agotar el tiempo.",
stratLineout: "Touche estratégica en campo rival—¡ojo a la jugada!",
hitsGetHarder: "Los contactos se vuelven cada vez más duros—ya se nota el cansancio.",
firstCramps: "Aparecen los primeros calambres, señal del esfuerzo físico.",
everyBallLikeFinal: "Cada balón se lucha como si fuera una final—¡máxima intensidad!",
moneyTime: "Llega el money time—cada decisión cuenta en este final.",
lastChance: "Última oportunidad antes del pitido final—¡todo se decide ahora!",
lastTackle: "Último placaje decisivo—la victoria se juega en segundos.",
subsBringEnergy: "Entran los suplentes para aportar energía ofensiva.",
backlineCombo: "La línea de tres cuartos conecta—¡se abre una ocasión!",
strongScrumPush: "Melé sólida, retrocede un metro al rival en cada empuje.",
scrumhalfPlaysQuick: "El medio de melé juega rápido—el ala se lanza al ataque.",
yellowForHighTackle: "Tarjeta amarilla por placaje alto—¡quedamos con 14!",
shortHandedDefense: "Defensa en inferioridad organizada—¡reforzando con diez hombres!",
counterattackIgnites: "Contraataque relámpago desde la zona de marca—¡explosión en la grada!",
penaltyForTouch: "Golpe jugado a la touche—¡gran oportunidad cerca de la línea!",
pinballArea: "Pinball en la zona de peligro—¡espectacular pero sin puntos!",
clockTicks: "El reloj avanza, ¡hay que acelerar para evitar la prórroga!",
finalWhistleEnd: "Pitido final, se termina el partido.",
logicalVictory: "Victoria lógica tras un gran trabajo colectivo.",
oppoDeservedWin: "Victoria merecida del rival tras un partido bien controlado.",
tightMatchCongrats: "Partido ajustado hasta el final, enhorabuena a ambos equipos.",
defeatDespiteEffort: "Derrota pese a un gran esfuerzo.",
frustratingMatch: "Partido frustrante, mucho trabajo para poca recompensa.",
teamNeverGaveUp: "El equipo nunca se rindió pese al resultado.",
totalCommitment: "Compromiso total de los jugadores hoy.",
finalWhistleMeetingEnds: "Pitido final, ¡se termina el encuentro!",
undisputedVictory: "Victoria indiscutible tras un partido dominante.",
bitterDefeat: "Derrota amarga a pesar de un esfuerzo notable.",
narrowVictory: "Victoria por la mínima tras un duelo igualado.",
breathlessEnd: "Final de infarto, ¡enhorabuena a ambos equipos!",
teamConfidence: "El equipo gana confianza y se prepara para el siguiente reto.",
oppoWinsEfficiently: "El rival gana lógicamente gracias a su gran eficacia.",
backToLockerRoomPositive: "Volvemos al vestuario con sensaciones positivas para el próximo desafío.",
scoreReflectsCommitment: "El marcador refleja el compromiso de los jugadores hasta el final.",
thanksSupporters: "Gracias a los aficionados por su pasión, ¡hasta pronto!",
spiritNeverFailed: "Pese a la derrota, ¡el espíritu nunca falló!",
crowdVibrated: "La grada vibró, ¡este ambiente quedará en la memoria!",
nextMeetingFix: "Próximo partido para corregir los errores de hoy.",
refEndsDebate: "El árbitro pone fin a las discusiones, ¡felicitaciones a los ganadores!",
ruggedShowEnd: "Telón para un espectáculo duro y apasionante.",
seeNextMatch: "Nos vemos en el próximo partido para remontar.",
thanksForFollowing: "Gracias a todos por seguir la transmisión, ¡hasta pronto!",

refPenaltyForUs: "El árbitro nos concede un golpe de castigo.",
penaltyAgainstOpp: "Golpe contra el rival por fuera de juego.",
simplePenaltyNoCard: "Golpe simple tras revisión de vídeo, sin tarjeta.",
yellowRepeated: "Tarjeta amarilla por reiteración de faltas.",
yellowAntiPlayOpp: "Tarjeta amarilla al rival—antijuego.",
straightRedUs: "¡Roja directa! El equipo queda con 14.",
redOppDangerous: "Roja al rival por juego peligroso.",
ourPlayerInjured: "Nuestro jugador abandona el campo lesionado.",
oppPlayerInjured: "Un jugador rival abandona el campo lesionado.",
refVideoTry: "El árbitro pide al TMO revisar el ensayo.",
refVideoDispute: "El árbitro pide revisión de vídeo por una acción controvertida.",
videoTryAwarded: "Tras revisión, el árbitro concede el ensayo.",
videoTryRefused: "Tras revisión, el ensayo es anulado.",
scrumKnockOnSlippery: "Melé concedida—avant sobre este balón resbaladizo.",
refDiscussionCaptains: "Charla entre árbitro y capitanes para calmar los ánimos.",
timeOff: "Tiempo detenido.",
timeBackOn: "Tiempo reanudado.",

tryCollective: "¡ENSAYO! Gran jugada colectiva, pura potencia.",
tryIndividual: "¡ENSAYO! ¡Qué ruptura individual!",
tryInterception: "Ensayo de intercepción—¡gran lectura de juego!",
conversionSuccess: "Transformación acertada, sumamos dos puntos más.",
conversionMissed: "Transformación fallada, pasa fuera de los palos.",
penaltySuccess: "Golpe acertado, se amplía la diferencia.",
penaltyMissed: "Golpe fallado—pena en un momento clave.",
dropGoalSuccess: "¡DROP GOAL! Tres puntos más en el marcador.",
dropGoalMissed: "Intento de drop, pero queda corto.",
tryAfterPhases: "Ensayo tras varias fases de juego.",
tryInterceptionOpp: "Ensayo del rival tras una intercepción.",
conversionSuccessOpp: "Transformación rival acertada.",
conversionMissedOpp: "Transformación rival fallada.",
penaltySuccessOpp: "Golpe rival acertado por manos en el ruck.",
penaltyMissedOpp: "Golpe rival fallado—el balón se va fuera.",
dropGoalSuccessOpp: "Drop rival acertado, suma tres puntos.",
dropGoalMissedOpp: "Drop rival fallado.",

fliesChangedDonkey: "¡Las moscas cambiaron de burro!",
slapBoxOpen: "¡Se abrió la caja de bofetadas!",
endOfFairCowpats: "¡Al final de la feria se cuentan las boñigas!",
shedFellDog: "¡Se cayó la caseta sobre el perro!",
pigInCorn: "¡El cerdo está en el maíz!",
niceMaul: "¡Qué buen maul!",
bigHit: "¡Recibió un golpe enorme!",
helmetShotChest: "¡Golpe de casco en pleno pecho!",
fellLikePancake: "¡Cayó como una tortita mal volteada!",
tackleShookStands: "¡Ese placaje hizo temblar las gradas!",
foldedLikeNapkin: "¡Lo doblaron como una servilleta!",
slapBoxAgain: "¡Se abrió de nuevo la caja de bofetadas!",
tractorPassed: "¡Le pasó un tractor por encima!",
fierceRucks: "¡Duro en los rucks!",
shedFellDogRepeat: "¡Se volvió a caer la caseta sobre el perro!",
sweptByTackle: "¡Se lo llevó la marea en ese placaje!",
stuckLikePostit: "¡Quedó pegado como un post-it a su rival!",
oldSchoolHits: "¡Hoy se pega como en los viejos tiempos!",
pigInCornRepeat: "¡Otra vez el cerdo en el maíz!",
cementMixerDefense: "¡Sacamos la mezcladora en defensa!",
maulLikeSteamroller: "¡El maul avanza como una apisonadora!",
shedFellDogRan: "¡Se cayó la caseta y el perro salió corriendo!",
             forum_title: "Club",
             forum_description: "Crea fases de grupos y torneos (brackets) fácilmente.",
             access_forum: "Acceder"
         
           }
         };
      </script>
<script>
   let lang = localStorage.getItem('lang') || 'fr';
   
   function switchLang(newLang) {
     lang = newLang;
     localStorage.setItem('lang', lang);
     location.reload(); 
   }
   
   function applyTranslations() {
     document.querySelectorAll('[data-i18n]').forEach(el => {
       const key = el.getAttribute('data-i18n');
       if (translations[lang] && translations[lang][key]) {
         el.innerHTML = translations[lang][key];
       }
     });
   
     document.querySelectorAll('[data-i18n-title]').forEach(el => {
       const key = el.getAttribute('data-i18n-title');
       if (translations[lang] && translations[lang][key]) {
         el.title = translations[lang][key];
       }
     });
   }
   
   function updateSwitchBtn() {
     document.getElementById('fr-opt').className = 'lang-opt' + (lang === 'fr' ? ' selected' : '');
     document.getElementById('en-opt').className = 'lang-opt' + (lang === 'en' ? ' selected' : '');
     document.getElementById('es-opt').className = 'lang-opt' + (lang === 'es' ? ' selected' : '');
   }
   
   document.addEventListener('DOMContentLoaded', () => {
     document.getElementById('fr-opt').addEventListener('click', () => switchLang('fr'));
     document.getElementById('en-opt').addEventListener('click', () => switchLang('en'));
     document.getElementById('es-opt').addEventListener('click', () => switchLang('es'));
     applyTranslations();
     updateSwitchBtn();
   });
</script>
<script>
   function applyInputPlaceholders() {
     document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
       const key = el.getAttribute('data-i18n-placeholder');
       el.placeholder = (translations[window.lang] && translations[window.lang][key]) 
         ? translations[window.lang][key] 
         : el.placeholder;
     });
   }
   
   window.addEventListener('storage', function(e) {
     if (e.key === 'lang') {
       window.lang = localStorage.getItem('lang') || 'fr';
       applyInputPlaceholders();
     }
   });
   
   Object.defineProperty(window, 'lang', {
     get() {
       return localStorage.getItem('lang') || 'fr';
     },
     set(val) {
       localStorage.setItem('lang', val);
       applyInputPlaceholders();
     }
   });
   
   document.addEventListener('DOMContentLoaded', applyInputPlaceholders);
</script>
   </body>
</html>
